/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//Copyright (c) 2013, Baidu Inc.
//    All rights reserved.
//
//    Redistribution and use of this software in source and binary forms, with or
//    without modification, are permitted provided that the following conditions
//are met:
//
//    Redistributions of source code must retain the above copyright notice, this
//list of conditions and the following disclaimer.
//
//    Redistributions in binary form must reproduce the above copyright notice,
//    this list of conditions and the following disclaimer in the documentation
//and/or other materials provided with the distribution.
//
//    Neither the name of Baidu Inc. nor the names of its contributors may be used
//to endorse or promote products derived from this software without specific
//prior written permission of Baidu Inc.
//
//    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
//AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
//IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
//DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
//ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
//(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
//LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
//ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
//(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
//SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

//
//Copyright (c) 2014 Ga?tan Renaudeau
//
//Permission is hereby granted, free of charge, to any person
//obtaining a copy of this software and associated documentation
//files (the "Software"), to deal in the Software without
//restriction, including without limitation the rights to use,
//    copy, modify, merge, publish, distribute, sublicense, and/or sell
//copies of the Software, and to permit persons to whom the
//Software is furnished to do so, subject to the following
//conditions:
//
//    The above copyright notice and this permission notice shall be
//included in all copies or substantial portions of the Software.
//
//    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
//    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
//OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
//NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
//HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
//    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
//FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
//OTHER DEALINGS IN THE SOFTWARE.

//Copyright (c) 2013 The New York Times
//
//Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
//
//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
//
//    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE

!function(t,e){"function"==typeof define&&define.amd?define([],e):t.VanCharts=e()}(this,function(){var t,e,a;!function(i){function r(t,e){return b.call(t,e)}function n(t,e){var a,i,r,n,o,s,l,h,c,d,u,g=e&&e.split("/"),f=y.map,p=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),o=t.length-1,y.nodeIdCompat&&L.test(t[o])&&(t[o]=t[o].replace(L,"")),t=g.slice(0,g.length-1).concat(t),c=0;c<t.length;c+=1)if(u=t[c],"."===u)t.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((g||p)&&f){for(a=t.split("/"),c=a.length;c>0;c-=1){if(i=a.slice(0,c).join("/"),g)for(d=g.length;d>0;d-=1)if(r=f[g.slice(0,d).join("/")],r&&(r=r[i])){n=r,s=c;break}if(n)break;!l&&p&&p[i]&&(l=p[i],h=c)}!n&&l&&(n=l,s=h),n&&(a.splice(0,s,n),t=a.join("/"))}return t}function o(t,e){return function(){var a=x.call(arguments,0);return"string"!=typeof a[0]&&1===a.length&&a.push(null),g.apply(i,a.concat([t,e]))}}function s(t){return function(e){return n(e,t)}}function l(t){return function(e){m[t]=e}}function h(t){if(r(v,t)){var e=v[t];delete v[t],_[t]=!0,u.apply(i,e)}if(!r(m,t)&&!r(_,t))throw new Error("No "+t);return m[t]}function c(t){var e,a=t?t.indexOf("!"):-1;return a>-1&&(e=t.substring(0,a),t=t.substring(a+1,t.length)),[e,t]}function d(t){return function(){return y&&y.config&&y.config[t]||{}}}var u,g,f,p,m={},v={},y={},_={},b=Object.prototype.hasOwnProperty,x=[].slice,L=/\.js$/;f=function(t,e){var a,i=c(t),r=i[0];return t=i[1],r&&(r=n(r,e),a=h(r)),r?t=a&&a.normalize?a.normalize(t,s(e)):n(t,e):(t=n(t,e),i=c(t),r=i[0],t=i[1],r&&(a=h(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:a}},p={require:function(t){return o(t)},exports:function(t){var e=m[t];return"undefined"!=typeof e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:d(t)}}},u=function(t,e,a,n){var s,c,d,u,g,y,b=[],x=typeof a;if(n=n||t,"undefined"===x||"function"===x){for(e=!e.length&&a.length?["require","exports","module"]:e,g=0;g<e.length;g+=1)if(u=f(e[g],n),c=u.f,"require"===c)b[g]=p.require(t);else if("exports"===c)b[g]=p.exports(t),y=!0;else if("module"===c)s=b[g]=p.module(t);else if(r(m,c)||r(v,c)||r(_,c))b[g]=h(c);else{if(!u.p)throw new Error(t+" missing "+c);u.p.load(u.n,o(n,!0),l(c),{}),b[g]=m[c]}d=a?a.apply(m[t],b):void 0,t&&(s&&s.exports!==i&&s.exports!==m[t]?m[t]=s.exports:d===i&&y||(m[t]=d))}else t&&(m[t]=a)},t=e=g=function(t,e,a,r,n){if("string"==typeof t)return p[t]?p[t](e):h(f(t,e).f);if(!t.splice){if(y=t,y.deps&&g(y.deps,y.callback),!e)return;e.splice?(t=e,e=a,a=null):t=i}return e=e||function(){},"function"==typeof a&&(a=r,r=n),r?u(i,t,e,a):setTimeout(function(){u(i,t,e,a)},4),g},g.config=function(t){return g(t)},t._defined=m,a=function(t,e,a){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(a=e,e=[]),r(m,t)||r(v,t)||(v[t]=[t,e,a])},a.amd={jQuery:!0}}(),a("almond",function(){}),a("utils/ColorUtils",[],function(){function t(t){return String(t).replace(/\s+/g,"")}function e(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}function a(t,e){if("function"!=typeof e)throw new TypeError;for(var a=t?t.length:0,i=0;a>i;i++)t[i]=e(t[i]);return t}function i(i){if(p[i]&&(i=p[i]),i=t(i),/^#[\da-f]{3}$/i.test(i)){i=parseInt(i.slice(1),16);var r=(3840&i)<<8,n=(240&i)<<4,o=15&i;i="#"+((1<<24)+(r<<4)+r+(n<<4)+n+(o<<4)+o).toString(16).slice(1)}var s,l,h,r=i.match(m),c=[];if(r[2])s=r[2].replace("#","").split(""),h=[s[0]+s[1],s[2]+s[3],s[4]+s[5]],c=a(h,function(t){return e(parseInt(t,16),[0,255])});else if(r[4]){var d=r[4].split(",");l=d[3],h=d.slice(0,3),c=a(h,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e(t,[0,255])}),"undefined"!=typeof l&&c.push(e(parseFloat(l),[0,1]))}return 3==c.length&&c.push(1),c}function r(t,i){if(i=i||"rgb",t&&(3===t.length||4===t.length)){if(t=a(t,function(t){return t>1?Math.ceil(t):t}),i.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(i.indexOf("hs")>-1){var r=a(t.slice(1,3),function(t){return t+"%"});t[1]=r[0],t[2]=r[1]}return i.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=e(t[3],[0,1]),i+"("+t.slice(0,4).join(",")+")"):i+"("+t.slice(0,3).join(",")+")"}}function n(t){for(var a=i(t),n=[],o=0;3>o;o++){var s=a[o];128>=s?n.push(e(s-(255-s)*(255-2*s)/(2*s),[0,255])):n.push(e(s+s*(2*s-255)/(2*(255-s)),[0,255]))}var l=[];for(o=0;3>o;o++)l.push(.65*a[o]+.35*n[o]);return r(l)}function o(t,e){for(var a=i(t),n=0;3>n;n++)a[n]/=e;return r(a,"rgba")}function s(t){for(var e=i(t),a=0;3>a;a++)e[a]*=.95;return r(e,"rgba")}function l(t,e){var a=i(t);return a[3]=e,r(a,"rgba")}function h(t,e,a,n){var o=i(t),s=d(o[0],o[1],o[2]);s[0]+=e,s[1]+=a,s[2]+=n;var l=c(s[0],s[1],s[2]);return r(l,"rgb")}function c(t,e,a){e=Math.min(1,Math.max(0,e)),a=Math.min(1,Math.max(0,a));var i=0,r=0,n=0;if(0===e)i=r=n=255*a+.5;else{var o=6*(t-Math.floor(t)),s=o-Math.floor(o),l=a*(1-e),h=a*(1-e*s),c=a*(1-e*(1-s));switch(Math.floor(o)){case 0:i=255*a+.5,r=255*c+.5,n=255*l+.5;break;case 1:i=255*h+.5,r=255*a+.5,n=255*l+.5;break;case 2:i=255*l+.5,r=255*a+.5,n=255*c+.5;break;case 3:i=255*l+.5,r=255*h+.5,n=255*a+.5;break;case 4:i=255*c+.5,r=255*l+.5,n=255*a+.5;break;case 5:i=255*a+.5,r=255*l+.5,n=255*h+.5}}var d=[];return d.push(Math.floor(i)),d.push(Math.floor(r)),d.push(Math.floor(n)),d}function d(t,e,a){var i,r,n,o=[3],s=t>e?t:e;a>s&&(s=a);var l=e>t?t:e;if(l>a&&(l=a),n=s/255,r=0!==s?(s-l)/s:0,0===r)i=0;else{var h=(s-t)/(s-l),c=(s-e)/(s-l),d=(s-a)/(s-l);i=t==s?d-c:e==s?2+h-d:4+c-h,i/=6,0>i&&(i+=1)}return o[0]=i,o[1]=r,o[2]=n,o}function u(t){var e=i(t);return e[3]}function g(t){return f(t).hex}function f(t){var e,a,n,o,s=r(i(t),"rgba"),l=/rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([.\d]+))?\)/,h=s.replace(/\s+/g,"").match(l);return e=(+h[1]).toString(16),e=1===e.length?"0"+e:e,a=(+h[2]).toString(16),a=1===a.length?"0"+a:a,n=(+h[3]).toString(16),n=1===n.length?"0"+n:n,o=100*+(h[5]?h[5]:1),{hex:"#"+e+a+n,alpha:Math.ceil(o)}}var p={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},m=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i;return{mixColorWithHSB:h,getHighLightColor:n,getColorWithDivider:o,mixColorWithAlpha:l,getColorOpacity:u,colorToHex:g,colorToHexAlpha:f,getClickColor:s}}),a("Constants",[],function(){return{BAR_CHART:"bar",COLUMN_CHART:"column",LINE_CHART:"line",AREA_CHART:"area",PIE_CHART:"pie",SCATTER_CHART:"scatter",BUBBLE_CHART:"bubble",GAUGE_CHART:"gauge",RADAR_CHART:"radar",X_AXIS_COMPONENT:"xAxis",Y_AXIS_COMPONENT:"yAxis",VALUE_AXIS_COMPONENT:"value",CATEGORY_AXIS_COMPONENT:"category",DATE_AXIS_COMPONENT:"datetime",DATA_SHEET_COMPONENT:"dataSheet",LEGEND_COMPONENT:"legend",TITLE_COMPONENT:"title",AXIS_COMPONENT:"axis",TOOLTIP_COMPONENT:"tooltip",TOOLBAR_COMPONENT:"tools",ZOOM_COMPONENT:"zoom",VANCHART:"vanchart",MAX_ICON:"vancharts-icon-max",MIN_ICON:"vancharts-icon-min",MENU_ICON:"vancharts-icon-menu",REFRESH_ICON:"vancharts-icon-refresh",DECREASE_ICON:"vancharts-icon-decrease",INCREASE_ICON:"vancharts-icon-increase",EXPORT_ICON:"vancharts-icon-export",LINE_NONE:0,LINE_THIN:1,LINE_MEDIUM:2,LINE_THICK:5,BOTTOM:"bottom",TOP:"top",LEFT:"left",RIGHT:"right",RIGHT_TOP:"right-top",LEFT_TO_RIGHT:"left-to-right",RIGHT_TO_LEFT:"right-to-right",BOTTOM_TO_TOP:"bottom-to-top",TOP_TO_BOTTOM:"top-to-botttom",NULL_MARKER:"null_marker",CIRCLE:"circle",SQUARE:"square",DIAMOND:"diamond",TRIANGLE:"triangle",CIRCLE_HOLLOW:"circle_hollow",SQUARE_HOLLOW:"square_hollow",DIAMOND_HOLLOW:"diamond_hollow",TRIANGLE_HOLLOW:"triangle_hollow",NORMAL_ICON:"normal-legend-icon",PIE_ICON:"pie-legend-icon",DONUT_ICON:"donut-legend-icon",DASH_TYPE:{Solid:"0,0",Dash:"8,6"},RAPHAEL_KEY:"raphael-key",SAME_ARC:"sameArc",DIFFERENT_ARC:"differentArc",OUTSIDE:"outside",INSIDE:"inside",CENTER:"center",VANCHART_SVG:"vanchart-svg-render",VANCHART_VML:"vanchart-vml-render",PIE_SVG:"pie-svg-render",PIE_VML:"pie-vml-render",BAR_SVG:"bar-svg-render",BAR_VML:"bar-vml-render",LINE_SVG:"line-svg-render",LINE_VML:"line-vml-render",AREA_SVG:"area-svg-render",AREA_VML:"area-vml-render",GAUGE_SVG:"gauge-svg-render",GAUGE_VML:"gauge-vml-render",RADAR_SVG:"radar-svg-render",RADAR_VML:"radar-vml-render",TITLE_SVG:"title-svg-render",TITLE_VML:"title-vml-render",LEGEND_SVG:"legend-svg-render",LEGEND_VML:"legend-vml-render",TOOLBAR_SVG:"toolbar-svg-render",TOOLBAR_VML:"toolbar-vml-render",ZOOM_SVG:"zoom-svg-render",DATA_SHEET_SVG:"data-sheet-svg-render",DATA_SHEET_VML:"data-sheet-vml-render",AXIS_RENDER:"axis-render",CATEGORY_AXIS_SVG:"category-axis-svg-render",CATEGORY_AXIS_VML:"category-axis-vml-render",VALUE_AXIS_SVG:"value-axis-svg-render",VALUE_AXIS_VML:"value-axis-vml-render",DATE_AXIS_SVG:"date-axis-svg-render",DATE_AXIS_VML:"date-axis-vml-render",STYLE_GRADUAL:"gradual",GAUGE_POINTER:"pointer",GAUGE_POINTER_SEMI:"pointer_semi",GAUGE_SLOT:"slot",GAUGE_THERMOMETER:"thermometer",GAUGE_RING:"ring",HORIZONTAL_LAYOUT:"horizontal",VERTICAL_LAYOUT:"vertical",POLYGON_RADAR:"polygon",CIRCLE_RADAR:"circle",MONITOR:"monitor"}}),a("utils/BaseUtils",["require","./ColorUtils","../Constants","VanCharts"],function(t){function e(t,e){function a(){}var i=t.prototype;a.prototype=e.prototype,t.prototype=new a;for(var r in i)t.prototype[r]=i[r];t.constructor=t}function a(){for(var t,e=arguments.length,a=0;e>a;a++)if(t=arguments[a],"undefined"!=typeof t&&null!==t)return t;return null}function i(t){return"[object Array]"===Object.prototype.toString.apply(t)}function r(t,e){e=c(e);for(var a in e)t.style(a,e[a])}function n(t,e,i){t=a(t,"");var r=document.createElement("div");document.body.appendChild(r),r.style.visibility="hidden",r.style.whiteSpace="nowrap",r.style.position="absolute";var n="12px";for(var o in e)"function"!=typeof e[o]&&"color"!=o&&(r.style[o]=e[o]),"fontSize"==o&&(n=e[o]);n=-1!=n.indexOf("pt")?4*parseFloat(n)/3:parseFloat(n),r.innerHTML=t;var s=r.offsetWidth||0,l=r.offsetHeight||0;return document.body.removeChild(r),{width:s,height:l}}function o(t){var e=t.fontSize||"12px";return-1!=e.indexOf("pt")?4*parseFloat(e)/3:parseFloat(e)}function s(t,e,a,i){i=i||0,a-=2*i;for(var r=[],o=0,s=t.length;s>o;){for(var l=o;n(t.substring(l,o+1),e,!1).width<a&&(o++,!(o>=s)););if(l==o)return[];r.push(t.substring(l,o))}return r}function l(t,e,a,i){var r=n(t,e,a),o=Math.abs(k(i||0)),s=r.width*Math.cos(o)+r.height*Math.sin(o),l=r.width*Math.sin(o)+r.height*Math.cos(o);return{width:s,height:l}}function h(t){if("object"==typeof t&&null!==t){var e=t;if(i(t)){e=[];for(var a=0,r=t.length;r>a;a++)e[a]=h(t[a])}else{e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=h(t[n]))}return e}return t}function c(t){var e={};for(var a in t)if(et[a]&&(e[et[a]]=t[a]),"color"==a&&(e.color=t[a]),"fontSize"==a){var i=t[a];-1!=i.indexOf("pt")&&(i=4*parseFloat(i)/3,e["font-size"]=i+"px")}return e}function d(t){if(!(t instanceof Array))return[t,t,t,t];switch(t.length+""){case"4":return t;case"3":return[t[0],t[1],t[2],t[1]];case"2":return[t[0],t[1],t[0],t[1]];case"1":return[t[0],t[0],t[0],t[0]];case"0":return[0,0,0,0]}}function u(t,e){return e%2==0?Math.round(t):Math.round(t-.5)+.5}function g(t,e,a,i,r){return r=r||0,t=u(t,r),e=u(e,r),a=Math.round(a),i=Math.round(i),{x:t,y:e,width:a,height:i}}function f(t,e){if(!e)return t;for(var a=0,i=e.length;i>a;a++)t.push(e[a]);return t}function p(t){t.parentNode.appendChild(t)}function m(t){t.parentNode.insertBefore(t,t.parentNode.firstChild)}function v(t){t.ownerSVGElement.appendChild(t)}function y(t){t.ownerSVGElement.appendChild(t,t.ownerSVGElement.firstChild)}function _(t,e){return t.x<=e.x&&t.y<=e.y&&t.x+t.width>=e.x+e.width&&t.y+t.height>=e.y+e.height}function b(t,e){if(!t||!e)return!1;var a=Math.max(t.x,e.x),i=Math.max(t.y,e.y),r=Math.min(t.x+t.width,e.x+e.width),n=Math.min(t.y+t.height,e.y+e.height);return r>=a&&n>=i}function x(t,e){return!_(t,e)&&!b(t,e)}function L(t,e){var i=a(e.x||e[0]),r=a(e.y||e[1]);return t.x<i&&t.x+t.width>i&&t.y<r&&t.y+t.height>r}function C(){return!!window.SVGSVGElement}function T(t,e,a){for(var i=Math.min(t,e),r=Math.max(t,e),n=r-i;i>a;)a+=n;for(;a>r;)a-=n;return a}function A(t,e){return Math.min(Math.max(t,e[0]),e[1])}function k(t){return Math.PI*(t/180)}function R(t){return 180*t/Math.PI}function O(t){return null==t||void 0==t?null:"string"==typeof t?new Function("return "+t)():t}function h(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){for(var e=[],a=0,i=t.length;i>a;++a)e[a]=h(t[a]);return e}if(t instanceof String)return new String(t);if(t instanceof Object){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=h(t[r]));return e}}function S(t){var e=""===t||null===t||void 0===t;return e}function P(t){return void 0==t||null==t}function w(e){var a=t("VanCharts"),i=document.getElementsByTagName("body")[0],r=document.createElement("div");r.style.position="fixed",r.style.display="inline",r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",r.style.zIndex=330,C()?r.style.background="rgba(0,0,0,0.3)":(r.style.backgroundColor="black",r.style.filter="alpha(opacity=30)"),i.appendChild(r);var n=r.clientWidth,o=r.clientHeight,s=970,l=600,c=(n-970)/2,d=(o-600)/2,u=document.createElement("div");u.style.position="fixed",u.style.display="inline",u.style.top=d+"px",u.style.left=c+"px",u.style.width=s+"px",u.style.height=l+"px",C()?(u.style.background="white",u.style.boxShadow="0px 4px 50px rgba(0,0,0,0.5)"):(u.style.backgroundColor="white",r.style.filter="alpha(opacity=100)"),r.appendChild(u),r.onclick=function(t){i.removeChild(r)},u.onclick=function(t){t=t||window.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0};var g=a.init(u),f=h(e);f.tools.exitFullScreen=f.tools.fullScreen,f.tools.fullScreen=null,g.setOptions(f)}function D(t){var e=t.parentNode;e.parentNode&&e.parentNode.removeChild(e)}function E(){return window.ActiveXObject||"ActiveXObject"in window?!0:!1}function M(t){return t+="",t=t.replace(/\s+/g,""),t=t.replace(/-/g,"V"),t=t.replace(/\./g,""),t=t.replace(/\+/g,""),t=t.replace(/\(/g,""),t=t.replace(/\)/g,""),t=t.replace(/%/g,""),t=t.replace(/#/g,""),t.replace(/:/g,"")}function I(t){return null==t||void 0==t}function B(t){return!I(t)}function N(t,e){if(!t.length)return-1;for(var a=0,i=t.length;i>a;a++)if(t[a]==e)return a;return-1}function G(t,e){var i=a(t.x,t[0]),r=a(t.y,t[1]),n=a(e.width,e[0]),o=a(e.height,e[1]);return{x:i,y:r,width:n,height:o}}function H(t,e){var i=a(t.x,t[0]),r=a(t.y,t[1]),n=a(e.x,e[0]),o=a(e.y,e[1]),s=i-n,l=r-o;return Math.sqrt(s*s+l*l)}function V(t){return t.width<=0||t.height<=0}function F(t,e){return Math.log(e)/Math.log(t)}function U(t,e){var a=0,i=0;try{a=t.toString().split(".")[1].length}catch(r){}try{i=e.toString().split(".")[1].length}catch(r){}var n=Math.pow(10,Math.max(a,i));return(Math.round(t*n)+Math.round(e*n))/n}function z(t,e){var a=t.toString(),i=e.toString(),r=0;try{r=i.split(".")[1].length}catch(n){}try{r-=a.split(".")[1].length}catch(n){}return(a.replace(".","")-0)/(i.replace(".","")-0)*Math.pow(10,r)}function W(t){var e=[];for(var a in t)e.push(t[a]);return e}function X(t){"string"==typeof t&&(t=new Date(Date.parse(t.replace(/-|\./g,"/"))));var e=new Date("1970/01/01");return"number"==typeof t?t:t.getTime()-e.getTime()}function q(t){var e=new Date("1970/01/01");return t=t||0,new Date(t+e.getTime())}function Y(t){var e=t;return"string"==typeof e?e=new Date(Date.parse(e.replace(/-|\./g,"/"))):"number"==typeof e&&(e=new Date(e)),e}function Z(t){var e=a(t.x,t[0]),i=a(t.y,t[1]);return C()?"translate("+e+","+i+")":"t"+e+","+i}function j(t){var e=tt.NULL_MARKER+tt.CIRCLE+tt.SQUARE+tt.DIAMOND+tt.TRIANGLE+tt.CIRCLE_HOLLOW+tt.SQUARE_HOLLOW+tt.DIAMOND_HOLLOW+tt.TRIANGLE_HOLLOW;return-1==e.indexOf(t)}function Q(t,e,a){t.attachEvent?t.attachEvent("on"+e,a):t.addEventListener&&t.addEventListener(e,a,!1)}function K(t,e,a){t.removeEventListener?t.removeEventListener(e,a,!1):t.attachEvent&&t.detachEvent("on"+e,a)}function $(t){return Math.abs(t)<1e-6?0:t}function J(t,e){var a,i,r=document.documentElement,n=e.getBoundingClientRect(),o=n.top+(window.pageYOffset||r.scrollTop)-(r.clientTop||0),s=n.left+(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0);return void 0==t.pageX?(a=Math.max(t.x,t.clientX-s),i=t.y):(a=t.pageX-s,i=t.pageY-o),[a,i]}var tt=(t("./ColorUtils"),t("../Constants")),et={color:"fill",font:"font",fontFamily:"font-family",fontSize:"font-size",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",letterSpacing:"letter-spacing",lineHeight:"line-height",quotes:"quotes",textAlign:"text-align",textDecoration:"text-decoration",textIndent:"text-indent",textShadow:"text-shadow",textTransform:"text-transform",whiteSpace:"white-space",wordSpacing:"word-spacing",padding:"padding"};return{getMousePos:J,makeTranslate:Z,inherit:e,clone:h,date2int:X,int2date:q,object2date:Y,log:F,accAdd:U,accDiv:z,dealFloatPrecision:$,isEmpty:S,isEmptyBounds:V,objectToArray:W,pick:a,isNull:P,getTextDimension:n,getTextHeight:o,splitText:s,getTextDimensionWithRotation:l,isArray:i,indexInArray:N,clone:h,cssNormalization:c,reformCssArray:d,rectSubPixelOpt:g,lineSubPixelOpt:u,addArray:f,toFront:p,toBack:m,toFrontOfAll:v,toBackOfAll:y,containsRect:_,rectangleOverlapped:b,outsideRect:x,containsPoint:L,isSupportSVG:C,setTextStyle:r,makeValueInRange:T,getValueInDomain:A,toRadian:k,toDegree:R,getFormatterFunction:O,showLightBox:w,hideLightBox:D,isIE:E,removeAllBlank:M,hasNotDefined:I,hasDefined:B,distance:H,makeBounds:G,isImageMarker:j,addEvent:Q,removeEvent:K}}),a("ChartLibrary",[],function(){function t(t){return a[t]}function e(t,e){a[t]=e}var a={};return{get:t,register:e}}),a("utils/QueryUtils",["require","./BaseUtils"],function(t){function e(t,e){if(t&&e){e=e.split(".");for(var a=0,i=e.length;i>a;a++)if(t=t[e[a]],void 0==t)return;return t}}function a(t,a){if(!t||!t.length||!a)return void 0;for(var i=0;i<t.length;i++){var r=e(t[i],a);if(void 0!=r)return r}}function i(t,e,a){for(var r in e)if(e.hasOwnProperty(r)){var n=t[r];"object"==typeof n?i(t[r],e[r],a):!a&&r in t||(t[r]=e[r])}return t}function r(t,a){if(!t||!t.length||!a)return void 0;for(var r,o=0,s=t.length;s>o;o++){var l=e(t[o],a);void 0==r?r=n.clone(l):i(r,l)}return r}var n=t("./BaseUtils");return{mergeList:r,queryList:a,query:e,merge:i}}),a("ComponentLibrary",[],function(){function t(t){return a[t]}function e(t,e){a[t]=e}var a=Object.create(null);return{get:t,register:e}}),a("render/RenderLibrary",[],function(){function t(t){return i[t]}function e(e,a){var i=t(e);return i?new i(a):void 0}function a(t,e){i[t]=e}var i=Object.create(null);return{get:t,getRender:e,register:a}}),a("render/RenderFactory",["require","./RenderLibrary","../Constants","../utils/BaseUtils"],function(t){function e(t,e){var i=r.isSupportSVG()?n[t]:o[t];return a.getRender(i,e)}var a=t("./RenderLibrary"),i=t("../Constants"),r=t("../utils/BaseUtils"),n={};n[i.VANCHART]=i.VANCHART_SVG,n[i.PIE_CHART]=i.PIE_SVG,n[i.BAR_CHART]=i.BAR_SVG,n[i.COLUMN_CHART]=i.BAR_SVG,n[i.LINE_CHART]=i.LINE_SVG,n[i.AREA_CHART]=i.AREA_SVG,n[i.GAUGE_CHART]=i.GAUGE_SVG,n[i.RADAR_CHART]=i.RADAR_SVG,n[i.TITLE_COMPONENT]=i.TITLE_SVG,n[i.LEGEND_COMPONENT]=i.LEGEND_SVG,n[i.TOOLBAR_COMPONENT]=i.TOOLBAR_SVG,n[i.X_AXIS_COMPONENT]=i.AXIS_RENDER,n[i.Y_AXIS_COMPONENT]=i.AXIS_RENDER,n[i.CATEGORY_AXIS_COMPONENT]=i.CATEGORY_AXIS_SVG,n[i.VALUE_AXIS_COMPONENT]=i.VALUE_AXIS_SVG,n[i.DATE_AXIS_COMPONENT]=i.DATE_AXIS_SVG,n[i.ZOOM_COMPONENT]=i.ZOOM_SVG,n[i.DATA_SHEET_COMPONENT]=i.DATA_SHEET_SVG;var o={};return o[i.VANCHART]=i.VANCHART_VML,o[i.PIE_CHART]=i.PIE_VML,o[i.BAR_CHART]=i.BAR_VML,o[i.COLUMN_CHART]=i.BAR_VML,o[i.LINE_CHART]=i.LINE_VML,o[i.AREA_CHART]=i.AREA_VML,o[i.GAUGE_CHART]=i.GAUGE_VML,o[i.RADAR_CHART]=i.RADAR_VML,o[i.TITLE_COMPONENT]=i.TITLE_VML,o[i.LEGEND_COMPONENT]=i.LEGEND_VML,o[i.TOOLBAR_COMPONENT]=i.TOOLBAR_VML,o[i.X_AXIS_COMPONENT]=i.AXIS_RENDER,o[i.Y_AXIS_COMPONENT]=i.AXIS_RENDER,o[i.CATEGORY_AXIS_COMPONENT]=i.CATEGORY_AXIS_VML,o[i.VALUE_AXIS_COMPONENT]=i.VALUE_AXIS_VML,o[i.DATE_AXIS_COMPONENT]=i.DATE_AXIS_VML,o[i.DATA_SHEET_COMPONENT]=i.DATA_SHEET_VML,{getRender:e}}),a("utils/Formatter",[],function(){function t(t,e){return window.FR&&FR.contentFormat?FR.contentFormat(t,e):t+""}return{format:t}}),a("render/LegendIconFactory",["require","../Constants"],function(t){function e(t){return n[t]}function a(t){return o[t]}function i(t){return n[t]}var r=t("../Constants"),n={},o={};return n[r.PIE_ICON]="M15.795,7.943L7.909,12.5L0.205,8.052C1.756,5.333,4.68,3.5,8.032,3.5C11.338,3.5,14.23,5.287,15.795,7.943z",o[r.PIE_ICON]={width:16,height:16},n[r.DONUT_ICON]="M8.945,11.107c1.671,0,3.181,0.684,4.269,1.786l4.271-4.271c-4.686-4.686-12.284-4.686-16.971,0l4.216,4.216C5.815,11.768,7.302,11.107,8.945,11.107z",o[r.DONUT_ICON]={width:18,height:18},n[r.NORMAL_ICON]="M0,0L12,0L12,12L0,12Z",o[r.NORMAL_ICON]={width:12,height:12},n[r.NULL_MARKER]="M1,8L1,8c0-0.552,0.448-1,1-1h12c0.552,0,1,0.448,1,1v0c0,0.552-0.448,1-1,1H2C1.448,9,1,8.552,1,8z",o[r.NULL_MARKER]={width:16,height:16},n[r.CIRCLE]="M11,8c0,1.657-1.343,3-3,3S5,9.657,5,8s1.343-3,3-3S11,6.343,11,8z M14,7h-2.142C11.942,7.322,12,7.653,12,8s-0.058,0.678-0.142,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M4,8c0-0.347,0.058-0.678,0.142-1H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.142C4.058,8.678,4,8.347,4,8z",o[r.CIRCLE]={width:16,height:16},n[r.SQUARE]="M11,11H5V5h6V11z M14,7h-2v2h2c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M4,7H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2V7z",o[r.SQUARE]={width:16,height:16},n[r.DIAMOND]="M8,11L5,8l3-3l3,3L8,11z M14,7h-2.586l1,1l-1,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M3.586,8l1-1H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.586L3.586,8z",o[r.DIAMOND]={width:16,height:16},n[r.TRIANGLE]="M5,10l3-5.196L11,10H5z M14,7h-3.577l1.155,2H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M5.577,7H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.423L5.577,7z",o[r.TRIANGLE]={width:16,height:16},n[r.CIRCLE_HOLLOW]="M4.142,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2.142C4.058,7.322,4,7.653,4,8S4.058,8.678,4.142,9zM14,7h-2.142C11.942,7.322,12,7.653,12,8s-0.058,0.678-0.142,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M8,7C7.449,7,7,7.449,7,8s0.449,1,1,1s1-0.449,1-1S8.551,7,8,7 M8,5c1.657,0,3,1.343,3,3s-1.343,3-3,3S5,9.657,5,8S6.343,5,8,5L8,5z",o[r.CIRCLE_HOLLOW]={width:16,height:16},n[r.SQUARE_HOLLOW]="M4,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2V9z M14,7h-2v2h2c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M9,7H7v2h2V7 M11,5v6H5V5H11L11,5z",o[r.SQUARE_HOLLOW]={width:16,height:16},n[r.DIAMOND_HOLLOW]="M4.157,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2.157l-1,1L4.157,9z M14,7h-2.157l1,1l-1,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M8,5.986L5.986,8L8,10.014L10.014,8L8,5.986 M8,4.571L11.429,8L8,11.429L4.571,8L8,4.571L8,4.571z",o[r.DIAMOND_HOLLOW]={width:16,height:16},n[r.TRIANGLE_HOLLOW]="M4.5,9H2C1.448,9,1,8.552,1,8s0.448-1,1-1h3.655L4.5,9z M14,7h-3.655L11.5,9H14c0.552,0,1-0.448,1-1S14.552,7,14,7z M8,6.938L6.232,10h3.536L8,6.938 M8,4.938L11.5,11h-7L8,4.938L8,4.938z",o[r.TRIANGLE_HOLLOW]={width:16,height:16},{getLegendIconPath:e,getLegendIconSize:a,hasIcon:i}}),a("component/Base",["require","../utils/BaseUtils","../Constants","../render/RenderFactory","../utils/Formatter","../utils/QueryUtils","../utils/Formatter","../render/LegendIconFactory"],function(t){function e(t,e,a){this.vanchart=t,this.option=e,this.componentType=a,this.componentOption=e[a],this.render=r.getRender(this.type||a,this),this.isFloat=!1,this._needLayout=!0,this._floatX=0,this._floatY=0,this.bounds={x:0,y:0,width:0,height:0}}var a=t("../utils/BaseUtils"),i=t("../Constants"),r=t("../render/RenderFactory"),n=t("../utils/Formatter"),o=t("../utils/QueryUtils"),s=t("../utils/Formatter"),l=t("../render/LegendIconFactory"),h="CATEGORY",c="SERIES",d="VALUE",u="PERCENT",g="class",f=2,p=4.5;return e.prototype={constructor:e,refresh:function(t,e){this._refreshOption(t,e),this._doLayout(),this.option.increateOrderred?this.orderDataIncrease():this.option.decreaseOrderred&&this.orderDataDecrease()},remove:function(){},_refreshOption:function(t,e){t&&(this.option=t,this.componentOption=e?e:t[this.componentType],this._refreshFloatPosition())},_refreshFloatPosition:function(){var t=this.componentOption;t&&(this.isFloat=t.floating,this._floatX=this._getPercentValue(t.x,this.vanchart.chartWidth()),this._floatY=this._getPercentValue(t.y,this.vanchart.chartHeight()))},_getDefaultSeriesColor:function(t){var e=this.option.colors;return e[t%e.length]},_getLegendType:function(t){var e=this.option,a=e.series[t],r=this.option.plotOptions,n=a.type||e.chartType,s=a.marker||r.marker;if(n==i.PIE_CHART)return a.innerRadius||r.innerRadius&&parseFloat(r.innerRadius)>0?i.DONUT_ICON:i.PIE_ICON;if(n==i.RADAR_CHART){var l=o.queryList([a,this.option.plotOptions],"columnType");return l?i.NORMAL_ICON:this._getLegendTypeFromMarker(s,n)}return this._getLegendTypeFromMarker(s,n)},_getLegendTypeFromMarker:function(t,e){return t&&l.hasIcon(t.symbol)?t.symbol:this._isLineTypeSeries(e)?i.NULL_MARKER:i.NORMAL_ICON},_isLineTypeSeries:function(t){return t==i.LINE_CHART||t==i.AREA_CHART||t==i.RADAR_CHART},_doLayout:function(){},orderDataIncrease:function(){},orderDataDecrease:function(){},updateStatus:function(){},_getPercentValue:function(t,e){return t?(t+="",-1!=t.indexOf("%")&&(t=parseFloat(t)*e/100),parseFloat(t)):0},_setComponentBounds:function(t,e){this.isFloat?this._updateFloatBounds(t,e):this._updateComponentBounds(t,e)},_updateFloatBounds:function(t,e){e=Math.ceil(e);var a=this.vanchart.getPlotBounds(),r=this._floatX,n=this._floatY,o=a.x+a.width-r,s=a.y+a.height-n;switch(t){case i.TOP:this.bounds={x:r,y:n,width:o,height:e};break;case i.BOTTOM:this.bounds={x:r,y:n,width:o,height:e};break;case i.LEFT:this.bounds={x:r,y:n,width:e,height:s};break;case i.RIGHT_TOP:case i.RIGHT:this.bounds={x:r,y:n,width:e,height:s}}},_updateComponentBounds:function(t,e){e=Math.ceil(e);var a=this.vanchart.getPlotBounds(),r=a.x,n=a.y,o=a.width,s=a.height;switch(t){case i.TOP:this.bounds={x:r,y:n,width:o,height:e},a={x:r,y:n+e,width:o,height:s-e};break;case i.BOTTOM:this.bounds={x:r,y:n+s-e,width:o,height:e},a={x:r,y:n,width:o,height:s-e};break;case i.LEFT:this.bounds={x:r,y:n,width:e,height:s},a={x:r+e,y:n,width:o-e,height:s};break;case i.RIGHT_TOP:case i.RIGHT:this.bounds={x:r+o-e,y:n,width:e,height:s},a={x:r,y:n,width:o-e,height:s}}this.vanchart.setPlotBounds(a)},_getPieValueFromData:function(t,e){var i=this.option.plotOptions.categories||[];return a.isArray(t)?t:isNaN(+t)?[t.x,t.y]:[i[e],t]},_getBackgroundColor:function(){var t=this.option,e="string"==typeof t.plotBackgroundColor,a="string"==typeof t.backgroundColor;return e?t.plotBackgroundColor:a?t.backgroundColor:"white"},_getSeriesType:function(t){return this.option.series[t].type||this.option.chartType},getPosition:function(){return this.componentOption.position},isHorizontal:function(){return this.componentOption.position==i.TOP||this.componentOption.position==i.BOTTOM},getMousePos:function(t){var e=this.vanchart.getParentDom();return a.getMousePos(t,e)},onContainerClick:function(){},onContainerMouseDown:function(){},onContainerMouseUp:function(){},onContainerMouseLeave:function(){},onContainerMouseEnter:function(){},onContainerMouseMove:function(){},getSeriesID:function(t){return g+a.removeAllBlank(encodeURI(t))},getDataID:function(t,e){return g+a.removeAllBlank(encodeURI(t+e))},_maxHeight:function(){var t=this.vanchart.chartHeight();return this.componentOption.maxHeight?this._getPercentValue(this.componentOption.maxHeight,t):t},_maxWidth:function(){var t=this.vanchart.chartWidth();return this.componentOption.maxWidth?this._getPercentValue(this.componentOption.maxWidth,t):t},_mergeTooltipAttributes:function(t){for(var e=this.option.series,i=this.option.plotOptions,r=0,n=t.length;n>r;r++){var s=t[r];s.points=t;var l=e[s.seriesIndex],h=o.queryList([s.data,l,i],"tooltip");if(h=a.clone(h),h&&h.enabled){var c=this._calculateTooltipContent(h,s,t);h.tooltipText=c,s.tooltip=h}}},_margetTooltipWithCategory:function(t){this._mergeTooltipAttributes(t)},_calculateTooltipContent:function(t,e,i){var r=t.formatter;if(!r)return"";if("object"==typeof r){var n=t.style,o=r.identifier,s=this,l="";return t.shared?(l+=this._createCategoryLine(e,o,n),i.forEach(function(t){l+='<span style="font-size:12px; color: '+t.color+'">&#9679  </span>',l+=s._createSeriesLine(t,o,n,r),l+="<br />"})):(l+=this._createCategoryLine(e,o,n),l+=s._createSeriesLine(e,o,n,r)),l}return a.getFormatterFunction(r).call(e)},_createCategoryLine:function(t,e,a){var i="";return-1!=e.indexOf(h)&&(i+=a?"<span>"+t.category+"</span>":'<span style="font-size:16px;font-family:Verdana;color:white;">'+t.category+"</span>",i+="<br />"),i},_createSeriesLine:function(t,e,i,r){var o="",s=n.format(t.value,r.valueFormat||"#.##"),l=n.format(t.percentage,r.percentFormat,"#.##%");return-1==e.indexOf(c)||a.isEmpty(t.seriesName)||(o+=i?"<span >"+t.seriesName+":</span>":'<span style="font-size:14px;font-family:Verdana;color:white">'+t.seriesName+":</span>"),
    -1!=e.indexOf(d)&&-1!=e.indexOf(u)?o+=i?"<span>"+s+"  "+l+"</span>":'<span style="font-size:14px;font-family:Verdana;font-weight:bold;color:white">'+s+"  "+l+"</span>":-1!=e.indexOf(d)?o+=i?"<span>"+s+"</span>":'<span style="font-size:14px;font-family:Verdana;font-weight:bold;color:white">'+s+"</span>":-1!=e.indexOf(u)&&(o+=i?"<span>"+l+"</span>":'<span style="font-size:14px;font-family:Verdana;font-weight:bold;color:white">'+l+"</span>"),o},getCategorySeriesStyle:function(t){if(t&&t.dataLabels&&t.dataLabels.style)return t.dataLabels.style;var e=t.columnType?i.INSIDE:t.dataLabels.align||i.OUTSIDE;return{color:e==i.OUTSIDE?t.color:"#ffffff",fontSize:"12px",fontFamily:"Verdana",fontWeight:"bold"}},getValuePercentageStyle:function(t){if(t&&t.dataLabels&&t.dataLabels.style)return t.dataLabels.style;var e=t.columnType?i.INSIDE:t.dataLabels.align||i.OUTSIDE;return{fontSize:"12px",fontFamily:"Verdana",textShadow:"1px 1px 1px rgba(0,0,0,0.15)",color:e==i.OUTSIDE?t.color:"#ffffff"}},_calculateLabelContent:function(t,e,i,r){var o=t.dataLabels||{},s=e||o.formatter;if(r=a.pick(r,o.useHtml),!s)return[];var l=[];if("object"==typeof s){var g=s.identifier;if(-1!=g.indexOf(h)||-1!=g.indexOf(c)){var f;f=-1!=g.indexOf(h)&&-1!=g.indexOf(c)?t.category+" "+t.seriesName:-1!=g.indexOf(h)?t.category:t.seriesName;var p=i||this.getCategorySeriesStyle(t),m=a.getTextDimension(f,p,r);l.push({text:f,style:p,dim:m})}if(-1!=g.indexOf(d)||-1!=g.indexOf(u)){var v=n.format(t.value,s.valueFormat||"#.##"),y=n.format(t.percentage,s.percentFormat,"#.##%"),f="";f=-1!=g.indexOf(d)&&-1!=g.indexOf(u)?v+" "+y:-1!=g.indexOf(d)?v:y;var p=i||this.getValuePercentageStyle(t),m=a.getTextDimension(f,p,r);l.push({text:f,style:p,dim:m})}}else{var f=a.getFormatterFunction(s).call(t),p=i||this.getValuePercentageStyle(t),m=a.getTextDimension(f,p,r);l.push({text:f,style:p,dim:m})}return l},_calculateSingleLineLabelContent:function(t,e){if(!t)return"";if("object"==typeof t){var i="",r=t.identifier;if((-1!=r.indexOf(h)||-1!=r.indexOf(c))&&(i+=-1!=r.indexOf(h)&&-1!=r.indexOf(c)?e.category+" "+e.seriesName:-1!=r.indexOf(h)?e.category:e.seriesName),-1!=r.indexOf(d)||-1!=r.indexOf(u)){a.isEmpty(i)||(i+=":");var o=n.format(e.value,t.valueFormat||"#.##"),s=n.format(e.percentage,t.percentFormat,"#.##%");i+=-1!=r.indexOf(d)&&-1!=r.indexOf(u)?o+" "+s:-1!=r.indexOf(d)?o:s}return i}return a.getFormatterFunction(t).call(e)},_createMultiLineLabelContent:function(t,e){if(!t)return[];if("object"==typeof t){var i=[],r=t.identifier;if(-1!=r.indexOf(h)&&i.push(e.category),-1!=r.indexOf(c)&&i.push(e.seriesName),-1!=r.indexOf(d)){var o=n.format(e.value,t.valueFormat||"#.##");i.push(o)}if(-1!=r.indexOf(u)){var s=n.format(e.percentage,t.percentFormat,"#.##%");i.push(s)}return i}return[a.getFormatterFunction(t).call(e)]},_getTickContent:function(t,e){return e?"object"==typeof e?s.format(t,e.format):a.getFormatterFunction(e).call(t):t},_calculateTextDim:function(t){var e=0,a=0;if(t&&t.length){for(var i=0,r=t.length;r>i;i++){var n=t[i].dim;e=Math.max(e,n.width),a+=n.height}a+=(r-1)*f}return{width:e,height:a}},_getSeryLocation:function(t){var e=t.type||this.option.chartType,r=this.option.xAxis,n=this.option.yAxis;return r=a.isArray(r)?r[t.xAxis||0]:r,n=a.isArray(n)?n[t.yAxis||0]:n,r?r.type==i.CATEGORY_AXIS_COMPONENT?r.position:n.type==i.CATEGORY_AXIS_COMPONENT?n.position:e==i.BAR_CHART?n.position:r.position:i.BOTTOM},_getAxisPair:function(t){var e=this._getSeryLocation(t),a=e==i.LEFT||e==i.RIGHT,r=a?this.vanchart.yAxis(t.yAxis):this.vanchart.xAxis(t.xAxis),n=a?this.vanchart.xAxis(t.xAxis):this.vanchart.yAxis(t.yAxis);return{baseAxis:r,valueAxis:n}},_getSeryByName:function(t){for(var e=this.option.series,a=0,i=e.length;i>a;a++)if(e[a].name==t)return e[a]},getLabelGap:function(){return f},getDefaultMarkerRadius:function(){return p},getPlotBounds:function(){return this.vanchart.getPlotBounds()},getChartBounds:function(){return this.vanchart.getChartBounds()},getVanchartRender:function(){return this.vanchart.getRender()},getRender:function(){return this.render},getParentDom:function(){return this.vanchart.getParentDom()},getTooltipComponent:function(){return this.vanchart.components.tooltip},_getColorFromBands:function(t,e){if(e&&e.length)for(var a=0,i=e.length;i>a;a++){var r=e[a],n=Math.min(r.from,r.to),o=Math.max(r.from,r.to);if(t>=n&&o>=t)return r.color}}},e}),a("utils/BezierEasing",[],function(){function t(t,e){return 1-3*e+3*t}function e(t,e){return 3*e-6*t}function a(t){return 3*t}function i(i,r,n){return((t(r,n)*i+e(r,n))*i+a(r))*i}function r(i,r,n){return 3*t(r,n)*i*i+2*e(r,n)*i+a(r)}function n(t,e,a,r,n){var o,s,l=0;do s=e+(a-e)/2,o=i(s,r,n)-t,o>0?a=s:e=s;while(Math.abs(o)>c&&++l<d);return s}function o(t,e,a,o){function s(e,n){for(var o=0;l>o;++o){var s=r(n,t,a);if(0===s)return n;var h=i(n,t,a)-e;n-=h/s}return n}function c(){for(var e=0;u>e;++e)v[e]=i(e*g,t,a)}function d(e){for(var i=0,o=1,l=u-1;o!=l&&v[o]<=e;++o)i+=g;--o;var c=(e-v[o])/(v[o+1]-v[o]),d=i+c*g,f=r(d,t,a);return f>=h?s(e,d):0===f?d:n(e,i,i+g,t,a)}function p(){y=!0,(t!=e||a!=o)&&c()}if(4!==arguments.length)throw new Error("BezierEasing requires 4 arguments.");for(var m=0;4>m;++m)if("number"!=typeof arguments[m]||isNaN(arguments[m])||!isFinite(arguments[m]))throw new Error("BezierEasing arguments should be integers.");if(0>t||t>1||0>a||a>1)throw new Error("BezierEasing x values must be in [0, 1] range.");var v=f?new Float32Array(u):new Array(u),y=!1,_=function(r){return y||p(),t===e&&a===o?r:0===r?0:1===r?1:i(d(r),e,o)};_.getControlPoints=function(){return[{x:t,y:e},{x:a,y:o}]};var b=[t,e,a,o],x="BezierEasing("+b+")";return _.toString=function(){return x},_}var s=this,l=4,h=.001,c=1e-7,d=10,u=11,g=1/(u-1),f="Float32Array"in s;return o.css={ease:o(.25,.1,.25,1),linear:o(0,0,1,1),"ease-in":o(.42,0,1,1),"ease-out":o(0,0,.58,1),"ease-in-out":o(.42,0,.58,1),swing:o(.02,.01,.47,1),"ease-in-quart":o(.895,.03,.685,.22),"ease-out-back":o(.175,.885,.32,1.275)},o}),a("utils/LabelDivManager",["require","./BaseUtils","./ColorUtils","./BezierEasing"],function(t){function e(t){this.dom=t,this.labelList={}}var a=t("./BaseUtils"),i=t("./ColorUtils"),r=t("./BezierEasing"),n="div-label-key";return e.prototype={constructor:e,addLabel:function(t,e,r,o){o=o||n,this.labelList[o]||(this.labelList[o]=[]);var s=this.labelList[o],l=document.createElement("div");l.innerHTML=t,l.style.position="absolute",l.style.left=e.x+"px",l.style.top=e.y+"px";for(var h in r)"color"!=h||a.isSupportSVG()?l.style[h]=r[h]:l.style.color=i.colorToHex(r.color);return this.dom.appendChild(l),s.push(l),l},addLabelWidthBounds:function(t,e,a,i){var r=this.addLabel(t,e,a,i);return r.style.width=e.width+"px",r.style.height=e.height+"px",r},clearLabels:function(t){t=t||n;for(var e=this.labelList[t]||[],a=0,i=e.length;i>a;a++)this.dom.removeChild(e[a]);this.labelList[t]=[]},clearAllLabels:function(){for(var t in this.labelList)this.clearLabels(t)},translateLabelsHorizontal:function(t,e){e=e||n;for(var i=this.labelList[e]||[],o=0,s=i.length;s>o;o++){var l=i[o],h=parseFloat(l.style.left);h+=t,a.isSupportSVG()?d3.select(l).transition().ease(r.css.swing).duration(300).style("left",h+"px"):l.style.left=h+"px"}}},e}),a("render/BaseRender",["require","../utils/BaseUtils","../utils/LabelDivManager","../utils/ColorUtils","../Constants"],function(t){function e(t){this.component=t,t&&t.getParentDom&&(this.labelDivManager=new i(t.getParentDom())),this.drawLabelTimeOut={}}var a=t("../utils/BaseUtils"),i=t("../utils/LabelDivManager"),r=t("../utils/ColorUtils"),n=t("../Constants"),o="markerG",s="markerPath",l="markerStrokePath",h=2;return e.prototype={constructor:e,render:function(){},dataAddRender:function(){this.dataChangeRender()},dataDeleteRender:function(){this.dataChangeRender()},dataChangeRender:function(){this.render()},monitorRender:function(){},zoomRefresh:function(){},refreshIncreaseOrder:function(){},refreshDecreaseOrder:function(){},refreshInOrder:function(){},refreshRestore:function(){this.dataChangeRender()},_createDropShadowFilter:function(t,e,a,i,r,n){var o=t.append("filter").attr("id",e).attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");o.append("feOffset").attr("in","SourceAlpha").attr("dx",a).attr("dy",i).attr("result","offOut"),o.append("feColorMatrix").attr("in","offOut").attr("type","matrix").attr("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+r+" 0").attr("result","matrixOut"),o.append("feGaussianBlur").attr("in","matrixOut").attr("stdDeviation",n).attr("result","blurOut"),o.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal")},_createInnerShadowFilter:function(t,e,a,i,r,n){var o=t.append("filter").attr("id",e).attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");o.append("feComponentTransfer").attr("in","SourceAlpha").append("feFuncA").attr("type","table").attr("tableValues","1 0"),o.append("feGaussianBlur").attr("stdDeviation",n),o.append("feOffset").attr("dx",a).attr("dy",i).attr("result","offsetblur"),o.append("feFlood").attr("flood-color","black").attr("flood-opacity",r).attr("result","color"),o.append("feComposite").attr("in2","offsetblur").attr("operator","in"),o.append("feComposite").attr("in2","SourceAlpha").attr("operator","in");var s=o.append("feMerge");s.append("feMergeNode").attr("in","SourceGraphic"),s.append("feMergeNode")},_createVmlMarker:function(t,e,i){var r=this.component.getPlotBounds(),o=this.component.getDefaultMarkerRadius(),s=e.marker.radius;if(a.hasDefined(s)&&h>s)return{};if(s=s||o,a.outsideRect(r,a.makeBounds(i,[s,s])))return{};var l,c=e.marker.symbol,d=c==n.NULL_MARKER,u=this.component._getBackgroundColor(),g=this._isHollowMarker(c)?s-1:s,f=t.path(this._getMarkerPath(c,g)).attr({fill:this._isHollowMarker(c)||d?u:e.marker.fillColor,"fill-opacity":d?0:1,stroke:e.marker.fillColor,"stroke-width":this._isHollowMarker(c)?2:0}).transform(a.makeTranslate(i));return this.component.type==n.LINE_CHART&&(l=t.path(this._getMarkerPath(c,s+1)).attr({"stroke-width":d?0:2,stroke:u,fill:"none"}).transform(a.makeTranslate(i))),this.addShapeEventHandler(f,e),{marker:f,strokeMarker:l}},_getMarkerGroupClass:function(t){return t.dataID+" "+o},_createSvgMarker:function(t){var e=this,i=this.component.getDefaultMarkerRadius(),r=this.component._getBackgroundColor();t.enter().append("g").attr("class",function(t){return e._getMarkerGroupClass(t)}).filter(function(t){var e=t.marker.radius;return a.hasNotDefined(e)||e>=h}).each(function(t){if(!t.isNull){var o=d3.select(this),h=t.marker.symbol,c=h==n.NULL_MARKER;a.isImageMarker(h)?e._createImageMarker(h,function(e,a){var e=t.marker.width||e,a=t.marker.height||a;t.marker.width=e,t.marker.height=a,o.append("image").attr("preserveAspectRatio","none").attr("xlink:href",h).attr("x",-e/2).attr("y",-a/2).attr("width",e).attr("height",a)}):(o.append("path").attr("class",s).attr("d",function(t){var a=t.marker.radius||i;return e._isHollowMarker(h)&&(a-=1),e._getMarkerPath(h,a)}).style("fill",function(t){return e._isHollowMarker(h)?r:t.marker.fillColor}).style("fill-opacity",c?0:1).style("stroke",function(t){return t.marker.fillColor}).style("stroke-width",function(){return e._isHollowMarker(h)?2:0}),e.component.type==n.LINE_CHART&&o.append("path").attr("class",l).attr("d",function(t){var a=t.marker.radius||i;return e._getMarkerPath(h,a+1)}).style("stroke-width",c?0:2).style("stroke",r).style("fill","none")),o.on("click",function(){var e=d3.event;t.click(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),o.on("mousemove",function(){t.mouseMove(d3.event),e._updateChosenSeries(t)}),t.elWrapper=o}})},_createImageMarker:function(t,e){var a=new Image;a.onload=function(){e(this.width,this.height)},a.src=t},_getMarkerClass:function(){return o},_makeVmlMarkerChosenState:function(t){var e=t.marker.symbol,a=t.marker.radius||this.component.getDefaultMarkerRadius(),i=this._isHollowMarker(e)?a-1:a,r=this.component._getBackgroundColor(),n=this.getElementByData(t);if(n&&n.marker){var o=n.marker,s=n.strokeMarker;o.attr({path:this._getMarkerPath(e,i+2),fill:this._isHollowMarker(e)?r:t.marker.fillColor,"fill-opacity":1}),s&&s.attr({path:this._getMarkerPath(e,a+3)})}},_cancelVmlMarkerChosenState:function(t){var e=t.marker.symbol,a=e==n.NULL_MARKER,i=t.marker.radius||this.component.getDefaultMarkerRadius(),r=this._isHollowMarker(e)?i-1:i,o=this.component._getBackgroundColor(),s=this.getElementByData(t);if(s&&s.marker){var l=s.marker,h=s.strokeMarker;l.attr({path:this._getMarkerPath(e,r),fill:this._isHollowMarker(e)||a?o:t.marker.fillColor,"fill-opacity":a?0:1}),h&&h.attr({path:this._getMarkerPath(e,i+1),"stroke-width":a?0:2})}},_makeMarkerChosenState:function(t,e){var a=e.marker.symbol,i=e.marker.radius||this.component.getDefaultMarkerRadius(),r=i,n=this.component._getBackgroundColor(),o=this;this._isHollowMarker(a)&&(r-=1);var h=e.elWrapper;if(h){h.select("path."+s).attr("d",function(){return o._getMarkerPath(a,r+2)}).style("fill",this._isHollowMarker(a)?n:e.marker.fillColor).style("fill-opacity",1),h.select("path."+l).attr("d",function(){return o._getMarkerPath(a,i+3)}).style("stroke-width",2);var c=h.select("image");if(!c.empty()){var d=e.marker.width+4,u=e.marker.height+4;c.attr("x",-d/2).attr("y",-u/2).attr("width",d).attr("height",u)}}},_cancelMarkerChosenState:function(t,e){var a=this.component._getBackgroundColor(),i=e.marker.symbol,r=i==n.NULL_MARKER,o=e.marker.radius||this.component.getDefaultMarkerRadius(),h=this,c=o;this._isHollowMarker(i)&&(c-=1);var d=e.elWrapper;if(d){d.select("path."+s).attr("d",function(){return h._getMarkerPath(i,c)}).style("fill",function(){return h._isHollowMarker(i)?a:e.marker.fillColor}).style("fill-opacity",r?0:1),d.select("path."+l).attr("d",function(){return h._getMarkerPath(i,o+1)}).style("stroke-width",r?0:2);var u=d.select("image");if(!u.empty()){var g=e.marker.width,f=e.marker.height;u.attr("x",-g/2).attr("y",-f/2).attr("width",g).attr("height",f)}}},_renderDivLabels:function(t,e,i,r){for(var o=this.component.getPlotBounds(),s=this.component.componentType==n.PIE_CHART,l=0,h=t.length;h>l;l++){var c=t[l];if(c.dataLabels&&c.dataLabels.enabled&&c.dataLabels.useHtml&&c.labelPos&&c.labelContent.length)for(var d=c.labelPos.x+e,u=c.labelPos.y+i,g=c.labelContent,f=0,p=g.length;p>f;f++){var m=g[f],v=m.dim,y={x:d,y:u};if(!a.outsideRect(o,a.makeBounds(y,v))){var _=this.labelDivManager.addLabel(m.text,y,m.style,r);s&&this._addDomLabelEventHandler(_,c)}u+=v.height+this.component.getLabelGap()}}},_removeSvgDataLabels:function(t,e){t.selectAll("text").remove(),t.selectAll("path").remove(),this.labelDivManager.clearLabels(e)},_drawSvgDataLabels:function(t,e,i,r,o,s){o=o||0,s=s||"default-label-key",clearTimeout(this.drawLabelTimeOut[s]);var l=this;this._removeSvgDataLabels(t,s),this.drawLabelTimeOut[s]=setTimeout(function(){t.style("opacity",0).selectAll("text").data(e).enter().append("text").filter(function(t){return t.labelPos&&t.dataLabels&&t.dataLabels.enabled&&!t.dataLabels.useHtml}).each(function(t){for(var e=t.labelContent,i=t.labelPos.x+t.labelDim.width/2,r=t.labelPos.y,n=0,o=e.length;o>n;n++){var s=e[n],h=s.dim,c=s.text,d=s.style;d3.select(this).append("tspan").attr("x",i).attr("y",r+h.height/2).attr("dy",".32em").attr("text-anchor","middle").text(c).call(a.setTextStyle,d),r+=h.height+l.component.getLabelGap()}}),t.transition("linear").duration(400).style("opacity",1),l._renderDivLabels(e,i,r,s),l.component.componentType==n.PIE_CHART&&(l._addLabelEventHandler(t.selectAll("text")),t.selectAll("path").data(e).enter().append("path").filter(function(t){return t.labelPos&&t.dataLabels&&t.dataLabels.enabled&&t.dataLabels.align==n.OUTSIDE}).attr("d",function(t){var e=t.labelPos.startPos,a=t.labelPos.midPos,i=t.labelPos.endPos;return"M"+e.x+","+e.y+"L"+a.x+","+a.y+"L"+i.x+","+i.y}).style("fill","none").style("stroke",function(t){return t.dataLabels.connectorColor||t.color}).style("stroke-width",function(t){return t.dataLabels.connectorWidth||0}))},o)},_drawTitleWithHtml:function(t,e,i){var r=a.clone(t.style),n=this.component.getPadding();r.textAlign=t.align||"left";var o={x:e.x+n,y:e.y+n,width:e.width-2*n-i,height:e.height-2*n};this.labelDivManager.addLabelWidthBounds(t.text,o,r)},_createGradualDefs:function(t,e,a){if(e&&"object"==typeof e){var i=t.append("defs").append("linearGradient").attr("id",a).attr("x1",e.x1).attr("y1",e.y1).attr("x2",e.x2).attr("y2",e.y2);i.append("stop").attr("offset","0%").style("stop-color",e.startColor),i.append("stop").attr("offset","100%").style("stop-color",e.endColor)}},_getRaphaelFill:function(t){if(t){if("string"==typeof t)return t;var e=0,a=parseFloat(t.x1),i=parseFloat(t.x2);return t.x1==t.x2&&(e=270,a=100*parseFloat(t.y1),i=100*parseFloat(t.y2)),e+"-"+t.startColor+":"+a+"-"+t.endColor+":"+i}return"none"},_drawVmlDataLabels:function(t,e,i,r,o){for(var s=this.component.getPlotBounds(),l=[],h=0,c=i.length;c>h;h++){var d=i[h];if(d.dataLabels&&d.dataLabels.enabled&&d.labelPos){var u={x:d.labelPos.x+r,y:d.labelPos.y+o};a.containsPoint(s,u)&&l.push(d)}}for(var h=0,c=l.length;c>h;h++){for(var d=l[h],g=d.labelContent,f=d.labelPos.x+r,p=d.labelPos.y+o,m=0,v=g.length;v>m;m++){var y=g[m],_=y.dim;this.labelDivManager.addLabel(y.text,{x:f,y:p},y.style,d.category),p+=_.height+this.component.getLabelGap()}if(d.dataLabels.align==n.OUTSIDE&&this.component.componentType==n.PIE_CHART){var b=d.labelPos.startPos,x=d.labelPos.midPos,L=d.labelPos.endPos,C=t.path("M"+a.dealFloatPrecision(b.x)+","+a.dealFloatPrecision(b.y)+"L"+a.dealFloatPrecision(x.x)+","+a.dealFloatPrecision(x.y)+"L"+a.dealFloatPrecision(L.x)+","+a.dealFloatPrecision(L.y)).transform("t"+r+","+o).attr("fill","none").attr("stroke",d.dataLabels.connectorColor||d.color).attr("stroke-width",d.dataLabels.connectorWidth||0);e.push(C)}}},_isHollowMarker:function(t){return-1!=t.indexOf("hollow")&&t!=n.NULL_MARKER},_getMarkerPath:function(t,e){switch(t){case n.NULL_MARKER:case n.CIRCLE:case n.CIRCLE_HOLLOW:return d3.svg.arc().outerRadius(e)({startAngle:0,endAngle:2*Math.PI});case n.SQUARE:case n.SQUARE_HOLLOW:var a=-e+","+-e,i=e+","+-e,r=e+","+e,o=-e+","+e;return"M"+a+"L"+i+"L"+r+"L"+o+"Z";case n.DIAMOND:case n.DIAMOND_HOLLOW:e=2*e/Math.sqrt(2);var s=-e+",0",l="0,"+-e,h=e+",0",c="0,"+e;return"M"+s+"L"+l+"L"+h+"L"+c+"Z";case n.TRIANGLE:case n.TRIANGLE_HOLLOW:var s=-e+","+e/Math.sqrt(3),l="0,"+-(2*Math.sqrt(3)/3)*e,h=e+","+e/Math.sqrt(3);return"M"+s+"L"+l+"L"+h+"Z"}},_getLinePath:function(t,e){return"M"+this._dealWithFloat(t[0])+","+this._dealWithFloat(t[1])+"L"+this._dealWithFloat(e[0])+","+this._dealWithFloat(e[1])},_dealWithFloat:function(t){return Math.abs(t)<1e-6?0:t},_getFillOpacity:function(t){return t&&"string"==typeof t?r.getColorOpacity(t):1},removeDivLabels:function(){this.labelDivManager&&this.labelDivManager.clearAllLabels()},makeChosenState:function(t){},cancelChosenState:function(t){},_addDomLabelEventHandler:function(t,e){e.dataLabels.align==n.INSIDE&&(a.addEvent(t,"mouseenter",e.mouseEnter),a.addEvent(t,"mouseleave",e.mouseLeave),a.addEvent(t,"mousemove",e.mouseMove),a.addEvent(t,"click",e.click))},_addLabelEventHandler:function(t){var e=this;t.each(function(t){e._addDomLabelEventHandler(this,t)})},addShapeEventHandler:function(t,e){var i=this;a.isSupportSVG()?t.each(function(t){t.elWrapper=d3.select(this),i._addSingleShapeEventHandler(t)}):(e.elWrapper=t,this._addSingleShapeEventHandler(e))},removeShapeEventHandler:function(t,e){var i=this;a.isSupportSVG()?t.each(function(t){i._removeSingleShapeEventHandler(t)}):this._removeSingleShapeEventHandler(e)},_removeSingleShapeEventHandler:function(t){if(t.elWrapper){var e=a.isSupportSVG()?t.elWrapper.node():t.elWrapper.node;a.removeEvent(e,"mouseenter",t.mouseEnter),a.removeEvent(e,"mouseleave",t.mouseLeave),a.removeEvent(e,"mousemove",t.mouseMove),a.removeEvent(e,"click",t.click)}},_addSingleShapeEventHandler:function(t){var e=a.isSupportSVG()?t.elWrapper.node():t.elWrapper.node;a.addEvent(e,"mouseenter",t.mouseEnter),a.addEvent(e,"mouseleave",t.mouseLeave),a.addEvent(e,"mousemove",t.mouseMove),a.addEvent(e,"click",t.click)},addEventHandler:function(){},removeEventHandler:function(){},updateEventHandler:function(t){t=t||0,clearTimeout(this.eventHandlerTimeOut);var e=this;this.eventHandlerTimeOut=setTimeout(function(){e.addEventHandler()},t)},getElementByData:function(t){},_updateChosenSeries:function(t){this.component.selectedIndex=t.seriesIndex,this._toTop(t),this.updateTarget()},_toTop:function(){},_makeChosenStateWithData:function(){},_cancelChosenStateWithData:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},updateTarget:function(){this.component.vanchart.setTarget(this.component)}},e}),a("render/TitleSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","../utils/BezierEasing","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.title=t,this.textEndX=0}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/BezierEasing"),o="title-gradual-background";return e.prototype={constructor:e,render:function(){var t=this.title.componentOption,e=this.title.bounds,a=this.title.getVanchartRender().getRenderRoot(),r=this.title.vanchart.getToolbarWidth(),n=this.title.vanchart.getIDPrefix(),s=o+n;if(this._titleG||(this._backgroundG=a.append("g").attr("transform","translate("+e.x+","+e.y+")"),this._titleG=a.append("g").attr("transform","translate("+e.x+","+e.y+")")),t.backgroundColor&&(this._createGradualDefs(this._titleG,t.backgroundColor,s),this._backgroundG.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill",function(){return"string"==typeof t.backgroundColor?t.backgroundColor:"url(#"+s+")"})),t.useHtml)this._drawTitleWithHtml(t,e,r);else{var l,h,c=i.getTextDimension(t.text,t.style,t.useHtml),d=c.height,u=c.height*this.title.getLineGapPercent(),g=this.title.getPadding(),f=e.width-r,p=i.splitText(t.text,t.style,f,g),m=i.getTextDimension(p[0],t.style,t.useHtml).width,v=t.align||"left";switch(v){case"left":l=g,h="start",this.textEndX=m;break;case"center":l=e.width/2-r/2,this.textEndX=l+m/2,h="middle";break;case"right":l=e.width-g-r,this.textEndX=l,h="end"}for(var y=0,_=p.length;_>y;y++)this._titleG.append("text").attr("x",l).attr("y",g+(d+u)*y).attr("dy",".85em").style("text-anchor",h).text(p[y]).call(i.setTextStyle,t.style)}},dataChangeRender:function(){},translateX:function(t){this.labelDivManager.translateLabelsHorizontal(t);var e=this.title.bounds.width-this.textEndX;if(!(e>Math.abs(t))){var a=0>t?-1:1,i=Math.min(e,Math.abs(t))*a,r=d3.transform(this._titleG.attr("transform")).translate,o=r[0]+i;this._titleG.transition().ease(n.css.swing).duration(300).attr("transform","translate("+o+","+r[1]+")")}}},i.inherit(e,a),t("./RenderLibrary").register(r.TITLE_SVG,e),e}),a("render/TitleVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.title=t,this.textEndX=0}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){var t=this.title.componentOption,e=this.title.bounds,a=this.title.vanchart.getToolbarWidth(),r=this.title.getVanchartRender().getRenderRoot();if(this.titleSet=r.set(),t.backgroundColor&&this.titleSet.push(r.rect(e.x,e.y,e.width,e.height).attr({rx:t.borderRadius,ry:t.borderRadius,fill:this._getRaphaelFill(t.backgroundColor),"stroke-width":0}).attr("fill-opacity",this._getFillOpacity(t.backgroundColor))),t.useHtml)this._drawTitleWithHtml(t,e,a);else for(var n=i.getTextDimension(t.text,t.style,t.useHtml),o=n.height,s=n.height*this.title.getLineGapPercent(),l=this.title.getPadding(),h=e.width-a,c=i.splitText(t.text,t.style,h,l),d=i.getTextDimension(c[0],t.style,t.useHtml).width,u=0,g=c.length;g>u;u++){var f,p=e.y+l+(o+s)*u+o/2,m=c[u],v=e.x,y=t.align||"left";switch(y){case"left":v+=l,f="start",this.textEndX=d+v;break;case"center":v+=e.width/2-a/2,this.textEndX=v+d/2,f="middle";break;case"right":v+=e.width-l-a,this.textEndX=v,f="end"}var _=i.cssNormalization(t.style);this.titleSet.push(r.text(v,p,m).attr(_).attr("text-anchor",f))}},dataChangeRender:function(){this.labelDivManager.clearAllLabels(),this.titleSet.remove(),this.render()},translateX:function(t){this.labelDivManager.translateLabelsHorizontal(t);var e=this.title.bounds,a=e.x+e.width-this.textEndX;if(!(a>Math.abs(t))){var i=0>t?-1:1,r=Math.min(a,Math.abs(t))*i;this.titleSet.forEach(function(t){var e=t.matrix;e.translate(r,0),t.transform(e.toTransformString())})}}},i.inherit(e,a),t("./RenderLibrary").register(r.TITLE_VML,e),e}),a("component/Title",["require","./Base","../utils/BaseUtils","../Constants","../render/TitleSvgRender","../render/TitleVmlRender","../ComponentLibrary"],function(t){function e(t,e,i){a.call(this,t,e,i),this.refresh(e)}var a=t("./Base"),i=t("../utils/BaseUtils"),r=t("../Constants");t("../render/TitleSvgRender"),t("../render/TitleVmlRender");var n=.2,o=10;return e.prototype={constructor:e,_doLayout:function(){var t=this.componentOption,e=this.vanchart.getPlotBounds(),a=this.vanchart.getToolbarWidth(),s=e.width-2*o-a,l=this._maxHeight(),h=i.getTextDimension(t.text,t.style,t.useHtml),c=h.height,d=h.width;if(!t.useHtml&&d>s){var u=Math.ceil(d/s),g=c*n;c=c*u+g*(u-1)}c=t.maxHeight?l:Math.min(l,c+2*o),this._setComponentBounds(r.TOP,c)},getPadding:function(){return o},getLineGapPercent:function(){return n},translateX:function(t){this.render.translateX(t)}},i.inherit(e,a),t("../ComponentLibrary").register(r.TITLE_COMPONENT,e),e}),a("render/AxisRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.axis=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){for(var t=this.axis.getAxisRender(),e=0,a=t.length;a>e;e++)t[e].render()},dataChangeRender:function(){for(var t=this.axis.getAxisRender(),e=0,a=t.length;a>e;e++)t[e].dataChangeRender()},monitorRender:function(){for(var t=this.axis.getAxisRender(),e=0,a=t.length;a>e;e++)t[e].monitorRender()}},i.inherit(e,a),t("./RenderLibrary").register(r.AXIS_RENDER,e),e}),a("render/BaseAxisSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/BezierEasing","../Constants"],function(t){function e(t){a.call(this,t),this.axis=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../utils/BezierEasing"),n=t("../Constants"),o=400,s=r.css.swing,l="linear",h=500,c="axis-tick-text",d="axis-tick-line",u="axis-minor-tick-line",g="axis-grid-line",f="plot-bands",p="plot-lines",m="axis-line";return e.prototype={constructor:e,render:function(){var t=this.axis.getVanchartRender().getRenderRoot();if(this._axisG||(this._axisG=t.append("g"),this._axisG.call(this._drawAxis.bind(this))),!this._axisTitleG){var e=this.axis.getAxisTitleBounds();this._axisTitleG=t.append("g").attr("transform","translate("+e.x+","+e.y+")"),this._drawAxisTitle(e)}},_drawPlotBands:function(t){var e=this.axis._preCalculatePlotBands(),a=this.axis.getPlotBounds();t.each(function(){var t=d3.select(this).selectAll("."+f).data(e);t.exit().remove(),t.enter().append("rect").attr("class",f),t.attr("transform",i.makeTranslate(a)).style("fill",function(t){return t.color}),d3.transition(t).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height})})},_drawPlotLines:function(t){var e=this.axis._preCalculatePlotLines(),a=this.axis.getPlotBounds();t.each(function(){var t=d3.select(this).selectAll("."+p).data(e);t.exit().remove();var r=t.enter().append("g").attr("class",p);r.append("line"),r.append("text"),d3.transition(t).attr("transform",i.makeTranslate(a)),d3.transition(t.select("line")).attr("x1",function(t){return t.startPos.x}).attr("y1",function(t){return t.startPos.y}).attr("x2",function(t){return t.endPos.x}).attr("y2",function(t){return t.endPos.y}).style("stroke",function(t){return t.color}).style("stroke-width",function(t){return t.width}).style("stroke-dasharray",function(t){return t.dataArray}),d3.transition(t.select("text")).text(function(t){return t.text}).attr("x",function(t){return t.textX}).attr("y",function(t){return t.textY}).attr("dy","0.85em").each(function(t){d3.select(this).call(i.setTextStyle,t.style)})})},_drawGridLine:function(t){var e=this.axis.componentOption,a=this.axis.getPlotBounds(),r=e.gridLineWidth,n=this.axis.getTickData(),o="x1",s="y1",l="x2",h="y2",c=a.height,d=a.width;this.axis.isHorizontal()||(o="y1",s="x1",l="y2",h="x2",c=a.width,d=0);var u=e.gridLineColor,f=i.lineSubPixelOpt(0,r);t.each(function(){var t=d3.select(this).selectAll("."+g).data(n,function(t){return t.tickValue});r?(d3.transition(t.exit()).style("opacity",0).attr(o,d).attr(s,0).attr(l,d).attr(h,c).remove(),t.enter().append("line").attr("class",g).attr("transform",i.makeTranslate(a)),d3.transition(t).attr("transform",i.makeTranslate(a)).attr(o,function(t){return t.tickPos+f}).attr(s,0).attr(l,function(t){return t.tickPos+f}).attr(h,c).style({stroke:u,"stroke-width":r})):t.remove()})},_drawTickLine:function(t){var e=this.axis.componentOption,a=this.axis.getMainTickData(),r=e.enableTick?e.tickLength:0,o=e.tickWidth,s=e.tickColor,l=this.axis._getAxisOriginPoint(),h=this.axis.getPosition(),c="x1",u="y1",g="x2",f="y2";this.axis.isHorizontal()||(c="y1",u="x1",g="y2",f="x2");var p=h==n.TOP||h==n.LEFT?-1:1,m=i.lineSubPixelOpt(0,o);t.each(function(){var t=d3.select(this).selectAll("."+d).data(a);r&&o?(t.enter().append("line").attr("class",d).attr("transform",i.makeTranslate(l)).style({stroke:s,"stroke-width":o}),t.exit().remove(),d3.transition(t).attr("transform",i.makeTranslate(l)).attr(c,function(t){return t.tickPos+m}).attr(u,0).attr(g,function(t){return t.tickPos+m}).attr(f,p*r)):t.remove()})},_drawTickLabel:function(t){var e=this.axis.componentOption,a=this.axis.getPlotBounds(),r=this.axis.getTickData(),o=e.enableTick?e.tickLength:0,s=e.labelRotation||0,l=this.axis._getAxisOriginPoint(),h=e.useHtml&&!e.labelRotation,d=e.labelStyle,u=i.getTextHeight(d),g=e.tickPadding+o,f=this.axis.getPosition(),p=f==n.TOP||f==n.LEFT?-1:1,m=this.axis.isHorizontal(),v="x",y="y",_="middle",b=a.x;m||(v="y",y="x",b=-a.y);var x=this;t.each(function(){var t=d3.select(this).selectAll("."+c).data(r,function(t){return t.tickValue});e.showLabel&&!h?(t.enter().append("text").attr("class",c).attr("transform",function(t){return x._getLabelTransform(t,p,g,l,s)}).style("text-anchor",_).style("opacity",0).call(i.setTextStyle,d),d3.transition(t.exit()).attr(v,b).style("opacity",0).remove(),d3.transition(t).attr("transform",function(t){return x._getLabelTransform(t,p,g,l,s)}).text(function(t){return t.tickContent}).attr(v,function(t){return t.tickLabelPos}).attr(y,function(t){if(m){var e=f==n.TOP?g:g+t.tickDim.height/2+u/2;return p*e}return p*(g+t.tickDim.width/2)}).attr("dy",m?"0":".32em").style("opacity",1)):t.remove()})},_getLabelTransform:function(t,e,a,r,n){var o,s;return this.axis.isHorizontal()?(o=t.tickLabelPos,s=e*(a+t.tickDim.height/2)):(o=e*(a+t.tickDim.width/2),s=t.tickLabelPos),i.makeTranslate(r)+"rotate("+n+" "+o+","+s+")"},_drawAxisLine:function(t){var e=this.axis.componentOption,a=this.axis.getPlotBounds(),r=this.axis._getAxisOriginPoint(),n=e.lineWidth,o=e.lineColor,s="x1",l="y1",h="x2",c="y2",d=a.width;this.axis.isHorizontal()||(s="y1",l="x1",h="y2",c="x2",d=a.height);var u=i.lineSubPixelOpt(0,n);t.each(function(){var t=d3.select(this).selectAll("line."+m).data([0]);n?(t.exit().remove(),t.enter().append("line").attr("class",m),d3.transition(t).attr("transform",i.makeTranslate(r)).attr(s,0).attr(l,u).attr(h,d).attr(c,u).style({stroke:o,"stroke-width":n})):t.remove()})},_drawMinorTickLine:function(t){var e=this.axis.componentOption,a=e.enableMinorTick?e.minorTickLength:0,r=e.minorTickWidth,o=e.minorTickColor,s=this.axis.getMinorTickData(),l=this.axis._getAxisOriginPoint(),h=this.axis.getPosition(),c="x1",d="y1",g="x2",f="y2";this.axis.isHorizontal()||(c="y1",d="x1",
    g="y2",f="x2");var p=h==n.TOP||h==n.LEFT?-1:1,m=i.lineSubPixelOpt(0,r),v=this.axis.type==n.CATEGORY_AXIS_COMPONENT,y=this.axis.scale;t.each(function(){var t=d3.select(this).selectAll("."+u).data(s);a&&r?(t.enter().append("line").attr("class",u).attr("transform",i.makeTranslate(l)).style({stroke:o,"stroke-width":r}),t.exit().remove(),d3.transition(t).attr("transform",i.makeTranslate(l)).attr(c,function(t){return(v?t:y(t))+m}).attr(d,0).attr(g,function(t){return(v?t:y(t))+m}).attr(f,p*a)):t.remove()})},_drawDivLabels:function(){this.labelDivManager.clearAllLabels();var t=this.labelDivManager,e=this.axis.componentOption;if(e.useHtml&&!e.labelRotation){var a,r,o=this.axis._getAxisOriginPoint(),s=o.x,l=o.y,h=this.axis.getPosition(),c=this.axis.isHorizontal(),d=this.axis.getTickScale(),u=this.axis.getTickData(),g=e.enableTick?e.tickLength:0,f=(d.rangeBand?0:g)+e.tickPadding,p=e.labelStyle,m=i.getTextHeight(p);e.useHtml&&!e.labelRotation&&(c?(r=h==n.TOP?-(f+m):f,u.forEach(function(e){a=e.tickLabelPos-e.tickDim.width/2,t.addLabel(e.tickContent,{x:a+s,y:r+l},p)})):u.forEach(function(e){a=h==n.LEFT?-(f+e.tickDim.width):f,r=e.tickLabelPos-m/2,t.addLabel(e.tickContent,{x:a+s,y:r+l},p)}))}},_drawAxis:function(t){this._drawPlotBands(t),this._drawGridLine(t),this._drawAxisLine(t),this._drawArrow(t),this._drawTickLine(t),this._drawTickLabel(t),this._drawDivLabels(),this._drawMinorTickLine(t),this._drawPlotLines(t)},_drawArrow:function(t){if(this.axis.showArrow()){var e=this.axis.getPlotBounds(),a=this.axis.componentOption,r=a.lineWidth,n=a.lineColor,o=i.lineSubPixelOpt(0,r),s=this.axis._getAxisOriginPoint();this._axisG.select("g.arrow").remove();var l=this._axisG.append("g").attr("class","arrow").attr("transform",i.makeTranslate(s));l.append("line"),l.append("path"),this.axis.isHorizontal()?(l.select("line").attr("x1",e.width).attr("y1",o).attr("x2",e.width+6).attr("y2",o).style({stroke:n,"stroke-width":r}),l.select("path").attr("d","M2,2 L10,6 L2,10 L6,6 L2,2").attr("transform","translate("+e.width+",-6)").style("fill",n)):(l.select("line").attr("x1",o).attr("y1",-6).attr("x2",o).attr("y2",0).style({stroke:n,"stroke-width":r}),l.select("path").attr("d","M2,-2 L6,-10 L10,-2 L6,-6 L2,-2").attr("transform","translate(-6,0)").style("fill",n))}},_drawAxisTitle:function(t){this.axis.isHorizontal()?this._drawHorizontalTitle(t):this._drawVerticalTitle(t)},_drawHorizontalTitle:function(t){var e=this.axis.componentOption;if(e.title){var a,r,o,s=e.title,l=s.rotation||0,h=i.getTextDimension(s.text,s.style,s.useHtml),c=s.align||"left";switch(c){case"left":a=0,o=a+h.width/2,r="start";break;case"center":a=t.width/2,o=a,r="middle";break;case"right":a=t.width,o=a-h.width/2,r="end"}var d=this.axis.getTitleLabelGap(),u=t.height/2,g=.85*h.height+(this.axis.getPosition()==n.BOTTOM?d:-d);this._axisTitleG.append("text").attr("x",a).attr("y",g).text(s.text).style("text-anchor",r).attr("transform","rotate("+l+" "+o+","+u+")").call(i.setTextStyle,s.style)}},_drawVerticalTitle:function(t){var e=this.axis.componentOption;if(e.title){var a,r,n=e.title,o=n.rotation||0,s=i.getTextDimension(n.text,n.style,n.useHtml),l=i.getTextDimensionWithRotation(n.text,n.style,n.useHtml,o),h=t.width/2,c=h,d=n.align||"top";switch(d){case"top":a=s.height+l.height/2;break;case"center":a=s.height+(t.height-s.height)/2;break;case"bottom":a=t.height-l.height/2}r=a,this._axisTitleG.append("text").attr("x",h).attr("y",a).text(n.text).style("text-anchor","middle").attr("transform","rotate("+o+" "+c+","+r+")").call(i.setTextStyle,n.style)}},dataChangeRender:function(){if(this._axisG&&this._axisG.transition().ease(s).duration(o).call(this._drawAxis.bind(this)),this._axisTitleG){var t=this.axis.getAxisTitleBounds();this._axisTitleG.attr("transform","translate("+t.x+","+t.y+")")}},zoomRefresh:function(){this.dataChangeRender()},monitorRender:function(){this._axisG&&this._axisG.transition().ease(l).duration(h).call(this._drawAxis.bind(this))}},i.inherit(e,a),e}),a("render/CategoryAxisSvgRender",["require","./BaseAxisSvgRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.categoryAxis=t}var a=t("./BaseAxisSvgRender"),i=t("../utils/BaseUtils"),r=t("../Constants");i.inherit(e,a),t("./RenderLibrary").register(r.CATEGORY_AXIS_SVG,e)}),a("render/BaseAxisVmlRender",["require","./BaseRender","../utils/BaseUtils","../utils/BezierEasing","../Constants","../utils/ColorUtils"],function(t){function e(t){a.call(this,t),this.axis=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=(t("../utils/BezierEasing"),t("../Constants")),n=t("../utils/ColorUtils");return e.prototype={constructor:e,render:function(){var t=this.axis.getVanchartRender().getRenderRoot();this._bodySet=t.set();var e=this.axis.componentOption;this._drawAxisLine(t,e),this._drawArrow(t,e),this._drawAxisTicks(t,e),this._drawMinorTickLine(t,e),this._drawGridLines(t,e),this._drawAxisLabels(t,e),this._drawPlotBands(t),this._drawAxisTitle(t),this._drawPlotLines(t,e)},_drawAxisLine:function(t,e){var a,r=this.axis._getAxisOriginPoint(),n=e.lineWidth,o=e.lineColor,s=this.axis.bounds.width,l=this.axis.bounds.height;a=this.axis.isHorizontal()?t.path(this._getLinePath([0,0],[s,0])):t.path("M0,0L0,"+l),a.attr({stroke:o,"stroke-width":n}).transform(i.makeTranslate(r)),this._bodySet.push(a)},_drawArrow:function(t,e){if(this.axis.showArrow()){var a,r,n,o,s=this.axis.getPlotBounds(),e=this.axis.componentOption,l=e.lineWidth,h=e.lineColor,c=(i.lineSubPixelOpt(0,l),this.axis._getAxisOriginPoint());this.axis.isHorizontal()?(a=t.path(this._getLinePath([s.width,0],[s.width+6,0])),r=t.path("M2,2 L10,6 L2,10 L6,6 L2,2"),n=s.width,o=-6):(a=t.path(this._getLinePath([0,-6],[0,0])),r=t.path("M2,-2 L6,-10 L10,-2 L6,-6 L2,-2"),n=-6,o=0),a.attr({fill:"none",stroke:h,"stroke-width":l}).transform(i.makeTranslate(c)),r.attr({fill:h,stroke:"none"}).transform(i.makeTranslate([c.x+n,c.y+o])),this._bodySet.push(a),this._bodySet.push(r)}},_drawMinorTickLine:function(t,e){var a=e.enableMinorTick?e.minorTickLength:0,n=e.minorTickWidth,o=e.minorTickColor,s=this.axis.getMinorTickData(),l=this.axis._getAxisOriginPoint(),h=this.axis.type==r.CATEGORY_AXIS_COMPONENT,c=this.axis.scale,d=this;a&&s.forEach(function(e){d._bodySet.push(t.path(d._getTickPath(h?e:c(e),a)).attr({stroke:o,"stroke-width":n}).transform(i.makeTranslate(l)))})},_drawAxisTicks:function(t,e){var a=this.axis.getMainTickData(),r=this,n=this.axis._getAxisOriginPoint();if(e.enableTick){var o=e.tickColor,s=e.tickWidth,l=e.tickLength;a.forEach(function(e){r._bodySet.push(t.path(r._getTickPath(e.tickPos,l)).attr({stroke:o,"stroke-width":s}).transform(i.makeTranslate(n)))})}},_getTickPath:function(t,e){var a=this.axis.getPosition();switch(a){case r.TOP:return this._getLinePath([t,0],[t,-e]);case r.BOTTOM:return this._getLinePath([t,0],[t,e]);case r.LEFT:return this._getLinePath([0,t],[-e,t]);case r.RIGHT:return this._getLinePath([0,t],[e,t])}},_getGridLinePath:function(t,e){return this.axis.isHorizontal()?this._getLinePath([t,0],[t,e]):this._getLinePath([0,t],[e,t])},_drawGridLines:function(t,e){var a=e.gridLineColor,r=e.gridLineWidth,n=this.axis.getPlotBounds(),o=this.axis.isHorizontal()?n.height:n.width,s=this.axis.getTickData(),l=this;s.forEach(function(e){l._bodySet.push(t.path(l._getGridLinePath(e.tickPos,o)).attr({stroke:a,"stroke-width":r}).transform(i.makeTranslate(n)))})},_drawAxisLabels:function(t){this.labelDivManager.clearAllLabels();var e=this.labelDivManager,a=this.axis.componentOption,n=this.axis._getAxisOriginPoint(),o=n.x,s=n.y,l=this.axis.getPosition(),h=this.axis.isHorizontal(),c=this.axis.getTickScale(),d=this.axis.getTickData(),u=(c.rangeBand?0:a.tickLength)+a.tickPadding,g=a.labelStyle,f=i.getTextHeight(g);if(c.rangeBand){var p=c.copy(),m=p.rangeBand();c=function(t){return p(t)+m/2}}var v=this,y="top"===l||"right"===l?-1:1;d.forEach(function(n){var d,p,m=i.getTextDimension(n.tickContent,g,!1);if(h?(p=l==r.TOP?-(u+f):u,d=c(n.tickValue)-m.width/2):(d=l==r.LEFT?-(u+m.width):u,p=c(n.tickValue)-f/2),a.useHtml)e.addLabel(n.tickContent,{x:d+o,y:p+s},g);else{var _=a.labelRotation||0,b=o+d+m.width/2,x=s+p+f/2;if(Math.abs(_)){var L=Math.abs(m.height-n.tickDim.height),C=Math.abs(m.width-n.tickDim.width);l===r.TOP||l===r.BOTTOM?x+=y*L/2:b+=y*C/2}var T=t.text(b,x,n.tickContent).attr(i.cssNormalization(g)).transform("r"+_);v._bodySet.push(T)}})},_drawAxisTitle:function(t){this.axis.isHorizontal()?this._drawHorizontalTitle(t):this._drawVerticalTitle(t)},_drawHorizontalTitle:function(t){var e=this.axis.getPosition(),a=this.axis.getAxisTitleBounds(),n=a.x,o=a.y+(e==r.TOP?a.height:0),s=this.axis.componentOption;if(s.title){var l=s.title,h=i.cssNormalization(l.style),c=l.rotation||0,d=i.getTextDimension(l.text,l.style,l.useHtml),u=i.getTextDimensionWithRotation(l.text,l.style,l.useHtml,c),g=e==r.BOTTOM?1:-1,f=n,p=o+g*d.height/2,m=l.align||"left";switch(m){case"left":f+=d.width/2;break;case"center":f+=a.width/2;break;case"right":f+=a.width-d.width/2}var v=Math.abs(u.height-d.height)/2;this._bodySet.push(t.text(f,p+g*v,l.text).attr(h).transform("r"+c))}},_drawVerticalTitle:function(t){var e=this.axis.getPosition(),a=this.axis.getAxisTitleBounds(),n=a.x+(e==r.LEFT?a.width:0),o=a.y,s=this.axis.componentOption,l=e==r.LEFT?1:-1;if(s.title){var h=s.title,c=i.cssNormalization(h.style),d=h.rotation||0,u=i.getTextDimension(h.text,h.style,h.useHtml),g=i.getTextDimensionWithRotation(h.text,h.style,h.useHtml,d),f=n-u.width/2*l,p=o,m=h.align||"top";switch(m){case"top":p+=u.width/2;break;case"center":p+=a.height/2;break;case"bottom":p+=a.height-u.width/2}var v=Math.abs(g.width-u.width)/2;this._bodySet.push(t.text(f+v*l,p,h.text).attr(c).transform("r"+d))}},_drawPlotLines:function(t){var e=this.axis._preCalculatePlotLines(),a=this.axis.getPlotBounds(),r=this;e.forEach(function(e){r._bodySet.push(t.path(r._getLinePath([e.startPos.x,e.startPos.y],[e.endPos.x,e.endPos.y])).attr({stroke:e.color,"stroke-width":e.width,"stroke-dasharray":e.dataArray}).transform(i.makeTranslate(a)));var n=e.text,o=i.cssNormalization(e.style);n&&r._bodySet.push(t.text(e.textX+e.textDim.width/2,e.textY+e.textDim.height/2,n).attr(o).transform(i.makeTranslate(a)))})},_drawPlotBands:function(t){var e=this.axis._preCalculatePlotBands(),a=this.axis.getPlotBounds(),r=this;e.forEach(function(e){r._bodySet.push(t.rect(e.x,e.y,e.width,e.height).attr({stroke:"none",fill:e.color,"fill-opacity":n.getColorOpacity(e.color)}).transform(i.makeTranslate(a)))})},dataChangeRender:function(){this._removeAll(),this.render()},_removeAll:function(){this._bodySet.remove()}},i.inherit(e,a),e}),a("render/CategoryAxisVmlRender",["require","./BaseAxisVmlRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.categoryAxis=t}var a=t("./BaseAxisVmlRender"),i=t("../utils/BaseUtils"),r=t("../Constants");i.inherit(e,a),t("./RenderLibrary").register(r.CATEGORY_AXIS_VML,e)}),a("render/ValueAxisSvgRender",["require","./BaseAxisSvgRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.valueAxis=t}var a=t("./BaseAxisSvgRender"),i=t("../utils/BaseUtils"),r=t("../Constants");i.inherit(e,a),t("./RenderLibrary").register(r.VALUE_AXIS_SVG,e)}),a("render/ValueAxisVmlRender",["require","./BaseAxisVmlRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.valueAxis=t}var a=t("./BaseAxisVmlRender"),i=t("../utils/BaseUtils"),r=t("../Constants");i.inherit(e,a),t("./RenderLibrary").register(r.VALUE_AXIS_VML,e)}),a("render/DateAxisSvgRender",["require","./BaseAxisSvgRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.dateAxis=t}var a=t("./BaseAxisSvgRender"),i=t("../utils/BaseUtils"),r=t("../Constants");i.inherit(e,a),t("./RenderLibrary").register(r.DATE_AXIS_SVG,e)}),a("render/DateAxisVmlRender",["require","./BaseAxisVmlRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.dateAxis=t}var a=t("./BaseAxisVmlRender"),i=t("../utils/BaseUtils"),r=t("../Constants");i.inherit(e,a),t("./RenderLibrary").register(r.DATE_AXIS_VML,e)}),a("utils/BoundsManager",["require","./BaseUtils"],function(t){function e(){this.addedBounds=[]}var a=t("./BaseUtils");return e.prototype={constructor:e,addBounds:function(t){this.addedBounds.push(t)},isOverlapped:function(t){for(var e=0,i=this.addedBounds.length;i>e;e++)if(a.rectangleOverlapped(t,this.addedBounds[e]))return!0;return!1},isEmpty:function(){return 0==this.addedBounds.length}},e}),a("component/BaseAxis",["require","../Constants","../utils/BaseUtils","../utils/Formatter","../utils/BoundsManager","./Base","../utils/BezierEasing"],function(t){function e(t,e,a){n.call(this,t,e,a),this.scale=null,this._startLabelDim={width:0,height:0},this._endLabelDim={width:0,height:0},this.tickLabelLength=0,this.tickData=[],this.minorTickData=[],this.usedTickData=[]}var a=t("../Constants"),i=t("../utils/BaseUtils"),r=(t("../utils/Formatter"),t("../utils/BoundsManager")),n=t("./Base"),o=(t("../utils/BezierEasing"),3),s=5,l=5,h=15;return e.prototype={constructor:e,_updateAxisBounds:function(){var t=this.componentOption;this.tickLabelLength=this._getTickLabelLength();var e=this._getAxisTitleLength()+l,i=this.tickLabelLength+e;if(i=this.isHorizontal()?t.maxHeight?this._maxHeight():i:t.maxWidth?this._maxWidth():i,t.onZero){var r=this.componentType==a.X_AXIS_COMPONENT?a.Y_AXIS_COMPONENT:a.X_AXIS_COMPONENT;r=this.option[r][0]||r;var n=a.BOTTOM;(r.position==a.TOP||r.position==a.BOTTOM)&&(n=a.RIGHT),t.position=n,this._updateFloatBounds(t.position,i)}else this.getRender()&&this._setComponentBounds(t.position,i)},_doValueKindAxisMonitorLayout:function(){for(var t=this.option.series,e=!1,a=0,i=t.length;i>a;a++){var r=t[a],n=this._getAxisPair(r),o=n.baseAxis;if(o.componentType==this.componentType&&o.axisIndex==this.axisIndex){e=!0;break}}var s=this._calculateMinMaxValue();if(e){var l=(this.valueList[0],this.valueList[this.valueList.length-1]),h=this._getTickInterval();if(s.maxValue>l)for(;s.maxValue>l;)l+=h,this.valueList.push(l);for(this.valueList.pop();this.valueList[0]<s.minValue;)this.valueList.shift();this.scale.domain([s.minValue,s.maxValue])}else this._calculateNiceDomain(s.minValue,s.maxValue),this._updateOriginTickData(),this._calculateTickData();this._updateAxisBounds()},_getTickLabelLength:function(){var t=this.componentOption,e=t.tickPadding||o;t.enableTick&&(e+=t.tickLength||s);var a=this.isHorizontal();this._updateOriginTickData();var i=0;return t.showLabel&&this.tickData.length&&(this._startLabelDim=this.tickData[0].tickDim,this._endLabelDim=this.tickData[this.tickData.length-1].tickDim,this.tickData.forEach(function(t){var e=t.tickDim;i=Math.max(i,a?e.height:e.width)})),e+i},_updateOriginTickData:function(){var t=this._getTickValues(),e=this.componentOption,a=e.formatter,r=this.scale.rangeBand?-this.scale.rangeBand()/2:0;this.byPercent&&"object"==typeof a?a.format=a.format||"#.##%":"value"==e.type&&"object"==typeof a&&(a.format=a.format||"#.##"),this.tickData=[];for(var n=0,o=t.length;o>n;n++){var s=t[n],l=Math.round(this.scale(s)),h=this._getTickContent(s,a),c=i.getTextDimensionWithRotation(h,e.labelStyle,e.useHtml,e.labelRotation);this.tickData.push({tickValue:s,tickContent:h,tickDim:c,tickPos:l,tickLabelPos:l-r})}},_getAxisTitleLength:function(){var t=this.componentOption.title,e=0;if(t){var a=i.getTextDimensionWithRotation(t.text,t.style,t.useHtml,t.rotation);e=this.isHorizontal()?a.height:a.width}return e},getAxisTitleBounds:function(){var t=this.bounds,e=this.tickLabelLength,i=this.componentOption.position,r=t.x,n=t.y,o=t.width,s=t.height;switch(i){case a.LEFT:o-=e;break;case a.BOTTOM:n+=e,s-=e;break;case a.RIGHT:r+=e,o-=e;break;case a.TOP:s-=e}return{x:r,y:n,width:o,height:s}},_updateRange:function(){this.scale.rangeRound(this._getRange()),i.hasDefined(this.startIndex)&&i.hasDefined(this.endIndex)&&this._updateDomain(this.startIndex,this.endIndex)},_getRange:function(){var t=this.vanchart.getPlotBounds(),e=this.componentOption;return this.isHorizontal()?e.reversed?[t.width,0]:[0,t.width]:e.reversed?[0,t.height]:[t.height,0]},_preCalculatePlotLines:function(){var t=this.componentOption.plotLines||[],e=this.componentOption.position,r=this.vanchart.getPlotBounds(),n=this.scale,s=this.type==a.DATE_AXIS_COMPONENT,l=[];return t.forEach(function(t){var h,c,d=n(s?i.object2date(t.value):t.value)+(n.rangeBand?n.rangeBand()/2:0);switch(d=i.lineSubPixelOpt(d,t.width),e){case a.TOP:case a.BOTTOM:h={x:d,y:0},c={x:d,y:r.height};break;case a.LEFT:case a.RIGHT:h={x:0,y:d},c={x:r.width,y:d}}var u,g,f,p;u=g=0,f="",p={};var m=Math.min(h.x,c.x),v=Math.max(h.x,c.x),y=Math.min(h.y,c.y),_=Math.max(h.y,c.y);if(n.rangeBand)if(e==a.TOP||e==a.BOTTOM){if(0>m||v>r.width)return}else if(0>y||_>r.height)return;if(t.label&&t.label.text&&t.label.style){p=t.label.style,f=t.label.text;var b=t.label.align,x=i.getTextDimension(f,p,t.label.useHtml);switch(b){case a.TOP:u=m-x.width,g=y;break;case a.BOTTOM:u=m-x.width,g=_-x.height;break;case a.LEFT:u=m,g=y-x.height-o;break;case a.RIGHT:u=v-x.width,g=y-x.height-o}}l.push({color:t.color,startPos:h,endPos:c,width:t.width,dataArray:a.DASH_TYPE[t.dashStyle],text:f,textDim:x,style:p,textX:u,textY:g})}),l},_preCalculatePlotBands:function(){var t=this._getPlotBands(),e=this.scale,i=!!e.rangeBand,r=i?e.rangeBand():0,n=[],o=this.vanchart.getPlotBounds(),s=this,l=this.scale.domain();return t.forEach(function(t){var i=t.from,h=t.to;s.type!=a.CATEGORY_AXIS_COMPONENT&&(i=Math.max(Math.min(t.from,t.to),l[0]),h=Math.min(Math.max(t.from,t.to),l[1]));var c=e(i),d=e(h);i=Math.min(c,d),h=Math.max(c,d),h+=r;var u=0,g=0,f=o.width,p=o.height,m=Math.abs(h-i);s.isHorizontal()?(u=Math.max(0,i),f=Math.min(f,m)):(g=Math.max(0,i),p=Math.min(p,m)),n.push({x:u,y:g,width:f,height:p,color:t.color})}),n},_getPlotBands:function(){var t=this.componentOption.plotBands,e=this.scale,a=!!e.rangeBand;if("string"==typeof t){var r=t;t=[];for(var n=this._getTickValuesWithEndValue(),o=a?-1:0,s=n.length-1;s>o;s-=2)t.push({color:r,from:a?n[s]:n[s-1],to:n[s]})}else{t=t||[];for(var l=[],h=0,c=t.length;c>h;h++){var d=t[h];i.hasDefined(d.from)&&i.hasDefined(d.to)&&l.push(d)}t=l}return t},_getTickValues:function(){return[]},_getTickValuesWithEndValue:function(){return this._getTickValues()},getTickData:function(){return this.usedTickData},getMaxTickWidth:function(){var t=0;return this.usedTickData.forEach(function(e){t=Math.max(t,e.tickDim.width)}),t},getTickHeight:function(){return this.componentOption.labelStyle?i.getTextHeight(this.componentOption.labelStyle):0},getMinorTickData:function(){return this.minorTickData},getMainTickData:function(){for(var t=[],e=this.getTickData(),a=0,i=e.length;i>a;a++){var r=e[a];r.tickContent&&t.push(r)}return t},_updateTickData:function(t,e){this.usedTickData=[];for(var i=t;e>i;i++)this.usedTickData.push(this.tickData[i]);this.minorTickData=[],this.componentOption.enableMinorTick&&this.usedTickData.length&&(this.type==a.CATEGORY_AXIS_COMPONENT?this._updateCategoryMinorTickData():this._updateValueMinorTickData())},_updateCategoryMinorTickData:function(){var t=Math.round(this.getTickLength()/5),e=this.usedTickData.length;e=this.scale.rangeBand?e:e-1;for(var a=0;e>a;a++)for(var i=this.usedTickData[a].tickPos,r=1;5>r;r++)this.minorTickData.push(i+t*r)},_updateValueMinorTickData:function(){for(var t=this.componentOption,e=this._getTickInterval(),a=t.minorTickInterval?t.minorTickInterval:e/5,r=0,n=this.usedTickData.length;n-1>r;r++){var o=this.usedTickData[r].tickValue,s=this.usedTickData[r+1].tickValue,l=o instanceof Date&&s instanceof Date;o=l?i.date2int(o):o,s=l?i.date2int(s):s;for(var h=o+a;s>h;h+=a)this.minorTickData.push(l?i.int2date(h):h)}var c=this.tickData[this.tickData.length-1].tickValue,d=this.scale.domain()[1],l=c instanceof Date&&d instanceof Date;if(c=l?i.date2int(c):c,d=l?i.date2int(d):d,d>c)for(var h=c+a;d>=h;h+=a)this.minorTickData.push(l?i.int2date(h):h)},_updateTickContent:function(){var t=this.componentOption,e=this.scale;if(t.showLabel)if(t.step){var a=0;this.tickData.forEach(function(e){a++%t.step&&(e.tickContent="")})}else{var n=new r,o=this.isHorizontal();this.tickData.forEach(function(t){var a=o?{x:e(t.tickValue),y:0}:{x:0,y:e(t.tickValue)},r=i.makeBounds(a,t.tickDim);n.isOverlapped(r)?t.tickContent="":n.addBounds(r)})}else this.tickData.forEach(function(t){t.tickContent=""})},_calculateTickData:function(){this._updateOriginTickData(),this._updateTickContent(),this._updateTickData(0,this.tickData.length)},_getOriginDet:function(){var t=this._getPlotOriginPoint(),e=this._getAxisOriginPoint();return{x:t.x-e.x,y:t.y-e.y}},_getPlotOriginPoint:function(){var t,e,i=this.vanchart.getPlotBounds(),r=this.componentOption.position;switch(r){case a.TOP:t=i.x,e=i.y;break;case a.BOTTOM:t=i.x,e=i.y+i.height;break;case a.LEFT:t=i.x,e=i.y;break;case a.RIGHT:t=i.x+i.width,e=i.y}return{x:t,y:e}},_getAxisOriginPoint:function(){var t,e,i=this.bounds,r=this.componentOption.position;switch(r){case a.TOP:t=i.x,e=i.y+i.height;break;case a.BOTTOM:t=i.x,e=i.y;break;case a.LEFT:t=i.x+i.width,e=i.y;break;case a.RIGHT:t=i.x,e=i.y}return{x:t,y:e}},dealOnZero:function(){var t=this.componentOption;if(t.onZero){var e=t.onZero===!0?0:t.onZero,i=this.componentType==a.X_AXIS_COMPONENT?a.Y_AXIS_COMPONENT:a.X_AXIS_COMPONENT;i=this.vanchart.getComponent(i).getAxis(e);var r,n,o,s,l=i.scale(0),h=this.vanchart.getPlotBounds();this.isHorizontal()?(r=h.x,n=l+h.y,o=h.width,s=this.bounds.height):(r=l+h.x,n=h.y,o=this.bounds.width,s=h.height),this.bounds={x:r,y:n,width:o,height:s}}},getTickScale:function(){return this.scale},getStartLabelDim:function(){var t=this.componentOption;return this.isHorizontal()?t.reversed?this._endLabelDim:this._startLabelDim:t.reversed?this._startLabelDim:this._endLabelDim},getEndLabelDim:function(){var t=this.componentOption;return this.isHorizontal()?t.reversed?this._startLabelDim:this._endLabelDim:t.reversed?this._endLabelDim:this._startLabelDim},getShowValue:function(t){return t},axisZoom:function(t,e){},_initZoomStatus:function(){},isAxisReversed:function(){return this.componentOption.reversed},isOnZero:function(){return this.componentOption.onZero},getLineWidth:function(){return this.componentOption.lineWidth},showArrow:function(){return this.componentOption.showArrow},getTitleLabelGap:function(){return l},getArrowSize:function(){return h},updateStatus:function(){var t=this._calculateMinMaxValue();this.startIndex=t.minValue,this.endIndex=t.maxValue,this._updateDomain(this.startIndex,this.endIndex)},getAxisIndex:function(){return this.componentOption.axisIndex},getRender:function(){var t=this.option.chartType;return t!==a.GAUGE_CHART&&t!=a.RADAR_CHART?this.render:void 0}},i.inherit(e,n),e}),a("component/CategoryAxis",["require","./Base","./BaseAxis","../utils/BaseUtils","../Constants","../ComponentLibrary"],function(t){function e(t,e,i,r){a.call(this,t,e,r),this.isRangePoints=!1,this.refresh(e,i)}var a=(t("./Base"),t("./BaseAxis")),i=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,type:r.CATEGORY_AXIS_COMPONENT,_doLayout:function(){var t=this.componentOption;this.categories=t.categories||[];for(var e=this.option.series,a={},n=this.componentType==r.X_AXIS_COMPONENT?0:1,o=this.componentType==r.X_AXIS_COMPONENT?"x":"y",s=this.getAxisIndex(),l=0,h=e.length;h>l;l++){var c=e[l][this.componentType]||0;if(c==s)for(var d=0,u=e[l].data.length;u>d;d++){var g=e[l].data[d],f=i.isArray(g)?n:o,p=g[f];i.hasDefined(p)&&!a[p]&&(this.categories.push(p),a[p]=!0)}this._getSeriesType(l)==r.AREA_CHART&&(this.isRangePoints=!0)}this.scale=d3.scale.ordinal().domain(this.categories),this._updateAxisBounds(),this.startIndex=i.pick(this.startIndex,0),this.endIndex=i.pick(this.endIndex,this.categories.length-1)},_doMonitorLayout:function(){this._doLayout(),this.startIndex=0,this.endIndex=this.categories.length-1},updateStatus:function(){this.startIndex=0,this.endIndex=this.categories.length-1,this.updateAxisScale(this.startIndex,this.endIndex)},getCategoryCount:function(){return this.categories.length},getTickLength:function(){var t=this.scale.domain(),e=this.scale.rangeExtent(),a=Math.abs(e[1]-e[0]);return this.isRangePoints&&t.length<=1?a:this.isRangePoints?a/(t.length-1):this.scale.rangeBand()},getCategoryLabel:function(t){return this.categories[t]},scaleByIndex:function(t){return this.scale(this.getCategoryLabel(t))},_updateRange:function(){var t=i.pick(this.startIndex,0),e=i.pick(this.endIndex,this.categories.length-1);this.updateAxisScale(t,e)},getValueFromData:function(t,e){var a=this.componentType==r.X_AXIS_COMPONENT?0:1,n=this.componentType==r.X_AXIS_COMPONENT?"x":"y",o=i.isArray(t)?t[a]:t[n];return o?o:this.categories[e]},_getTickValues:function(){return this.scale.domain()},getCategories:function(){return this.scale.domain()},setCategories:function(t){this.categories=t,this.scale.domain(this.categories),this._updateOriginTickData(),this._calculateTickData()},_calculateTickData:function(){this._updateOriginTickData(),this._updateTickContent();var t=i.pick(this.startIndex,0),e=i.pick(this.endIndex,this.categories.length-1);this._updateTickData(t,e+1)},axisZoom:function(t,e){var a,r,n=this.vanchart.getPlotBounds();this.isHorizontal()?(a=Math.min(t[0],e[0])-n.x,r=Math.max(t[0],e[0])-n.x):(a=Math.min(t[1],e[1])-n.y,r=Math.max(t[1],e[1])-n.y);var o=this.scale.domain(),s=this.scale.rangeExtent();s=this._getRangeWithMinMax(s[0],s[1]);var l=d3.scale.quantize().domain(s).range(o),h=i.indexInArray(this.categories,l(a)),c=i.indexInArray(this.categories,l(r));this.updateAxisScale(Math.min(h,c),Math.max(h,c)),this.render.zoomRefresh()},updateAxisScale:function(t,e){var a=this.scale.domain();if(-1!=t&&-1!=e){for(var i=[],r=t;e>=r;r++)i.push(a[r]);this.startIndex=t,this.endIndex=e;var n,o=this._getRange();n=this.isRangePoints?Math.abs(o[0]-o[1])/Math.max(i.length-1,1):Math.abs(o[0]-o[1])/i.length;var s=Math.min(o[0],o[1]),l=Math.max(o[0],o[1]),h=t,c=e;if(this.isAxisReversed()){var d=this.categories.length-1;h=Math.min(d-t,d-e),c=Math.max(d-t,d-e)}this.isHorizontal()?(s-=h*n,l+=(this.categories.length-c-1)*n):(s-=(this.categories.length-c-1)*n,l+=h*n);var u=this._getRangeWithMinMax(s,l);this.isRangePoints?this.scale.rangeRoundPoints(u):this.scale.rangeBands(u),this._updateOriginTickData(),this._calculateTickData()}},_getRangeWithMinMax:function(t,e){var a=this.componentOption;return this.isHorizontal()?a.reversed?[e,t]:[t,e]:a.reversed?[t,e]:[e,t]},_initZoomStatus:function(){var t=this.vanchart.getComponent(r.ZOOM_COMPONENT);if(t&&t.zoomToolEnabled()&&i.isSupportSVG())if(this.vanchart.isInitStatus){this.vanchart.isInitStatus=!1;var e=0,a=this.categories.length-1,n=t.componentOption.zoomTool;n.from&&-1!=i.indexInArray(this.categories,n.from)&&(e=i.indexInArray(this.categories,n.from)),n.to&&-1!=i.indexInArray(this.categories,n.to)&&(a=i.indexInArray(this.categories,n.to)),this.updateAxisScale(Math.min(e,a),Math.max(e,a))}else this.updateAxisScale(this.startIndex,this.endIndex)}},i.inherit(e,a),t("../ComponentLibrary").register(r.CATEGORY_AXIS_COMPONENT,e),e}),a("component/ValueAxis",["require","./Base","./BaseAxis","../utils/BaseUtils","../utils/QueryUtils","../Constants","../Constants","../ComponentLibrary"],function(t){function e(t,e,i,r){a.call(this,t,e,r),this.refresh(e,i)}var a=(t("./Base"),t("./BaseAxis")),i=t("../utils/BaseUtils"),r=t("../utils/QueryUtils"),n=t("../Constants"),n=t("../Constants"),o=5,s=4,l=100;return e.prototype={constructor:e,type:n.VALUE_AXIS_COMPONENT,_doLayout:function(){var t=this.option.series,e=this.option.plotOptions,a=this.componentOption;this.byPercent=!1;for(var i=a.axisIndex,n=this.componentType,o=0,s=t.length;s>o&&!this.byPercent;o++){var l=t[o];if(r.queryList([l,e],"stackByPercent")&&this._getSeryLocation(l)!=this.getPosition()){var h=l[n]||0;this.byPercent=h==i}}var c=this._calculateMinMaxValue();this._calculateNiceDomain(c.minValue,c.maxValue),this._updateAxisBounds()},_doMonitorLayout:function(){null!=this.getRender()?this._doValueKindAxisMonitorLayout():this._doLayout()},_calculateNiceDomain:function(t,e){var a=this.componentOption;a.log&&1!=a.log?this._calculateLogNiceDomain(t,e):this.byPercent?this._calculatePercentValueDomain():this._calculateValueNiceDomain(t,e)},_calculatePercentValueDomain:function(){var t=this.componentOption,e=i.pick(t.min,0),a=i.pick(t.max,1),r=i.pick(t.tickInterval,.25);this.valueList=[];for(var n=e;a>=n;n=i.accAdd(n,r))this.valueList.push(n);this.scale=this.scale?this.scale.domain([e,a]):d3.scale.linear().domain([e,a])},_calculateFixedTickIntervalLinearValueList:function(t,e,a){var r=[],n=this.componentOption;if(i.hasDefined(n.min)&&i.hasDefined(n.max))t=n.min,e=n.max;else if(i.hasDefined(n.min))t=n.min;else if(i.hasDefined(n.max))e=n.max,t=t>=0?0:-1*Math.ceil(Math.abs(t/a))*a;else{t=t>=0?0:t;var o=Math.ceil((e-t)/a),s=d3.scale.linear().domain([t,e]).nice(o).domain();t=s[0],e=s[1]}for(var l=t;e>=l;l=i.accAdd(l,a))r.push(l);return r},_calculateLinearValueList:function(t,e){var a,r=this.componentOption;this.valueList=[];var o=this._getDefaultTickCount();if(r.tickInterval)a=r.tickInterval,this.valueList=this._calculateFixedTickIntervalLinearValueList(t,e,a);else{if(i.hasDefined(r.min)&&i.hasDefined(r.max))t=r.min,e=r.max,t>=e&&(e=t+l),a=(e-t)/o;else if(i.hasDefined(r.min))t=r.min,t>=e&&(e=t+(0==e?100:Math.abs(e))),a=this._linearTickDomain([t,e],o),e=Math.ceil((e-t)/a)*a+t;else if(i.hasDefined(r.max))e=r.max,t>=0?(t=0==e?-100:0>e?e-Math.abs(e):0,a=this._linearTickDomain([t,e],o)):(a=this._linearTickDomain([Math.min(t,e),Math.max(t,e)],o),t=e-Math.abs(Math.ceil((e-t)/a)*a));else{t=t>=0?0:t,e=t>=e?t+l:e;var s=d3.scale.linear().domain([t,e]).nice(o).domain();t=s[0],e=s[1],a=i.accDiv(e-t,o),this.option.chartType!=n.RADAR_CHART&&(t=t>=0?t:i.accAdd(t,-a),e+=a)}for(var h=t;e>=h||1e-6>h-e;h=i.accAdd(h,a))this.valueList.push(h)}},_calculateValueNiceDomain:function(t,e){this._calculateLinearValueList(t,e);var a=this.componentOption;e=i.hasDefined(a.max)?a.max:this.valueList[this.valueList.length-1],t=i.hasDefined(a.min)?a.min:this.valueList[0],t>=e&&(e=t+l);var r=this.valueList;this.valueList=[];var n=this;r.forEach(function(a){a>=t&&e>=a&&n.valueList.push(a)}),this.scale=this.scale?this.scale.domain([t,e]):d3.scale.linear().domain([t,e])},_calculateLogNiceDomain:function(t,e){var a=this.componentOption,r=a.log,n=parseInt(i.pick(a.tickInterval,1));this.valueList=[],t=t>=1?1:t,t=0>=t?1:t,t=i.pick(a.min,t),e=i.pick(a.max,e),t=Math.pow(r,Math.floor(i.log(r,t))),e=Math.pow(r,Math.ceil(i.log(r,e))),this.scale=this.scale?this.scale.domain([t,e]):d3.scale.log().base(r).domain([t,e]);for(var o=0;t*Math.pow(r,o)<=e;)this.valueList.push(t*Math.pow(r,o)),o+=n},_linearTickDomain:function(t,e){e=e||this._getDefaultTickCount();var a=t[1]-t[0],i=Math.pow(10,Math.floor(Math.log(a/e)/Math.LN10)),r=e/a*i;return.15>=r?i*=10:.35>=r?i*=5:.75>=r&&(i*=2),i},_calculateMinMaxValue:function(){for(var t=Number.MAX_VALUE,e=-t,a=this.componentOption,i=this.option.series,r={},n=0,o=i.length;o>n;n++){var s=i[n],l=s[this.componentType]||0;l==a.axisIndex&&this.vanchart.isSeriesVisible(n)&&this._getSeriesValue(r,n)}for(var h in r)for(var c=r[h],d=0,u=c.length;u>d;d++)isNaN(c[d])||(t=Math.min(t,c[d]),e=Math.max(e,c[d]));return t>e?(t=0,e=100):e==t&&(0>t?e=0:0==t?e=100:t=0),{minValue:t,maxValue:e}},_getSeriesValue:function(t,e){var a=this.option.series[e];if(a.data&&a.data.length){var r=a.name||"",o=this._getSeryLocation(a),s=o==n.TOP||o==n.BOTTOM;if(i.hasNotDefined(a.stack)||s==this.isHorizontal()){t[r]=t[r]||[];for(var l=a.data,h=0,c=l.length;c>h;h++){var d=this.getValueFromData(l[h]);i.isArray(d)?t[r].concat(d):t[r].push(d)}}else{var u=a.stack+"STACK_POSITIVE",g=a.stack+"STACK_NEGATIVE";t[u]=t[u]||[],t[g]=t[g]||[];for(var l=a.data,h=0,c=l.length;c>h;h++){var d=this.getValueFromData(l[h]);+d>0?null!=t[u][h]&&void 0!=t[u][h]?t[u][h]+=d:t[u][h]=d:null!=t[g][h]&&void 0!=t[g][h]?t[g][h]+=d:t[g][h]=d}}}},getValueFromData:function(t){
    var e=this.componentType==n.X_AXIS_COMPONENT?0:1,a=this.componentType==n.X_AXIS_COMPONENT?"x":"y",r=i.isArray(t)?t[e]:t[a];return r=i.pick(r,t),r=+r,isNaN(r)?"-":r},_getDefaultTickCount:function(){return this.option.chartType==n.RADAR_CHART?s:o},getStartPos:function(){return this.scale(this.getStartPosValue())},getStartPosValue:function(){var t=this.componentOption;return t.log&&1!=t.log?1:0},isByPercent:function(){return this.byPercent},_getTickValues:function(){return this.valueList},_getTickValuesWithEndValue:function(){var t=i.clone(this.valueList),e=this.scale.domain()[1];return t.length&&t[t.length-1]<e&&t.push(e),t},_getTickInterval:function(){return this.valueList[1]-this.valueList[0]},axisZoom:function(t,e){var a,i,r=this.vanchart.getPlotBounds();this.isHorizontal()?(a=Math.min(t[0],e[0])-r.x,i=Math.max(t[0],e[0])-r.x):(a=Math.min(t[1],e[1])-r.y,i=Math.max(t[1],e[1])-r.y);var n=this.scale.invert(a),o=this.scale.invert(i),s=Math.min(n,o),l=Math.max(n,o);this._updateDomain(s,l),this.render.zoomRefresh()},_updateDomain:function(t,e){var a=this.scale.domain();this._calculateNiceDomain(Math.max(t,a[0]),Math.min(e,a[1])),this._updateOriginTickData(),this._calculateTickData()}},i.inherit(e,a),t("../ComponentLibrary").register(n.VALUE_AXIS_COMPONENT,e),e}),a("component/DateAxis",["require","./Base","./BaseAxis","../utils/BaseUtils","../Constants","../utils/Formatter","../ComponentLibrary"],function(t){function e(t,e,i,r){a.call(this,t,e,r),this.refresh(e,i)}var a=(t("./Base"),t("./BaseAxis")),i=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/Formatter"),o=5,s=864e5,l=31*s;return e.prototype={constructor:e,type:r.DATE_AXIS_COMPONENT,_doLayout:function(){var t=this._calculateMinMaxValue();this._calculateNiceDomain(t.minValue,t.maxValue),this._updateAxisBounds()},_doMonitorLayout:function(){this._doValueKindAxisMonitorLayout()},_calculateFixedTickIntervalLinearValueList:function(t,e,a){var r=[],n=this.componentOption;if(i.hasDefined(n.min)&&i.hasDefined(n.max))t=n.min,e=n.max;else if(i.hasDefined(n.min))t=n.min;else if(i.hasDefined(n.max)){e=n.max;for(var o=e;o>t;)o=i.accAdd(o,-a);t=o}for(var s=t;e>=s;s=i.accAdd(s,a))r.push(s);return r},_calculateNiceDomain:function(t,e){var a,r=this.componentOption;if(this.valueList=[],r.tickInterval)if(a=r.tickInterval,i.hasDefined(r.min)&&i.hasDefined(r.max)){t=r.min,e=r.max;for(var n=t;e>=n;n=i.accAdd(n,a))this.valueList.push(n)}else if(i.hasDefined(r.min)){t=r.min;for(var n=t;e>=n;n=i.accAdd(n,a))this.valueList.push(n);e=n}else if(i.hasDefined(r.max)){e=r.max;for(var n=e;n>t;n=i.accAdd(n,-a))this.valueList.push(n);this.valueList.reverse()}else for(var n=t;e>=n;n=i.accAdd(n,a))this.valueList.push(n);else{i.hasDefined(r.min)&&i.hasDefined(r.max)?(t=r.min,e=r.max,a=(e-t)/o):i.hasDefined(r.min)?(t=r.min,a=this._linearTickDomain([t,e],o),e=Math.ceil((e-t)/a)*a+t):i.hasDefined(r.max)?(e=r.max,a=this._linearTickDomain([t,e],o)):(a=(e-t)/o,e+=a,t-=a);for(var n=t;e>=n;n=i.accAdd(n,a))this.valueList.push(n)}t=i.int2date(t),e=i.int2date(e),this.scale=this.scale?this.scale.domain([t,e]):d3.time.scale().domain([t,e]),this._calculateDateFormat(a)},_calculateDateFormat:function(t){var e="Dyyyy-MM-dd";e=s>t?"Dyyyy-M-d H:mm":l>t?"Dyyyy-M-d":"Dyyyy-MM",this.dateFormat=e;var a=this.componentOption,i=a.formatter;"object"==typeof i&&(this.dateFormat=i.format||this.dateFormat)},_getTickContent:function(t,e){return e?"object"==typeof e?n.format(t,e.format||this.dateFormat):i.getFormatterFunction(e).call(t):t},_getTickInterval:function(){return this.valueList[1]-this.valueList[0]},_getTickValues:function(){var t=[];return this.valueList.forEach(function(e){t.push(i.int2date(e))}),t},_linearTickDomain:function(t,e){e=e||o;var a=t[1]-t[0],i=Math.pow(10,Math.floor(Math.log(a/e)/Math.LN10)),r=e/a*i;return.15>=r?i*=10:.35>=r?i*=5:.75>=r&&(i*=2),i},_calculateMinMaxValue:function(){for(var t=Math.ceil(Number.MAX_VALUE),e=-t,a=this.componentOption,r=this.option.series,n=!1,o=0,s=r.length;s>o;o++){var l=r[o],h=l[this.componentType]||0;if(h==a.axisIndex&&this.vanchart.isSeriesVisible(o))for(var c=l.data,o=0,s=c.length;s>o;o++){var d=this.getValueFromData(c[o]);d.getTime&&(n=!0,d=i.date2int(d),t=Math.min(t,d),e=Math.max(e,d))}}return n||(t=e=(new Date).getTime()),e=t>=e?t+1e3:e,{minValue:t,maxValue:e}},getValueFromData:function(t){var e=this.componentType==r.X_AXIS_COMPONENT?0:1,a=this.componentType==r.X_AXIS_COMPONENT?"x":"y",n=i.isArray(t)?t[e]:t[a];return i.object2date(n)},getShowValue:function(t){return n.format(t,this.dateFormat)},axisZoom:function(t,e){var a,r,n=this.vanchart.getPlotBounds();this.isHorizontal()?(a=Math.min(t[0],e[0])-n.x,r=Math.max(t[0],e[0])-n.x):(a=Math.min(t[1],e[1])-n.y,r=Math.max(t[1],e[1])-n.y);var o=this.scale.invert(a),s=this.scale.invert(r);o=i.date2int(o),s=i.date2int(s);var l=Math.min(o,s),h=Math.max(o,s);this._updateDomain(l,h),this.render.zoomRefresh()},_updateDomain:function(t,e){var a=this.scale.domain();this._calculateNiceDomain(Math.max(t,a[0]),Math.min(e,a[1])),this._updateOriginTickData(),this._calculateTickData()}},i.inherit(e,a),t("../ComponentLibrary").register(r.DATE_AXIS_COMPONENT,e),e}),a("component/Axis",["require","./Base","../utils/BaseUtils","../Constants","../render/AxisRender","../render/CategoryAxisSvgRender","../render/CategoryAxisVmlRender","../render/ValueAxisSvgRender","../render/ValueAxisVmlRender","../render/DateAxisSvgRender","../render/DateAxisVmlRender","./CategoryAxis","./ValueAxis","./DateAxis","../ComponentLibrary"],function(t){function e(t,e,i){a.call(this,t,e,i),this._axisList=[],this.refresh(e)}var a=t("./Base"),i=t("../utils/BaseUtils"),r=t("../Constants");return t("../render/AxisRender"),t("../render/CategoryAxisSvgRender"),t("../render/CategoryAxisVmlRender"),t("../render/ValueAxisSvgRender"),t("../render/ValueAxisVmlRender"),t("../render/DateAxisSvgRender"),t("../render/DateAxisVmlRender"),e.prototype={constructor:e,refresh:function(e){this._refreshOption(e);var a=t("./CategoryAxis"),n=t("./ValueAxis"),o=t("./DateAxis"),s=this.componentOption;i.isArray(s)||(s=[s]);for(var l=s.length,h=l;h<this._axisList.length;h++)this._axisList[h].remove(),this._axisList[h]=null;for(var h=l-1;h>=0;h--)if(s[h].axisIndex=h,this._axisList[h]&&this._axisList[h].type!=s[h].type&&(this._axisList[h].remove(),this._axisList[h]=null),this._axisList[h])this._axisList[h].refresh(e,s[h]);else{var c,d=s[h].type||r.VALUE_AXIS_COMPONENT;d==r.VALUE_AXIS_COMPONENT?c=n:d==r.CATEGORY_AXIS_COMPONENT?c=a:d==r.DATE_AXIS_COMPONENT&&(c=o),this._axisList[h]=new c(this.vanchart,this.option,s[h],this.componentType)}},updateAxisRange:function(){for(var t=0,e=this._axisList.length;e>t;t++)this._axisList[t]._updateRange(),this._axisList[t]._calculateTickData(),this._axisList[t]._initZoomStatus()},getAxis:function(t){return this._axisList[t]},axisZoom:function(t,e){this._axisList.forEach(function(a){a.axisZoom(t,e)})},updateStatus:function(){this._axisList.forEach(function(t){t.updateStatus()})},dealOnZero:function(){this._axisList.forEach(function(t){t.dealOnZero()})},getAllAxis:function(){return this._axisList},getAxisRender:function(){var t=[];return this._axisList.forEach(function(e){var a=e.getRender();a&&t.push(a)}),t}},i.inherit(e,a),t("../ComponentLibrary").register(r.AXIS_COMPONENT,e),e}),a("render/LegendSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/BezierEasing","../Constants","./LegendIconFactory","./RenderLibrary"],function(t){function e(t){this.legend=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../utils/BezierEasing"),n=t("../Constants"),o=t("./LegendIconFactory"),s="legend-item",l="legend-marker",h="legend-label",c="legend-gradual-background",d="legend-pages",u="rgb(67,67,72)",g="rgb(204,204,204)";return e.prototype={constructor:e,render:function(){var t=this.legend.componentOption,e=this.legend.bounds,a=this.legend.getVanchartRender().getRenderRoot(),r=this.legend.vanchart.getIDPrefix(),n=c+r;this._legendG||(this._legendG=a.append("g")),t.backgroundColor&&this._createGradualDefs(this._legendG,t.backgroundColor,n),this._legendG.attr("transform","translate("+e.x+","+e.y+")");var o=t.borderWidth||0,s=i.rectSubPixelOpt(0,0,e.width,e.height,o);if(t.shadow){for(var l=o%2==0?0:.5,h=[5,3,1],d=[.05,.1,.15],u=0;3>u;u++)this._legendG.append("rect").attr("x",l).attr("y",l).attr("width",e.width).attr("height",e.height).attr("transform","translate(1, 1)").attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill","none").style("stroke","black").style("stroke-width",h[u]).style("stroke-opacity",d[u]);this._legendG.append("rect").attr("x",s.x).attr("y",s.y).attr("width",s.width).attr("height",s.height).attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill","white")}this._legendG.append("rect").attr("class","legend-background").attr("x",s.x).attr("y",s.y).attr("width",s.width).attr("height",s.height).attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill",function(){return t.backgroundColor?"string"==typeof t.backgroundColor?t.backgroundColor:"url(#"+n+")":"none"}).style("stroke",t.borderColor).style("stroke-width",t.borderWidth),this.legend.isHorizontal()?this._renderHorizontal():this._renderVertical()},_renderVerticalWithPages:function(){var t=this.legend.bounds.width,e=this.legend.bounds.height,a=this.legend.vanchart.getIDPrefix()+d;this._legendG.append("defs").append("clipPath").attr("id",a).append("rect").attr("width",t).attr("height",e);var i=this._legendG.append("g").attr("clip-path","url(#"+a+")"),n=i.append("g");this._renderVerticalWithoutPages(n);var o=40,s=this._legendG.append("g").attr("transform","translate(0,"+e+")"),l=(t-o)/2,h=(t+o)/2,c=e-this.legend.getPadding(),f=this.legend.getPreHeight(),p=Math.ceil((f-e)/c)+1,m=t/2,v=s.append("text").attr("x",m).attr("y",0).attr("dy",".71em").attr("text-anchor","middle").text("1/"+p).style("font-Family","Verdana").style("font-Size","14px"),y=0,_=s.append("path").attr("d",this._prePageButtonPath(l)).style("cursor","pointer").style("fill",g).on("click",function(){if(!(0>=y)){var t=d3.transform(n.attr("transform")).translate,e=t[0],a=1==y?0:t[1]+c;n.transition().duration(500).ease(r.css.swing).attr("transform","translate("+e+","+a+")"),y--;var i=y+1;v.text(i+"/"+p),b.style("fill",y==p-1?g:u),d3.select(this).style("fill",0>=y?g:u)}}),b=s.append("path").attr("d",this._nextPageButtonPath(h)).style("cursor","pointer").style("fill",u).on("click",function(){if(y!=p-1){var t=d3.transform(n.attr("transform")).translate,e=t[0],a=t[1]-c;n.transition().duration(800).ease(r.css.swing).attr("transform","translate("+e+","+a+")"),y++;var i=y+1;v.text(i+"/"+p),d3.select(this).style("fill",y==p-1?g:u),_.style("fill",0>=y?g:u)}})},_prePageButtonPath:function(t){var e=12,a=0,i=t-e/2,r=e/2*Math.sqrt(3),n=t+e/2,o=r;return"M"+t+","+a+"L"+i+","+r+"L"+n+","+o+"Z"},_nextPageButtonPath:function(t){var e=12,a=0,i=t-e/2,r=a,n=t+e/2,o=a,s=t,l=e/2*Math.sqrt(3);return"M"+i+","+r+"L"+n+","+o+"L"+s+","+l+"Z"},_renderVerticalWithoutPages:function(t){var e=this.legend.getLegendItems(),a=this,r=this.legend,n=this.legend.componentOption,c=this.legend.getPadding(),d=this.legend.getGap();t.selectAll("g."+s).data(e).enter().append("g").attr("class",s).each(function(t,e){var s=d3.select(this),u=o.getLegendIconSize(t.legendIconType),g=r.getPreHeight(e);s.append("path").attr("class",l).attr("transform","translate("+c+","+g+")").attr("d",function(){return o.getLegendIconPath(t.legendIconType)}).style("fill",function(t){return t.visible?t.color:t.hiddenColor}),s.append("text").attr("class",h).text(function(t){return t.itemName}).attr("x",c+u.width+d).attr("y",g+u.height/2).attr("dy",".35em").call(i.setTextStyle,n.style).style("fill",function(t){return t.visible?n.style.color:t.hiddenColor}),s.call(a._bindMouseEvent.bind(a))})},_renderVertical:function(){this.legend.hasEnoughVerticalSpace()?this._renderVerticalWithoutPages(this._legendG):this._renderVerticalWithPages()},_renderHorizontal:function(){for(var t=this.legend.getPadding(),e=this.legend.getHorizontalGap(),a=this.legend.getGap(),r=this.legend.getHorizontalLineItems(),n=this,c=this.legend.componentOption,d=this.legend.getLineHeight(),u=this.legend.bounds.width,g=t,f=0,p=r.length;p>f;f++){for(var m=r[f],v=this.legend.getHorizontalItemsWidth(m),y=(u-v)/2,_=[y],b=1;b<m.length;b++){var x=m[b-1],L=o.getLegendIconSize(x.legendIconType),C=i.getTextDimension(x.itemName,c.style,!0);y+=L.width+a+C.width+e,_.push(y)}this._legendG.append("g").selectAll("g."+s).data(m).enter().append("g").attr("class",s).each(function(t,e){var r=d3.select(this),s=o.getLegendIconSize(t.legendIconType),d=_[e];r.append("path").attr("class",l).attr("transform","translate("+d+","+g+")").attr("d",function(){return o.getLegendIconPath(t.legendIconType)}).style("fill",function(t){return t.color}),r.append("text").attr("class",h).text(function(t){return t.itemName}).attr("x",d+s.width+a).attr("y",g+s.height/2).attr("dy",".35em").call(i.setTextStyle,c.style),r.call(n._bindMouseEvent.bind(n))}),g+=d[f]+t}},_bindMouseEvent:function(t){var e=this.legend,a=this.legend.vanchart,i=this.legend.componentOption;t.style("cursor","pointer").on("mouseenter",function(t){d3.select(this).select("."+h).style("fill",t.hoverColor)}).on("mouseleave",function(t){var e=t.visible?i.style.color:t.hiddenColor;d3.select(this).select("."+h).style("fill",e)}).on("click",function(t){t.visible=!t.visible,e._getSeriesType(t.seriesIndex)==n.PIE_CHART?a.updatePieChartData(t.itemName,t.visible):(e.option.series[t.seriesIndex].visible=t.visible,a.updatePieChartData(t.seriesName,t.visible));var r=t.visible?i.style.color:t.hiddenColor,o=t.visible?t.color:t.hiddenColor;d3.select(this).select("."+l).style("fill",o),d3.select(this).select("."+h).style("fill",r),t.visible?a.refreshAddData():a.refreshDeleteData()})},dataChangeRender:function(){},monitorRender:function(){this.refreshRestore()},refreshRestore:function(){var t=this._legendG.selectAll("g."+s),e=this.legend.componentOption;t.select("path").style("fill",function(t){return t.visible?t.color:t.hiddenColor}),t.select("text").style("fill",function(t){return t.visible?e.style.color:t.hiddenColor})}},i.inherit(e,a),t("./RenderLibrary").register(n.LEGEND_SVG,e),e}),a("render/LegendVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./LegendIconFactory","./RenderLibrary"],function(t){function e(t){this.legend=t,this.markerSet=[],this.labelSet=[],this.rectSet=[],this.pageButton=[],this.background=[]}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=t("./LegendIconFactory"),o="rgb(67,67,72)",s="rgb(204,204,204)";return e.prototype={constructor:e,render:function(){var t=this.legend.componentOption,e=this.legend.bounds,a=this.legend.getVanchartRender().getRenderRoot();if(t.shadow){for(var i=t.borderWidth||0,r=i%2==0?.5:0,n=[5,3,1],o=[.05,.1,.15],s=0;3>s;s++)this.background.push(a.rect(e.x+r,e.y+r,e.width,e.height).attr({fill:"none",stroke:"rgb(0,0,0)","stroke-opacity":o[s],"stroke-width":n[s],rx:t.borderRadius,ry:t.borderRadius}).transform("t1,1"));this.background.push(a.rect(e.x,e.y,e.width,e.height).attr({fill:"white",stroke:"none",rx:t.borderRadius,ry:t.borderRadius}))}this.background.push(a.rect(e.x,e.y,e.width,e.height).attr("class","legend-background").attr("rx",t.borderRadius).attr("ry",t.borderRadius).attr("fill",this._getRaphaelFill(t.backgroundColor)).attr("fill-opacity",this._getFillOpacity(t.backgroundColor)).attr("stroke",t.borderColor).attr("stroke-width",t.borderWidth)),this.legend.isHorizontal()?this._renderHorizontal(a):this._renderVertical(a)},_renderWithPages:function(t){var e=this.legend.getVerticalPages();this._renderWithoutPages(t,e[0],0);var a=this.legend.bounds.x,i=this.legend.bounds.y,r=this.legend.bounds.width,n=this.legend.bounds.height,l=40,h=a+(r-l)/2,c=a+(r+l)/2,d=i+n+this.legend.getPadding(),u=a+r/2,g=e.length,f=t.text(u,d,"1/"+g).attr({textAnchor:"middle","font-family":"Verdana","font-size":"14"}),p=0,m=this,v=t.path(this._prePageButtonPath(h,d)).attr({cursor:"pointer",fill:s,stroke:"none"}).click(function(){if(!(0>=p)){p--;var a=p+1;f.attr("text",a+"/"+g),m._clearAllLegendItems(),m._renderWithoutPages(t,e[p],m._preItemCount(p)),y.attr("fill",p==g-1?s:o),v.attr("fill",0>=p?s:o)}}),y=t.path(this._nextPageButtonPath(c,d)).attr({cursor:"pointer",fill:o,stroke:"none"}).click(function(){if(p!=g-1){p++;var a=p+1;f.attr("text",a+"/"+g),m._clearAllLegendItems(),m._renderWithoutPages(t,e[p],m._preItemCount(p)),y.attr("fill",p==g-1?s:o),v.attr("fill",0>=p?s:o)}});this.pageButton.push(f),this.pageButton.push(v),this.pageButton.push(y)},_preItemCount:function(t){for(var e=this.legend.getVerticalPages(),a=0,i=0;t>i;i++)a+=e[i].length;return a},_prePageButtonPath:function(t,e){var a=12,i=t-a/2,r=a/2*Math.sqrt(3)+e,n=t+a/2,o=r;return"M"+t+","+e+"L"+i+","+r+"L"+n+","+o+"Z"},_nextPageButtonPath:function(t,e){var a=12,i=t-a/2,r=e,n=t+a/2,o=e,s=t,l=a/2*Math.sqrt(3)+e;return"M"+i+","+r+"L"+n+","+o+"L"+s+","+l+"Z"},_renderWithoutPages:function(t,e,a){e=e||this.legend.getLegendItems(),a=a||0;for(var r=this.legend.componentOption,o=this.legend.getPadding(),s=this.legend.getGap(),l=this.legend.bounds.x,h=this.legend.bounds.y,c=this.legend.bounds.width,d=i.cssNormalization(r.style),u=0,g=e.length;g>u;u++){var f=e[u],p=n.getLegendIconSize(f.legendIconType),m=a+u,v=this.legend.getPreHeight(a,m),y=this.legend.getVerticalItemHeight(m),_=l+o,b=h+v,x=t.rect(l,h+v,c,y).attr({fill:"white","fill-opacity":0,stroke:"none"}),L=f.visible?f.color:f.hiddenColor,C=f.visible?r.style.color:f.hiddenColor,T=t.path(n.getLegendIconPath(f.legendIconType)).attr("fill",L).attr("stroke-width",0).transform("t"+_+","+b),A=t.text(_+p.width+s,b+p.height/2,f.itemName).attr("text-anchor","start").attr(d).attr("fill",C);this._bindDataAndMarkerEvent(x,f,u),this._bindDataAndMarkerEvent(T,f,u),this._bindDataAndLabelEvent(A,f,u),this.rectSet.push(x),this.markerSet.push(T),this.labelSet.push(A)}},_clearAllLegendItems:function(){this.markerSet.forEach(function(t){t.remove()}),this.labelSet.forEach(function(t){t.remove()}),this.rectSet.forEach(function(t){t.remove()}),this.markerSet=[],this.labelSet=[],this.rectSet=[]},_renderVertical:function(t){this.legend.hasEnoughVerticalSpace()?this._renderWithoutPages(t):this._renderWithPages(t)},_renderHorizontal:function(t){for(var e=this.legend.getPadding(),a=this.legend.getHorizontalGap(),r=this.legend.getGap(),o=this.legend.getHorizontalLineItems(),s=this.legend.componentOption,l=i.cssNormalization(s.style),h=this.legend.getLineHeight(),c=this.legend.bounds.width,d=this.legend.bounds.x,u=this.legend.bounds.y,g=u+e,f=0,p=0,m=o.length;m>p;p++){for(var v=o[p],y=this.legend.getHorizontalItemsWidth(v),_=d+(c-y)/2,b=[_],x=1,L=v.length;L>x;x++){var C=v[x-1],T=n.getLegendIconSize(C.legendIconType),A=i.getTextDimension(C.itemName,s.style,!0);_+=T.width+r+A.width+a,b.push(_)}for(var x=0,L=v.length;L>x;x++){var k=v[x],T=n.getLegendIconSize(k.legendIconType),R=this.legend.getHorizontalItemWidth(x),O=h[p]+e,S=t.rect(b[x],g,R,O).attr({fill:"white","fill-opacity":0,stroke:"none"}),P=k.visible?k.color:k.hiddenColor,w=k.visible?s.style.color:k.hiddenColor,D=t.path(n.getLegendIconPath(k.legendIconType)).attr("fill",P).attr("stroke-width",0).transform("t"+b[x]+","+g),E=t.text(b[x]+T.width+r,g+T.height/2,k.itemName).attr("text-anchor","start").attr(l).attr("fill",w);this._bindDataAndMarkerEvent(S,k,f),this._bindDataAndMarkerEvent(D,k,f),this._bindDataAndLabelEvent(E,k,f),f++,this.rectSet.push(S),this.markerSet.push(D),this.labelSet.push(E)}g+=h[p]+e}},_clickHandler:function(t,e){var a=this.legend,i=this.legend.vanchart,n=this.legend.componentOption;t.visible=!t.visible,a._getSeriesType(t.seriesIndex)==r.PIE_CHART?i.updatePieChartData(t.itemName,t.visible):(a.option.series[t.seriesIndex].visible=t.visible,i.updatePieChartData(t.seriesName,t.visible));var o=t.visible?t.color:t.hiddenColor;this.markerSet[e].attr("fill",o);var s=t.visible?n.style.color:t.hiddenColor;this.labelSet[e].attr("fill",s),t.visible?i.refreshAddData():i.refreshDeleteData()},_bindDataAndMarkerEvent:function(t,e,a){t.data("data",e),t.attr("cursor","pointer");var i=this;t.click(function(){i._clickHandler(e,a)})},_bindDataAndLabelEvent:function(t,e,a){var i=this.legend.componentOption;t.data("data",e),t.attr("cursor","pointer"),t.mousemove(function(){this.attr("fill",e.hoverColor)}),t.mouseout(function(){var t=e.visible?i.style.color:e.hiddenColor;this.attr("fill",t)});var r=this;t.click(function(){r._clickHandler(e,a)})},refreshRestore:function(){this._clearAllLegendItems(),this.background.forEach(function(t){t.remove()}),this.pageButton.forEach(function(t){t.remove()}),this.background=[],this.pageButton=[],this.render()},dataChangeRender:function(){}},i.inherit(e,a),t("./RenderLibrary").register(r.LEGEND_VML,e),e}),a("component/Legend",["require","./Base","../utils/BaseUtils","../Constants","../utils/QueryUtils","../render/LegendIconFactory","../render/LegendSvgRender","../render/LegendVmlRender","../ComponentLibrary"],function(t){function e(t,e,i){this.hasEnoughSpace=!1,a.call(this,t,e,i),this.refresh(e)}var a=t("./Base"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/QueryUtils"),o=t("../render/LegendIconFactory"),s=5,l=8,h=52,c=4,d=16;return t("../render/LegendSvgRender"),t("../render/LegendVmlRender"),e.prototype={constructor:e,_doLayout:function(){if(this._needLayout){this._needLayout=!1,this.items=[];var t={};this._addNormalLegendItems(t),this._addPieLegendItems(t)}var e=this._getLegendSize();this._setComponentBounds(this.componentOption.position||r.RIGHT_TOP,e),this._resetLegendBounds(),this._calculateVerticalPages()},_calculateVerticalPages:function(){var t=this.componentOption.position||r.RIGHT;if(this.pages=[],t!=r.TOP&&t!=r.BOTTOM){var e=this.bounds.height-s,a=this.getPreHeight(this.items.length);if(e>=a)return void(this.hasEnoughSpace=!0);this.hasEnoughSpace=!1;for(var i=0,n=0,a=0,o=0,l=this.items.length;l>o;o++){var h=a;a=this.getPreHeight(n,o+1),a>e&&(i++,n=o,this.bounds.height=h),this.pages[i]=this.pages[i]||[],this.pages[i].push(this.items[o])}}},_addNormalLegendItems:function(t){for(var e=this.option.series,a=0,i=e.length;i>a;a++)if(this._getSeriesType(a)!=r.PIE_CHART){var o=this._getDefaultSeriesColor(a);o=n.queryList([e[a],this.option.plotOptions],"color")||o;var s={};this._mergeCommonLegendAttr(s,a),this.items.push(n.merge(s,{markerType:null,color:o},!0)),t[s.seriesName]=!0}},_addPieLegendItems:function(t){for(var e=this.option.series,a=0,i=e.length;i>a;a++)if(this._getSeriesType(a)==r.PIE_CHART)for(var o=e[a].data,s=0,l=o.length;l>s;s++){var h=this._getPieValueFromData(o[s],s);if(!t[h[0]]){t[h[0]]=!0;var c=this._getDefaultSeriesColor(s);c=n.queryList([e[a],this.option.plotOptions],"color")||c;var d={};this._mergeCommonLegendAttr(d,a),this.items.push(n.merge(d,{itemName:h[0],markerType:null,color:c},!0))}}},_mergeCommonLegendAttr:function(t,e){var a=this.componentOption,i=a.hiddenColor,r=a.hoverColor||a.style.color,o=this.option.series,s=o[e].name,l=this.items.length;n.merge(t,{seriesIndex:e,seriesName:s,itemName:s,itemIndex:l,visible:this.vanchart.isSeriesVisible(e),hiddenColor:i,hoverColor:r,legendIconType:this._getLegendType(e),lineIndex:0},!0)},updateStatus:function(){var t=this;this.items.forEach(function(e){e.visible=t.vanchart.isSeriesVisible(e.seriesIndex)})},_getLegendSize:function(){var t=this.componentOption,e=t.position||r.RIGHT,a=2*s;if(e==r.TOP||e==r.BOTTOM){var i=this._getTopAndBottomLegendSize()+a,n=this._maxHeight();return t.maxHeight?n:Math.min(n,i)}var i=this._getLeftAndRightLegendSize()+a,o=this.getPreHeight()+s,l=this.vanchart.getPlotBounds().height;l>o&&(i=Math.max(i,h));var c=this._maxWidth();return t.maxWidth?c:Math.min(c,i)},_getLeftAndRightLegendSize:function(){this.maxLabelWidth=0,this.maxLabelHeight=0,this.maxIconWidth=0,this.maxIconHeight=0;for(var t=0,e=this.items.length;e>t;t++){var a=i.getTextDimension(this.items[t].itemName,this.componentOption.style,!0);this.maxLabelWidth=Math.max(this.maxLabelWidth,a.width),this.maxLabelHeight=Math.max(this.maxLabelHeight,a.height);var r=o.getLegendIconSize(this.items[t].legendIconType);this.maxIconWidth=Math.max(this.maxIconWidth,r.width),this.maxIconHeight=Math.max(this.maxIconHeight,r.height)}return 2*s+this.maxIconWidth+l+this.maxLabelWidth},_getTopAndBottomLegendSize:function(){this.lineHeight=[];for(var t=this.vanchart.getPlotBounds(),e=t.width-4*s,a=0,r=0,n=0,h=0,c=this.items.length;c>h;h++){var u=this.items[h],g=o.getLegendIconSize(u.legendIconType),f=i.getTextDimension(u.itemName,this.componentOption.style,!0),p=g.width+l+f.width;e>a+p?(u.lineIndex=n,r=Math.max(r,f.height,g.height),a+=p+d):(this.lineHeight.push(r),n++,u.lineIndex=n,a=p,r=Math.max(f.height,g.height)),h==c-1&&this.lineHeight.push(r)}var m=0;return this.lineHeight.forEach(function(t){m+=t}),2*s+m+(this.lineHeight.length-1)*s},_resetLegendBounds:function(){var t=this.componentOption.position;if(t==r.LEFT||t==r.RIGHT||t==r.RIGHT_TOP){if(t==r.RIGHT||t==r.RIGHT_TOP){var e=this.vanchart.getToolbarHeight();this.bounds.y+=e,this.bounds.height-=e}var a=this.bounds.x+s,n=this.bounds.y+s,h=this.bounds.height-2*s,c=this.bounds.width-2*s,u=this.getPreHeight()+s;u=Math.min(u,h),n+=Math.round((h-u)/2),t==r.RIGHT_TOP||this.isFloat?this.bounds.height=u:this.bounds={x:a,y:n,width:c,height:u}}else{var a=this.bounds.x+s,n=this.bounds.y+s,h=this.bounds.height-2*s,c=this.bounds.width-2*s,g=c;if(1==this.lineHeight.length){g=2*s;for(var f=0,p=this.items.length;p>f;f++){var m=this.items[f],v=o.getLegendIconSize(m.legendIconType),y=i.getTextDimension(m.itemName,this.componentOption.style,!0);g+=v.width+y.width+l}g+=d*(this.items.length-1),a+=(c-g)/2}this.bounds={x:a,y:n,width:g,height:h}}},getLegendItems:function(){return this.items},getLineHeight:function(){return this.lineHeight},getPadding:function(){return s},getGap:function(){return l},getHorizontalGap:function(){return d},getLineGap:function(){return c},getPreHeight:function(){var t=0,e=this.items.length;1==arguments.length?e=arguments[0]:2==arguments.length&&(t=arguments[0],e=arguments[1]);for(var a=s,i=this.maxLabelHeight,r=t;e>r;r++){var n=this.items[r],l=o.getLegendIconSize(n.legendIconType);a+=Math.max(l.height,i)+c}return Math.floor(a)},getVerticalItemHeight:function(t){var e=s,a=this.maxLabelHeight,i=this.items[t],r=o.getLegendIconSize(i.legendIconType);return e+=Math.max(r.height,a)+c},getHorizontalItemWidth:function(t){var e=this.items[t],a=this.componentOption,r=o.getLegendIconSize(e.legendIconType),n=i.getTextDimension(e.itemName,a.style,!0);return r.width+l+n.width+d},getHorizontalItemsWidth:function(t){for(var e=this.componentOption,a=0,r=0,n=t.length;n>r;r++){var s=t[r],h=o.getLegendIconSize(s.legendIconType),c=i.getTextDimension(s.itemName,e.style,!0);a+=h.width+c.width+l}return a+=d*(t.length-1)},getHorizontalLineItems:function(){for(var t=[],e=0,a=this.items.length;a>e;e++){var i=this.items[e];t[i.lineIndex]=t[i.lineIndex]||[],t[i.lineIndex].push(i)}return t},getVerticalPages:function(){return this.pages},hasEnoughVerticalSpace:function(){return this.hasEnoughSpace}},i.inherit(e,a),t("../ComponentLibrary").register(r.LEGEND_COMPONENT,e),e}),a("component/Tooltip",["require","./Base","../utils/BaseUtils","../Constants","../utils/ColorUtils","../ComponentLibrary"],function(t){function e(t,e,i){a.call(this,t,e,i),this.refresh(e)}var a=t("./Base"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/ColorUtils"),o=.4;return e.prototype={constructor:e,_gCssText:"position:absolute;display:block;border-style:solid;white-space:nowrap;box-shadow:1px 1px 2px rgba(0,0,0,0.2);z-index:1;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;",_style:function(t){if(!t)return"";var e=[];if(t.animation&&!t.follow){var a="left "+o+"s,top "+o+"s";e.push("transition:"+a),e.push("-moz-transition:"+a),e.push("-webkit-transition:"+a),e.push("-o-transition:"+a)}if(t.style){var r=i.cssNormalization(t.style);for(var s in r)"color"==s?e.push(s+":"+n.colorToHex(r[s])):e.push(s+":"+r[s])}if(t.backgroundColor)if("string"==typeof t.backgroundColor)if(i.isSupportSVG())e.push("background-Color:"+t.backgroundColor);else{var l=n.colorToHexAlpha(t.backgroundColor);e.push("background-Color:"+l.hex),e.push("filter:alpha(opacity="+l.alpha+")")}else if("object"==typeof t.backgroundColor){var h=t.backgroundColor,c=n.colorToHex(h.startColor),d=n.colorToHex(h.endColor),u="left",g="left top",f="right top",p=1;h.x1==h.x2&&(u="top",g="left top",f="left bottom",p=0),e.push("background: -ms-linear-gradient("+u+", "+c+", "+d+")"),e.push("background-image: -moz-linear-gradient("+u+", "+c+", "+d+")"),e.push("background-image: -webkit-gradient(linear, "+g+", "+f+", color-stop(0, "+c+"), color-stop(1, "+d+"))"),e.push("filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="+c+", endColorstr="+d+", GradientType="+p+")")}null!=t.borderWidth&&e.push("border-width:"+t.borderWidth+"px"),null!=t.borderColor&&e.push("border-color:"+t.borderColor),null!=t.borderRadius&&(e.push("border-radius:"+t.borderRadius+"px"),e.push("-moz-border-radius:"+t.borderRadius+"px"),e.push("-webkit-border-radius:"+t.borderRadius+"px"),e.push("-o-border-radius:"+t.borderRadius+"px"));var m=t.padding;return null!=m&&void 0!=m&&(m=i.reformCssArray(m),e.push("padding:"+m[0]+"px "+m[1]+"px "+m[2]+"px "+m[3]+"px")),e=e.join(";")+";"},_doLayout:function(){if(!this._tDom){var t=this.vanchart.dom;this._tDom=document.createElement("div"),this._tDom.onselectstart=function(){return!1},this._tDom.style.position="absolute",t.appendChild(this._tDom),this._tooltipHideTick=null}},remove:function(){if(this._tDom){var t=this.vanchart.dom;t.removeChild(this._tDom)}},show:function(t,e){t&&e&&(clearTimeout(this._tooltipHideTick),this._tDom.innerHTML=e.tooltipText,this._tDom.style.cssText=this._gCssText+this._style(e)+"left:"+t[0]+"px;top:"+t[1]+"px;")},hide:function(){clearTimeout(this._tooltipHideTick),this._tooltipHideTick=setTimeout(function(){this._tDom.style.display="none"}.bind(this),400)},immediateHide:function(){this._tDom.style.display="none"},calculateTooltipDivDim:function(t){t=t||"";var e=document.getElementsByTagName("body")[0],a=document.createElement("div");a.innerHTML=t.tooltipText,a.style.cssText=this._gCssText+this._style(t)+"visibility:hidden;",e.appendChild(a);var i=a.offsetWidth,r=a.offsetHeight;return e.removeChild(a),{width:i,height:r}}},i.inherit(e,a),t("../ComponentLibrary").register(r.TOOLTIP_COMPONENT,e),e}),a("utils/ExportUtils",["require","./BaseUtils"],function(t){function e(){var t=document.querySelectorAll(".svg-export");[].forEach.call(t,function(t){t.parentNode.removeChild(t)})}function a(t){var e="";t.setAttribute("version","1.1");var a=document.createElement("defs");t.insertBefore(a,t.firstChild);var i=document.createElement("style");a.appendChild(i),i.setAttribute("type","text/css"),t.removeAttribute("xmlns"),t.removeAttribute("xlink"),t.hasAttributeNS(s.xmlns,"xmlns")||t.setAttributeNS(s.xmlns,"xmlns",s.svg),t.hasAttributeNS(s.xmlns,"xmlns:xlink")||t.setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink);var r=(new XMLSerializer).serializeToString(t).replace("</style>","<![CDATA["+e+"]]></style>");return[n+r]}function i(t,i){e();var r=a(t),n=i.fileName,s=window.URL.createObjectURL(new Blob(r,{type:"text/xml"})),l=document.createElement("a");o.appendChild(l),l.setAttribute("class","svg-export"),l.setAttribute("download",n+".svg"),l.setAttribute("href",s),l.style.display="none",l.click(),setTimeout(function(){window.URL.revokeObjectURL(s)},10)}function r(t,e,a){i(t,e,a)}var n=(t("./BaseUtils"),'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">');window.URL=window.URL||window.webkitURL;var o=document.body,s={xmlns:"http://www.w3.org/2000/xmlns/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};return{toImage:r}}),a("render/ToolbarIconSvgRender",["require","../utils/BaseUtils","../Constants","../utils/ExportUtils"],function(t){function e(t,e){this.toolbarIcon=t,
    this.toolbar=e}var a="rgba(0,0,0,0.05)",i="rgba(0,0,0,0.1)",r="rgba(0,0,0,0.0)",n="rgba(0,0,0,0.05)",o=2,s=t("../utils/BaseUtils"),l=t("../Constants"),h=t("../utils/ExportUtils");return e.prototype={constructor:e,render:function(t){var e=this.toolbar.getIconSize(),i=this.toolbarIcon.getIconPos(),n=this.toolbarIcon.visible;this.iconG=t.append("g").attr("transform","translate("+i.x+","+i.y+")").attr("visibility",n?"visible":"hidden"),this.iconG.append("rect").attr("width",e).attr("height",e).attr("rx",o).attr("ry",o).style("fill",this._isOpen()?a:r),this._createIcon(),this._addListeners()},_iconAnimation:function(t,e,i){var n=this.iconG,o=this.toolbarIcon.getIconPos();setTimeout(function(){i&&n.attr("visibility","visible");var e=4*t,s=o.x-e;n.transition().ease("circle-out").duration(100).attr("transform","translate("+s+","+o.y+")").transition().ease("circle-in").duration(100).attr("transform","translate("+o.x+","+o.y+")").each("end",function(){d3.select(this).attr("visibility",i?"visible":"hidden")}),n.select("rect").style("fill",i?r:a).transition().ease("linear").duration(200).style("fill",i?a:r),n.select("g").style("opacity",i?0:1).transition().ease("linear").duration(200).style("opacity",i?1:0)},e)},backToOrigin:function(){var t=this.toolbarIcon.getIconPos();this.iconG.attr("transform","translate("+t.x+","+t.y+")")},showIcon:function(){arguments.length?this._iconAnimation(arguments[0],arguments[1],!0):this.iconG.attr("visibility","visible")},hideIcon:function(){arguments.length?this._iconAnimation(arguments[0],arguments[1],!1):this.iconG.attr("visibility","hidden")},refreshMove:function(t,e){var a=this.toolbarIcon.getIconPos(),i=d3.transform(this.iconG.attr("transform")).translate,r=i[0],n=r-t,o=n+e;this.iconG.transition().ease("circle-out").duration(220).attr("transform","translate("+n+","+a.y+")").transition().ease("circle-in").duration(220).attr("transform","translate("+o+","+a.y+")")},refreshMoveWithoutAnimation:function(t,e){var a=this.toolbarIcon.getIconPos(),i=d3.transform(this.iconG.attr("transform")).translate,r=i[0],n=r-t+e;this.iconG.attr("transform","translate("+n+","+a.y+")")},_isOpen:function(){return this.toolbar.isOpen},_addListeners:function(){var t=this.iconG,e=this,o=this.toolbar,c=o.vanchart,d=o.componentOption,u=o.vanchart.getParentDom(),g=this.toolbar.getVanchartRender().getRenderRoot(),f=this.toolbarIcon,p=o.getRefreshIcon(),m={width:c.chartWidth(),height:c.chartHeight()};t.style("cursor","pointer").on("click",function(){switch(f.iconType){case l.REFRESH_ICON:c.refreshRestore(),p.hideIcon();break;case l.INCREASE_ICON:f.iconType=l.DECREASE_ICON,t.select("path").attr("d",f.getDecreaseIconPath()),c.refreshIncreaseOrder(),p.showIcon();break;case l.DECREASE_ICON:f.iconType=l.INCREASE_ICON,t.select("path").attr("d",f.getIncreaseIconPath()),c.refreshDecreaseOrder(),p.showIcon();break;case l.EXPORT_ICON:h.toImage(g.node(),d.toImage,m);break;case l.MAX_ICON:s.showLightBox(o.option);break;case l.MIN_ICON:s.hideLightBox(u);break;case l.MENU_ICON:o.showOrHide()}}).on("mouseenter",function(){t.select("rect").style("fill",e._isOpen()?i:n)}).on("mouseleave",function(){t.select("rect").style("fill",e._isOpen()?a:r)})},_createIcon:function(){var t=this.iconG,e=this.toolbarIcon,a=e.iconType;switch(a){case l.REFRESH_ICON:t.append("path").attr("d",e.getRefreshIconPath()).style("fill","#FF9933");break;case l.INCREASE_ICON:t.append("path").attr("d",e.getIncreaseIconPath()).style("fill","#33CCFF");break;case l.DECREASE_ICON:t.append("path").attr("d",e.getDecreaseIconPath()).style("fill","#33CCFF");break;case l.EXPORT_ICON:t.append("path").attr("d",e.getExportIconPath()).style("fill","#6666CC");break;case l.MAX_ICON:t.append("path").attr("d",e.getMaxIconPath()).style("fill","#33CC66");break;case l.MIN_ICON:t.append("path").attr("d",e.getMinIconPath()).style("fill","#33CC66");break;case l.MENU_ICON:t.append("path").attr("d",e.getMenuIconPath()).style("stroke-width",2).style("stroke","#AAAAAA")}}},e}),a("render/ToolbarIconVmlRender",["require","../utils/BaseUtils","../Constants","../utils/ExportUtils"],function(t){function e(t,e){this.toolbarIcon=t,this.toolbar=e,this.currentPos=[]}var a="rgb(0,0,0)",i=.05,r="rgb(0,0,0)",n=.1,o="rgb(0,0,0)",s=0,l="rgb(0,0,0)",h=.05,c=2,d=t("../utils/BaseUtils"),u=t("../Constants"),g=t("../utils/ExportUtils");return e.prototype={constructor:e,render:function(t){var e=this.toolbar.getToolbarPos(),r=this.toolbarIcon.getIconPos(),n=r.x+e.x,l=r.y+e.y;this.currentPos=[n,l];var h=this.toolbar.getIconSize(),d=this.toolbarIcon.visible;this.itemSet=t.set(),this.background=t.rect(0,0,h,h).attr("fill",this._isOpen()?a:o).attr("fill-opacity",this._isOpen()?i:s).attr("rx",c).attr("ry",c).attr("stroke-width",0),this.foreground=t.path().attr(this._getIconStyle()),this.itemSet.push(this.background),this.itemSet.push(this.foreground),this.itemSet.transform("t"+n+","+l),d||this.itemSet.hide(),this._addListeners()},_getIconStyle:function(){var t=this.toolbarIcon,e=t.iconType;switch(e){case u.REFRESH_ICON:return{path:t.getRefreshIconPath(),fill:"#FF9933","stroke-width":0};case u.INCREASE_ICON:return{path:t.getIncreaseIconPath(),fill:"#33CCFF","stroke-width":0};case u.DECREASE_ICON:return{path:t.getDecreaseIconPath(),fill:"#33CCFF","stroke-width":0};case u.EXPORT_ICON:return{path:t.getExportIconPath(),fill:"#6666CC","stroke-width":0};case u.MAX_ICON:return{path:t.getMaxIconPath(),fill:"#33CC66","stroke-width":0};case u.MIN_ICON:return{path:t.getMinIconPath(),fill:"#33CC66","stroke-width":0};case u.MENU_ICON:return{path:t.getMenuIconPath(),"stroke-width":2,stroke:"#AAAAAA",fill:"none"}}},_addListeners:function(){var t=(this.iconG,this.toolbar),e=t.componentOption,c=t.vanchart.getParentDom(),f=this.toolbar.getVanchartRender().getRenderRoot(),p=this.toolbarIcon,m=t.vanchart,v=t.getRefreshIcon(),y={width:m.chartWidth(),height:m.chartHeight()};this.itemSet.forEach(function(_){var b=this;_.attr("cursor","pointer"),_.click(function(){switch(p.iconType){case u.REFRESH_ICON:m.refreshRestore(),v.hideIcon();break;case u.INCREASE_ICON:p.iconType=u.DECREASE_ICON,b.foreground.attr("path",p.getDecreaseIconPath()),m.refreshIncreaseOrder(),v.showIcon();break;case u.DECREASE_ICON:p.iconType=u.INCREASE_ICON,b.foreground.attr("path",p.getIncreaseIconPath()),m.refreshDecreaseOrder(),v.showIcon();break;case u.EXPORT_ICON:g.toImage(f,e.toImage,y);break;case u.MAX_ICON:d.showLightBox(t.option);break;case u.MIN_ICON:d.hideLightBox(c);break;case u.MENU_ICON:t.showOrHide()}}),_.mouseover(function(){b.background.attr("fill",b._isOpen()?r:l).attr("fill-opacity",b._isOpen?n:h)}),_.mouseout(function(){b.background.attr("fill",b._isOpen()?a:o).attr("fill-opacity",b._isOpen()?i:s)})},this)},_isOpen:function(){return this.toolbar.isOpen},showIcon:function(){this.itemSet.show()},hideIcon:function(){this.itemSet.hide()},refreshMove:function(t,e){var a=e-t;this.currentPos[0]+=a;var i=this.currentPos[0],r=this.currentPos[1];this.itemSet.transform("t"+i+","+r)},refreshMoveWithoutAnimation:function(t,e){this.refreshMove(t,e)},backToOrigin:function(){var t=this.toolbar.getToolbarPos(),e=this.toolbarIcon.getIconPos(),a=e.x+t.x,i=e.y+t.y;this.currentPos=[a,i],this.itemSet.transform("t"+a+","+i)}},e}),a("component/ToolbarIcon",["require","./Base","../utils/BaseUtils","../Constants","../utils/ExportUtils","../render/ToolbarIconSvgRender","../render/ToolbarIconVmlRender"],function(t){function e(t,e,i,o){this.iconType=t,this.toolbar=e,this.visible=o,this.pos=i,this.iconG=null,this.iconRender=a.isSupportSVG()?new r(this,e):new n(this,e)}var a=(t("./Base"),t("../utils/BaseUtils")),i=t("../Constants"),r=(t("../utils/ExportUtils"),t("../render/ToolbarIconSvgRender")),n=t("../render/ToolbarIconVmlRender");return e.prototype={constructor:e,render:function(t){this.iconRender.render(t)},showIcon:function(){arguments.length?this.iconRender.showIcon(arguments[0],arguments[1]):this.iconRender.showIcon(),this.visible=!0},hideIcon:function(t,e){arguments.length?this.iconRender.hideIcon(arguments[0],arguments[1]):this.iconRender.hideIcon(),this.visible=!1,this.toolbar.isOpen||this.iconType!=i.REFRESH_ICON||this.iconRender.backToOrigin()},refreshMove:function(t,e){this.iconRender.refreshMove(t,e)},refreshMoveWithoutAnimation:function(t,e){this.iconRender.refreshMoveWithoutAnimation(t,e)},getIconPos:function(){return this.pos},getMaxIconPath:function(){return"M24,8v6.5L21.5,12l-3,3L17,13.5l3-3L17.5,8H24z M15,18.5l-3,3l2.5,2.5H8v-6.5l2.5,2.5l3-3L15,18.5z"},getMinIconPath:function(){return"M15,17v6.5L12.5,21l-3,3L8,22.5l3-3L8.5,17H15z M24,9.5l-3,3l2.5,2.5H17V8.5l2.5,2.5l3-3L24,9.5z"},getIncreaseIconPath:function(){return"M8,20h16v2H8V20z M10,16h2v3h-2V16z M13,14h2v5h-2V14z M16,12h2v7h-2V12z M19,9h2v10h-2V9z"},getDecreaseIconPath:function(){return"M8,20h16v2H8V20z M10,9h2v10h-2V9z M13,12h2v7h-2V12z M16,15h2v4h-2V15z M19,16h2v3h-2V16z"},getExportIconPath:function(){return"M22,8H8v16h16V10L22,8z M16,10h2v4h-2V10z M22,22H10V10h1v5h9v-5h1.171L22,10.829V22z"},getRefreshIconPath:function(){return"M21.656,10.344C20.209,8.896,18.209,8,16,8c-3.43,0-6.354,2.158-7.492,5.19l1.873,0.703C11.234,11.619,13.428,10,16,10c1.657,0,3.156,0.672,4.243,1.757L18,14h6V8L21.656,10.344z M16,22c-1.657,0-3.156-0.671-4.243-1.757L14,18H8v6l2.344-2.344C11.791,23.104,13.791,24,16,24c3.43,0,6.354-2.158,7.492-5.19l-1.873-0.703C20.766,20.381,18.572,22,16,22z"},getMenuIconPath:function(){return"M8,10L24,10 M8,15L24,15 M8,20L24,20"}},e}),a("render/ToolbarSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){this.toolbar=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){var t=this.toolbar.componentOption;if(t.enabled){var e=this.toolbar.getVanchartRender().getRenderRoot(),a=this.toolbar.getToolbarPos();this._bodyG||(this._bodyG=e.append("g").attr("transform","translate("+a.x+","+a.y+")")),this.toolbar.menuIcon&&this.toolbar.menuIcon.render(this._bodyG),this.toolbar.refreshIcon.render(this._bodyG);for(var i=this.toolbar.getToolbarIcons(),r=0,n=i.length;n>r;r++)i[r].render(this._bodyG)}},hide:function(){for(var t=this.toolbar.getToolbarIcons(),e=t.length,a=[],i=0;e>i;i++)a.push(100+80*i);for(var i=0;e>i;i++){var r=e-i;t[i].hideIcon(r,a[i])}var n=this.toolbar.getRefreshIcon(),o=4*(e+1),s=4*(e+1)+33*e;n.visible&&n.refreshMove(o,s)},show:function(){for(var t=[0],e=this.toolbar.getToolbarIcons(),a=e.length,i=0;a-1>i;i++)t.push(100+80*i);for(var i=0;a>i;i++){var r=a-i;e[i].showIcon(r,t[i])}var n=this.toolbar.getRefreshIcon(),o=4*(a+1)+33*a,s=4*(a+1);n.visible&&n.refreshMove(o,s)},dataChangeRender:function(){}},i.inherit(e,a),t("./RenderLibrary").register(r.TOOLBAR_SVG,e),e}),a("render/ToolbarVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){this.toolbar=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){var t=this.toolbar.componentOption;if(t.enabled){var e=this.toolbar.getVanchartRender().getRenderRoot();this.toolbar.menuIcon&&this.toolbar.menuIcon.render(e),this.toolbar.refreshIcon.render(e);for(var a=this.toolbar.getToolbarIcons(),i=0,r=a.length;r>i;i++)a[i].render(e)}},hide:function(){for(var t=this.toolbar.getToolbarIcons(),e=t.length,a=0;e>a;a++)t[a].hideIcon();var i=this.toolbar.getRefreshIcon(),r=4*(e+1),n=4*(e+1)+33*e;i.visible&&i.refreshMove(r,n)},show:function(){for(var t=this.toolbar.getToolbarIcons(),e=t.length,a=0;e>a;a++)t[a].showIcon();var i=this.toolbar.getRefreshIcon(),r=4*(e+1)+33*e,n=4*(e+1);i.visible&&i.refreshMove(r,n)},toFront:function(t){t&&t.itemSet.toFront()},dataChangeRender:function(){var t=this.toolbar.componentOption;if(t.enabled){this.toolbar.getVanchartRender().getRenderRoot();this.toolbar.menuIcon&&this.toFront(this.toolbar.menuIcon.iconRender),this.toFront(this.toolbar.refreshIcon.iconRender);for(var e=this.toolbar.getToolbarIcons(),a=0,i=e.length;i>a;a++)this.toFront(e[a].iconRender)}}},i.inherit(e,a),t("./RenderLibrary").register(r.TOOLBAR_VML,e),e}),a("component/Toolbar",["require","./Base","../utils/BaseUtils","../Constants","../utils/ExportUtils","./ToolbarIcon","../render/ToolbarSvgRender","../render/ToolbarVmlRender","../ComponentLibrary"],function(t){function e(t,e,i){a.call(this,t,e,i),this.menuIcon=null,this.refreshIcon=null,this.pos={x:0,y:0},this.toolbarIcons=[],this.refresh(e),this.isOpen=!this.componentOption.hidden}var a=t("./Base"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=(t("../utils/ExportUtils"),t("./ToolbarIcon"));t("../render/ToolbarSvgRender"),t("../render/ToolbarVmlRender");var o=32,s=1,l=5;return e.prototype={constructor:e,_doLayout:function(){var t=this.componentOption;if(t.enabled&&this._needLayout){this._needLayout=!1,this.toolbarIcons=[],this.pos={x:0,y:0};var e=[r.REFRESH_ICON];this._registerIcons("sort",r.INCREASE_ICON,e),i.isSupportSVG()&&!i.isIE()&&this._registerIcons("toImage",r.EXPORT_ICON,e),this._registerIcons("fullScreen",r.MAX_ICON,e),this._registerIcons("exitFullScreen",r.MIN_ICON,e),this.componentOption.hidden&&e.push(r.MENU_ICON);var a=o+s,h=e.length*a+l,c=this.vanchart.chartWidth()-h;this.pos={x:c,y:l};for(var d=!this.componentOption.hidden,u=0,g=e.length;g>u;u++){var f={x:u*a,y:0},p=e[u];p==r.MENU_ICON?this.menuIcon=new n(p,this,f,!0):p==r.REFRESH_ICON?this.refreshIcon=new n(p,this,f,!1):this.toolbarIcons.push(new n(p,this,f,d))}}},_registerIcons:function(t,e,a){var i=this.componentOption;i[t]&&i[t].enabled&&a.push(e)},getToolbarPos:function(){return this.pos},getToolbarIcons:function(){return this.toolbarIcons},getRefreshIcon:function(){return this.refreshIcon},showRefreshIconWhenZoom:function(){if(!this.refreshIcon.visible)if(this.menuIcon)if(this.isOpen)this.refreshIcon.showIcon();else{this.refreshIcon.showIcon();var t=this.toolbarIcons,e=t.length,a=this.refreshIcon,i=4*(e+1),r=4*(e+1)+33*e;a.visible&&a.refreshMoveWithoutAnimation(i,r)}else this.refreshIcon.showIcon()},showOrHide:function(){this.isOpen?this.render.hide():this.render.show(),this.isOpen=!this.isOpen,this.toolbarIcons.forEach(function(t){t.visible=this.isOpen});var t=o+s,e=this.toolbarIcons.length*t+t;this.isOpen&&(e=-e);var a=this.vanchart.getComponent(r.TITLE_COMPONENT);a&&a.translateX(e)},getIconSize:function(){return o},getToolbarWidth:function(){var t=o+s,e=l;return this.refreshIcon&&(e+=t),this.menuIcon&&this.menuIcon.visible&&(e+=t),this.isOpen&&(e+=this.toolbarIcons.length*t),e},getToolbarHeight:function(){return o}},i.inherit(e,a),t("../ComponentLibrary").register(r.TOOLBAR_COMPONENT,e),e}),a("render/ZoomBarRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.zoomBar=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants");e.prototype={constructor:e,render:function(){if(this.zoomBar.zoomToolEnabled()){var t=this.zoomBar.bounds,e=this.zoomBar.getVanchartRender().getRenderRoot();this._zoomG=e.append("g").attr("transform","translate("+t.x+","+t.y+")"),this._initUnitLength();var a=this.zoomBar.getStartX(),i=this.zoomBar.getEndX();this._zoomG.append("g").call(this._createLines.bind(this)),this.leftRect=this._zoomG.append("g").call(this._createSideRect.bind(this),a,!0),this.rightRect=this._zoomG.append("g").call(this._createSideRect.bind(this),i,!1),this.innerRect=this._zoomG.append("g").call(this._createInnerRect.bind(this),a,i),this.leftButton=this._zoomG.append("g").call(this._createButton.bind(this),a,!0),this.rightButton=this._zoomG.append("g").call(this._createButton.bind(this),i,!1);var r=this.zoomBar.getZoomBarWidth(),n=this.zoomBar.getZoomBarHeight();this.l_bounds={x:a,y:0,width:r,height:n},this.r_bounds={x:i-r,y:0,width:r,height:n},this.c_bounds={x:a+r,y:0,width:i-a-2*r,height:n},this._addEventListeners(e)}},_initUnitLength:function(){var t=this.zoomBar.bounds,e=this.zoomBar.vanchart.xAxis(),a=e.getCategories();this.unitLength=a.length?t.width/a.length:t.width},_addEventListeners:function(t){var e=this;this.zoomBar.getTooltipComponent();t.on("mousedown.zoom",function(){var t=d3.mouse(e._zoomG.node());i.containsPoint(e.l_bounds,t)?this.tartget=e.leftButton:i.containsPoint(e.r_bounds,t)?this.tartget=e.rightButton:i.containsPoint(e.c_bounds,t)&&(this.tartget=e.innerRect),this.tartget&&(this.downX=t[0],this.initX=d3.transform(this.tartget.attr("transform")).translate[0],e._zoomG.style("cursor","ew-resize"),e._initStartEndIndex())}).on("mousemove.zoom",function(){if(this.tartget){var t=this.tartget.attr("class");switch(t){case r.LEFT:e.zoomBar.resizable()&&e._leftButtonMove(this.downX,this.initX);break;case r.RIGHT:e.zoomBar.resizable()&&e._rightButtonMove(this.downX,this.initX);break;case r.CENTER:e._centerRectMove(this.downX)}e._zoomRefresh()}}).on("mouseup.zoom",function(){this.tartget&&(this.tartget=null,e._updateBounds())})},_leftButtonMove:function(t,e){var a=this.zoomBar.getZoomBarWidth(),i=0,r=d3.transform(this.rightButton.attr("transform")).translate[0]-a,n=d3.mouse(this._zoomG.node())[0],o=e+n-t;o=Math.max(Math.min(o,r),i),this.leftButton.attr("transform","translate("+o+",0)"),this.leftRect.select("rect").attr("width",o),this.innerRect.selectAll("line").attr("x1",o+a),this.innerRect.select("rect").attr("x",o+a).attr("width",r-o)},_rightButtonMove:function(t,e){var a=this.zoomBar.getZoomBarWidth(),i=d3.transform(this.leftButton.attr("transform")).translate[0]+a,r=this.zoomBar.getBoundsEndX()-a,n=d3.mouse(this._zoomG.node())[0],o=e+n-t;o=Math.max(Math.min(o,r),i),this.rightButton.attr("transform","translate("+o+",0)"),this.rightRect.select("rect").attr("x",o+a).attr("width",this.zoomBar.getBoundsEndX()-(o+a)),this.innerRect.selectAll("line").attr("x2",o),this.innerRect.select("rect").attr("width",o-i)},_centerRectMove:function(t){var e=this.zoomBar.getBoundsEndX(),a=this.zoomBar.getZoomBarWidth(),i=d3.mouse(this._zoomG.node())[0],r=i-t;if(this.l_bounds.x+r>=0&&this.r_bounds.x+this.r_bounds.width+r<=e){var n=this.l_bounds.x+r;this.leftButton.attr("transform","translate("+n+",0)"),this.leftRect.select("rect").attr("width",n);var o=this.r_bounds.x+r;this.rightButton.attr("transform","translate("+o+",0)"),this.rightRect.select("rect").attr("x",o+a).attr("width",this.zoomBar.getBoundsEndX()-(o+a)),this.innerRect.selectAll("line").attr("x1",n+a).attr("x2",o),this.innerRect.select("rect").attr("x",n+a)}},_initStartEndIndex:function(){var t=d3.transform(this.leftButton.attr("transform")).translate[0],e=d3.transform(this.rightButton.attr("transform")).translate[0];this.initStart=this._getStartIndexByPosition(t),this.initEnd=this._getEndIndexByPosition(e)},_getStartIndexByPosition:function(t){var e=this.zoomBar.vanchart.xAxis(),a=e.getCategories();return e.isAxisReversed()?a.length-1-Math.floor(t/this.unitLength):Math.floor(t/this.unitLength)},_getEndIndexByPosition:function(t){return this._getStartIndexByPosition(t)},_zoomRefresh:function(){var t=d3.transform(this.leftButton.attr("transform")).translate[0],e=d3.transform(this.rightButton.attr("transform")).translate[0],a=this._getStartIndexByPosition(t),i=this._getEndIndexByPosition(e);if(this.initStart!=a||this.initEnd!=i){var r=this.zoomBar.vanchart.xAxis();r.updateAxisScale(Math.min(a,i),Math.max(a,i));var n=this.zoomBar.getVanchartRender();n.zoomToolRefresh(),this.initStart=a,this.initEnd=i}},_updateBounds:function(){var t=d3.transform(this.leftButton.attr("transform")).translate[0],e=d3.transform(this.rightButton.attr("transform")).translate[0],a=this.zoomBar.getZoomBarWidth();this.l_bounds.x=t,this.r_bounds.x=e,this.c_bounds.x=t+a,this.c_bounds.width=e-t-a},_createSideRect:function(t,e,a){var i,r,n=this.zoomBar.getZoomBarHeight();a?(i=0,r=e):(i=e,r=this.zoomBar.bounds.width-e),t.append("rect").attr("x",i).attr("y",0).attr("width",r).attr("height",n).style("fill","rgba(220,221,221,0.4)")},_createInnerRect:function(t,e,a){var i=this.zoomBar.getZoomBarWidth(),n=this.zoomBar.getZoomBarHeight();t.attr("class",r.CENTER),t.append("rect").attr("x",e+i).attr("y",0).attr("width",a-e-2*i).attr("height",n).style("fill","rgba(255,255,255,0)"),t.append("line").attr("x1",e+i).attr("y1",0).attr("x2",a-i).attr("y2",0),t.append("line").attr("x1",e+i).attr("y1",n).attr("x2",a-i).attr("y2",n),t.selectAll("line").style({fill:"none",stroke:"#29ABE2","stroke-width":1})},_createLines:function(t){var e=this.zoomBar.bounds,a=this.zoomBar.vanchart.xAxis(),r=a.getCategories(),n=this.zoomBar.option.series,o=[];n.forEach(function(t){t.xAxis||o.push(t)});var s=[],l=Number.MAX_VALUE,h=Number.MIN_VALUE;o.forEach(function(t){var e=[];s.push(e);for(var a=t.data.length,n=0;a>n;n++){var o=t.data[n],c={x:r[n],y:i.pick(o.y,o)};isNaN(+c.y)||(e.push(c),l=Math.min(l,c.y),h=Math.max(h,c.y))}}),l=l>=0?0:l;var c=d3.scale.ordinal().domain(r).rangeRoundBands([0,e.width]),d=c.rangeBand()/2,u=d3.scale.linear().domain([l,h]).nice().range([e.height,0]),g=d3.svg.line().interpolate("linear").x(function(t){return c(t.x)+d}).y(function(t){return u(t.y)});t.selectAll("path").data(s).enter().append("path").attr("d",function(t){return g(t)}).style({fill:"none",stroke:"black","stroke-width":1})},_createButton:function(t,e,a){e=a?e:e-this.zoomBar.getZoomBarWidth(),t.attr("transform","translate("+e+",0)").attr("class",a?r.LEFT:r.RIGHT),t.append("path").attr("d",a?"M4,30h6V0L4,0C1.791,0,0,1.791,0,4v22C0,28.209,1.791,30,4,30z":"M6,30H0V0h6c2.209,0,4,1.791,4,4v22C10,28.209,8.209,30,6,30z").style("fill","#29ABE2"),t.append("line").attr("x1",3).attr("y1",11).attr("x2",3).attr("y2",18),t.append("line").attr("x1",7).attr("y1",11).attr("x2",7).attr("y2",18),t.selectAll("line").style({fill:"#FFFFFF",stroke:"#7ADAF4","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})},dataChangeRender:function(){},refreshRestore:function(){this._zoomG&&(this._zoomG.remove(),this.render())}},i.inherit(e,a),t("./RenderLibrary").register(r.ZOOM_SVG,e)}),a("component/ZoomBar",["require","../render/ZoomBarRender","./Base","../utils/BaseUtils","../Constants","../ComponentLibrary"],function(t){function e(t,e,i){a.call(this,t,e,i),this.refresh(e)}t("../render/ZoomBarRender");var a=t("./Base"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=30,o=10;return e.prototype={constructor:e,_doLayout:function(){this.zoomToolEnabled()&&this._setComponentBounds(r.BOTTOM,n)},zoomToolEnabled:function(){var t=this.option.xAxis;return t&&(t=t[0]||t),this.componentOption&&this.componentOption.zoomTool&&this.componentOption.zoomTool.visible&&!this.option.dataSheet&&t&&t.type==r.CATEGORY_AXIS_COMPONENT},resizable:function(){return this.componentOption&&this.componentOption.zoomTool&&this.componentOption.zoomTool.resize},getZoomBarWidth:function(){return o},getZoomBarHeight:function(){return n},getStartX:function(){var t=this.componentOption.zoomTool,e=this.vanchart.xAxis(),a=0;if(t.from&&!t.to){var i=e.scale.copy().rangeRoundBands(e._getRange());a=i(t.from),a=isNaN(a)?0:a}else if(t.from&&t.to)return this._getMinX();return a},getEndX:function(){var t=this.componentOption.zoomTool,e=this.vanchart.xAxis(),a=this.bounds.width;if(t.to&&!t.from){var i=e.scale.copy().rangeRoundBands(e._getRange());a=i(t.to)+i.rangeBand(),a=isNaN(a)?this.bounds.width:a}else if(t.to&&t.from)return this._getMaxX();return a},_getMinX:function(){var t=this.componentOption.zoomTool,e=this.vanchart.xAxis();if(t.from&&t.to){var a=e.scale.copy().rangeRoundBands(e._getRange()),i=a(t.from),r=a(t.to),n=Math.min(i,r);return isNaN(n)?0:n}},_getMaxX:function(){var t=this.componentOption.zoomTool,e=this.vanchart.xAxis();if(t.from&&t.to){var a=e.scale.copy().rangeRoundBands(e._getRange()),i=a(t.from),r=a(t.to),n=Math.max(i,r)+a.rangeBand();return isNaN(n)?this.bounds.width:n}},getBoundsEndX:function(){return this.bounds.width}},i.inherit(e,a),t("../ComponentLibrary").register(r.ZOOM_COMPONENT,e),e}),a("render/DataSheetSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./LegendIconFactory","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.dataSheet=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=t("./LegendIconFactory");e.prototype={constructor:e,render:function(){var t=this.dataSheet.getVanchartRender().getRenderRoot(),e=this.dataSheet.vanchart.xAxis(),a=e.getCategories(),i=this.dataSheet.getPlotBounds().width/a.length,r=this.dataSheet.getMaxSeriesWidth(),n=this.dataSheet.getCategoryHeight(),o=this.dataSheet.bounds.x,s=this.dataSheet.bounds.y;this._tableG=t.append("g").attr("transform","translate("+o+","+s+")"),this._drawLines(r,n,i),this._drawCategory(r,n,i),this._drawSeries(r,n),this._drawValues(r,n,i)},_drawLines:function(t,e,a){var i=this._tableG.append("g"),r=this.dataSheet.componentOption,n=this.dataSheet.bounds.width,o=this.dataSheet.bounds.height;i.append("path").attr("d","M"+t+",0L"+n+",0L"+n+" "+o+"L0,"+o+"L0,"+e).style({fill:"none",stroke:r.borderColor,"stroke-width":r.borderWidth});for(var s=this.dataSheet.categoryNames.length,l=t,h=0;s>h;h++)i.append("line").attr("x1",l).attr("y1",0).attr("x2",l).attr("y2",o),l+=a;for(var c=this.dataSheet.seriesNames.length,d=e,h=0;c>h;h++)i.append("line").attr("x1",0).attr("y1",d).attr("x2",n).attr("y2",d),d+=this.dataSheet.getSeriesHeight(h);i.selectAll("line").style({fill:"none",stroke:r.borderColor,"stroke-width":r.borderWidth})},_drawValues:function(t,e,a){for(var r=this._tableG.append("g"),n=this.dataSheet.values,o=this.dataSheet._valueStyle(),s=i.getTextHeight(o),l=this.dataSheet.getTextPadding(),h=t,c=e,d=0;d<n.length;d++){for(var u=n[d],g=this.dataSheet.getSeriesHeight(d),f=0;f<u.length;f++)for(var p=u[f],m=c+this._getStartY(p,o,g)+.85*s,v=0;v<p.length;v++)r.append("text").text(p[v]).attr("x",h+a/2+a*f).attr("y",m+(s+l)*v);c+=g}r.selectAll("text").style({"text-anchor":"middle"}).call(i.setTextStyle,o)},_drawCategory:function(t,e,a){for(var r=this._tableG.append("g"),n=this.dataSheet.categoryNames,o=t,s=this.dataSheet._categoryStyle(),l=i.getTextHeight(s),h=this.dataSheet.getTextPadding(),c=0,d=n.length;d>c;c++)for(var u=n[c],g=this._getStartY(u,s,e)+.85*l,f=0;f<u.length;f++)r.append("text").text(u[f]).attr("x",o+a/2+a*c).attr("y",g+(l+h)*f);r.selectAll("text").style({"text-anchor":"middle"}).call(i.setTextStyle,s)},_drawSeries:function(t,e){for(var a=this._tableG.append("g"),r=this.dataSheet.seriesNames,o=16+(t-16)/2,s=e,l=this.dataSheet._seriesStyle(),h=i.getTextHeight(l),c=this.dataSheet.getTextPadding(),d=0,u=r.length;u>d;d++){for(var g=r[d],f=this.dataSheet.getSeriesHeight(d),p=s+this._getStartY(g,l,f)+.85*h,m=0;m<g.length;m++)a.append("text").text(g[m]).attr("x",o).attr("y",p+(h+c)*m);var v=this.dataSheet._getLegendType(d),y=n.getLegendIconSize(v).height;a.append("path").attr("d",n.getLegendIconPath(v)).attr("transform","translate(2,"+((f-y)/2+s)+")").style("fill",this.dataSheet._getDefaultSeriesColor(d)),s+=f}a.selectAll("text").style({"text-anchor":"middle"}).call(i.setTextStyle,l)},_getStartY:function(t,e,a){var r=this.dataSheet.getTextPadding(),n=t.length,o=i.getTextHeight(e)*n+(n-1)*r;return(a-o)/2},dataChangeRender:function(){}},i.inherit(e,a),t("./RenderLibrary").register(r.DATA_SHEET_SVG,e)}),a("render/DataSheetVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./LegendIconFactory","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.dataSheet=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=t("./LegendIconFactory");e.prototype={constructor:e,render:function(){var t=this.dataSheet.getVanchartRender().getRenderRoot(),e=this.dataSheet.vanchart.xAxis(),a=e.getCategories(),i=this.dataSheet.getPlotBounds().width/a.length,r=this.dataSheet.getMaxSeriesWidth(),n=this.dataSheet.getCategoryHeight(),o=this.dataSheet.bounds.x,s=this.dataSheet.bounds.y;this.dataSheetSet=t.set(),this.iconSet=t.set(),this._drawLines(t,r,n,i),this._drawCategory(t,r,n,i),this._drawSeries(t,r,n,o,s),this._drawValues(t,r,n,i),this.dataSheetSet.transform("t"+o+","+s)},_drawLines:function(t,e,a,i){var r=t.set();this.dataSheetSet.push(r);var n=this.dataSheet.componentOption,o=this.dataSheet.bounds.width,s=this.dataSheet.bounds.height,l={fill:"none",stroke:n.borderColor,"stroke-width":n.borderWidth};r.push(t.path("M"+e+",0L"+o+",0L"+o+" "+s+"L0,"+s+"L0,"+a));for(var h=this.dataSheet.categoryNames.length,c=e,d=0;h>d;d++)r.push(t.path(this._getLinePath([c,0],[c,s]))),c+=i;for(var u=this.dataSheet.seriesNames.length,g=a,d=0;u>d;d++)r.push(t.path(this._getLinePath([0,g],[o,g]))),g+=this.dataSheet.getSeriesHeight(d);r.attr(l)},_drawValues:function(t,e,a,r){var n=t.set();this.dataSheetSet.push(n);for(var o=this.dataSheet.values,s=this.dataSheet._valueStyle(),l=i.getTextHeight(s),h=this.dataSheet.getTextPadding(),c=e,d=a,u=0;u<o.length;u++){for(var g=o[u],f=this.dataSheet.getSeriesHeight(u),p=0;p<g.length;p++)for(var m=g[p],v=d+this._getStartY(m,s,f)+.5*l,y=0;y<m.length;y++)n.push(t.text(c+r/2+r*p,v+(l+h)*y,m[y]));d+=f}s=i.cssNormalization(s),s["text-anchor"]="middle",n.attr(s)},_drawCategory:function(t,e,a,r){var n=t.set();this.dataSheetSet.push(n);for(var o=this.dataSheet.categoryNames,s=e,l=this.dataSheet._categoryStyle(),h=i.getTextHeight(l),c=this.dataSheet.getTextPadding(),d=0,u=o.length;u>d;d++)for(var g=o[d],f=this._getStartY(g,l,a)+.5*h,p=0;p<g.length;p++)n.push(t.text(s+r/2+r*d,f+(h+c)*p,g[p]));l=i.cssNormalization(l),l["text-anchor"]="middle",n.attr(l)},_drawSeries:function(t,e,a,r,o){var s=t.set(),l=t.set();this.dataSheetSet.push(s),this.dataSheetSet.push(l);for(var h=this.dataSheet.seriesNames,c=16+(e-16)/2,d=a,u=this.dataSheet._seriesStyle(),g=i.getTextHeight(u),f=this.dataSheet.getTextPadding(),p=0,m=h.length;m>p;p++){for(var v=h[p],y=this.dataSheet.getSeriesHeight(p),_=d+this._getStartY(v,u,y)+.5*g,b=0;b<v.length;b++)s.push(t.text(c,_+(g+f)*b,v[b]));var x=this.dataSheet._getLegendType(p),L=n.getLegendIconSize(x).height,C=2+r,T=(y-L)/2+d+o;this.iconSet.push(t.path(n.getLegendIconPath(x)).attr({fill:this.dataSheet._getDefaultSeriesColor(p),stroke:"none"}).transform("t"+C+","+T)),d+=y}u=i.cssNormalization(u),u["text-anchor"]="middle",s.attr(u)},_getStartY:function(t,e,a){var r=this.dataSheet.getTextPadding(),n=t.length,o=i.getTextHeight(e)*n+(n-1)*r;return(a-o)/2},dataChangeRender:function(){}},i.inherit(e,a),t("./RenderLibrary").register(r.DATA_SHEET_VML,e)}),a("component/DataSheet",["require","../render/DataSheetSvgRender","../render/DataSheetVmlRender","./Base","../utils/BaseUtils","../utils/Formatter","../Constants","../render/LegendIconFactory","../ComponentLibrary"],function(t){function e(t,e,i){a.call(this,t,e,i),this.refresh(e)}t("../render/DataSheetSvgRender"),t("../render/DataSheetVmlRender");var a=t("./Base"),i=t("../utils/BaseUtils"),r=(t("../utils/Formatter"),t("../Constants")),n=t("../render/LegendIconFactory"),o=4,s=2,l=18,h={color:"#666666",fontSize:"14px",fontFamily:"Verdana"};return e.prototype={constructor:e,_doLayout:function(){this.seriesNames=[],this.categoryNames=[],this.values=[],this.maxCateLine=0,this.maxSeriesLine=[],this.maxValueLine=[],this.maxSeriesWidth=0},getSeriesNameLength:function(){for(var t=this.option.series,e=this._seriesStyle(),a=this.vanchart.getChartBounds().width/4-(l+2*s),r=0,h=0,c=0,d=t.length;d>c;c++){this.maxSeriesLine[c]=0;var u=t[c],g=i.getTextDimension(u.name,e,!1).width+2*o;if(g>a){var f=i.splitText(u.name,e,a,o);this.maxSeriesLine[c]=f.length,this.seriesNames.push(f),r=a}else this.maxSeriesLine[c]=1,this.seriesNames.push([u.name]),r=Math.max(g,r);var p=this._getLegendType(c);h=Math.max(h,n.getLegendIconSize(p).width)}return this.maxSeriesWidth=r+2*s+h,this.maxSeriesWidth},getDataSheetHeight:function(){var t=this.vanchart.xAxis(),e=t.getCategories(),a=[];this.option.series.forEach(function(t){a.push(t.data)}),t.isAxisReversed()&&(e=i.clone(e).reverse(),a=i.clone(a),a.forEach(function(t){t.reverse()}));var r=this._categoryStyle(),n=this.vanchart.getPlotBounds().width/e.length,s=this;this.maxCateLine=0,e.forEach(function(t){var e=i.splitText(t,r,n,o);s.maxCateLine=Math.max(s.maxCateLine,e.length),s.categoryNames.push(e);
});for(var l=this._valueStyle(),h=this.componentOption.formatter,c=0,d=a.length;d>c;c++){var u=[];this.values.push(u),this.maxValueLine[c]=0;for(var g=a[c],f=0,p=g.length;p>f;f++){var m=g[f],v=i.pick(m.y,m),y=isNaN(v)?"-":this._getTickContent(v,h),_=i.splitText(y,l,n,o);u.push(_),this.maxValueLine[c]=Math.max(this.maxValueLine[c],_.length)}}for(var b=this.getCategoryHeight(),x=0,c=0,d=a.length;d>c;c++)x+=this.getSeriesHeight(c);return b+x},_categoryStyle:function(){return this.option.xAxis.labelStyle||this.option.xAxis[0].labelStyle||h},_seriesStyle:function(){return this.option.legend?this.option.legend.style:h},_valueStyle:function(){return this.componentOption.style},getCategoryHeight:function(){var t=this._categoryStyle();return 2*o+this.maxCateLine*i.getTextHeight(t)+(this.maxCateLine-1)*o},getSeriesHeight:function(t){var e=i.getTextHeight(this._seriesStyle()),a=i.getTextHeight(this._valueStyle()),r=this.maxSeriesLine[t],n=2*o+r*e+(r-1)*o,s=this.maxValueLine[t],l=2*o+s*a+(s-1)*o;return Math.max(n,l)},getMaxSeriesWidth:function(){return this.maxSeriesWidth},getTextPadding:function(){return o}},i.inherit(e,a),t("../ComponentLibrary").register(r.DATA_SHEET_COMPONENT,e),e}),a("render/VanChartSvgRender",["require","../Constants","./BaseRender","../utils/BaseUtils","./RenderLibrary"],function(t){function e(t){this.vanchart=t}var a=t("../Constants"),i=t("./BaseRender"),r=t("../utils/BaseUtils"),n="chart-gradual-background",o="plot-gradual-background",s="zoom-rect",l=5;return e.prototype={constructor:e,render:function(){var t=this.vanchart.getParentDom(),e=this.vanchart.chartWidth(),a=this.vanchart.chartHeight();if(!this.svgRoot){this.svgRoot=d3.select(t).append("svg").attr("width",e).attr("height",a);var i=this.vanchart.getPlotClipBounds(),r=this.vanchart.getBodyClipID();this.svgRoot.append("defs").append("clipPath").attr("id",r).append("rect").attr("x",i.x).attr("y",i.y).attr("width",i.width).attr("height",i.height)}var n=this.vanchart.getChartRenders(),o=this.vanchart.getFixedComponentRenders(),s=this.vanchart.getFloatComponentRenders();this._renderBackground(),o.forEach(function(t){t.render()}),n.forEach(function(t){t.render()}),s.forEach(function(t){t.render()}),this._renderTrendLine()},monitorRender:function(){this._updateBodyClip(),this._reRenderBackground();var t=this.vanchart.getChartRenders(),e=this.vanchart.getComponentRenders();e.forEach(function(t){t.monitorRender()}),t.forEach(function(t){t.monitorRender()}),this._renderTrendLine()},_updateBodyClip:function(){var t=this.vanchart.getPlotClipBounds();this.svgRoot.select("defs").select("clipPath").select("rect").attr("x",t.x).attr("y",t.y).attr("width",t.width).attr("height",t.height)},onZoomStart:function(t,e){if(e&&e.lastChosen){e.render._cancelChosenStateWithData(e.lastChosen);var a=e.getTooltipComponent();a.immediateHide()}var i=this.vanchart.getParentDom(),n=r.getMousePos(t,i),o=this.vanchart.getPlotBounds();if(r.containsPoint(o,n)){this.svgRoot.append("rect").attr("class",s).style("fill","rgba(69,114,167,0.25)"),this.downPos=n;var l=this.vanchart.getChartRenders();l.forEach(function(t){t.removeEventHandler()})}},onZoom:function(t){if(this.downPos){var e=this.vanchart.getParentDom(),a=r.getMousePos(t,e),i=this.vanchart.getPlotBounds(),n=this.vanchart.getOptions(),o=n.zoom.zoomType,l=Math.min(a[0],this.downPos[0]),h=Math.min(a[1],this.downPos[1]),c=Math.abs(a[0]-this.downPos[0]),d=Math.abs(a[1]-this.downPos[1]),u=-1!=o.indexOf("x"),g=-1!=o.indexOf("y");u&&!g?(h=i.y,d=i.height):g&&!u&&(l=i.x,c=i.width),this.svgRoot.select("."+s).attr("x",l).attr("y",h).attr("width",c).attr("height",d)}},onZoomEnd:function(t){this.svgRoot.select("."+s).remove();var e=r.getMousePos(t,this.vanchart.getParentDom());if(this.downPos&&e){if(r.distance(this.downPos,e)>l)this._zoomAnimation(this.downPos,e);else{var a=this.vanchart.getChartRenders();a.forEach(function(t){t.addEventHandler()})}this.downPos=null}},_zoomAnimation:function(t,e){var i=this.vanchart.getComponents(),r=this.vanchart.getOptions(),n=r.zoom.zoomType;-1!=n.indexOf("x")&&i.xAxis&&i.xAxis.axisZoom(t,e),-1!=n.indexOf("y")&&i.yAxis&&i.yAxis.axisZoom(t,e);var o=this.vanchart.getCharts();for(var s in o)o[s].zoomRefresh();if(i[a.TOOLBAR_COMPONENT]){var l=i[a.TOOLBAR_COMPONENT];l.showRefreshIconWhenZoom()}this._renderTrendLine()},zoomToolRefresh:function(){this._updateBodyClip();var t=this.vanchart.xAxis();t.getRender().zoomRefresh();var e=this.vanchart.getCharts();for(var a in e)e[a].zoomRefresh();this._renderTrendLine()},dataAddRender:function(){this._updateBodyClip(),this._reRenderBackground();var t=this.vanchart.getChartRenders(),e=this.vanchart.getComponentRenders();e.forEach(function(t){t.dataChangeRender()}),t.forEach(function(t){t.dataAddRender()}),this._renderTrendLine()},dataDeleteRender:function(){this._updateBodyClip(),this._reRenderBackground();var t=this.vanchart.getChartRenders(),e=this.vanchart.getComponentRenders();e.forEach(function(t){t.dataChangeRender()}),t.forEach(function(t){t.dataDeleteRender()}),this._renderTrendLine()},refreshInOrder:function(){this._updateBodyClip(),this._reRenderBackground();var t=this.vanchart.getChartRenders();t.forEach(function(t){t.refreshInOrder()});var e=this.vanchart.getComponentRenders();e.forEach(function(t){t.dataChangeRender()}),this._renderTrendLine()},refreshRestore:function(){this._updateBodyClip(),this._reRenderBackground();var t=this.vanchart.getChartRenders();t.forEach(function(t){t.refreshRestore()});var e=this.vanchart.getComponentRenders();e.forEach(function(t){t.refreshRestore()}),this._renderTrendLine()},_renderBackground:function(){var t=this.vanchart.getIDPrefix(),e=this.vanchart.getChartBounds(),a=this.vanchart.getChartBackgroundOption(),i=this.vanchart.getPlotBounds(),r=this.vanchart.getPlotBackgroundOption();this._backgroundG||(this._backgroundG=this.svgRoot.append("g")),this._createGradualDefs(this._backgroundG,a.color,n+t),this._createGradualDefs(this._backgroundG,r.color,o+t),this._renderBackgroundWithBounds(a,e,n+t),this._renderBackgroundWithBounds(r,i,o+t)},_reRenderBackground:function(){this._backgroundG.selectAll(".background").remove();var t=this.vanchart.getIDPrefix(),e=this.vanchart.getChartBounds(),a=this.vanchart.getChartBackgroundOption(),i=this.vanchart.getPlotBounds(),r=this.vanchart.getPlotBackgroundOption();this._renderBackgroundWithBounds(a,e,n+t),this._renderBackgroundWithBounds(r,i,o+t)},_renderBackgroundWithBounds:function(t,e,a){e=-1!=a.indexOf(n)?r.rectSubPixelOpt(e.x,e.y,e.width-t.borderWidth,e.height-t.borderWidth,t.borderWidth):r.rectSubPixelOpt(e.x,e.y,e.width,e.height,t.borderWidth);var i=this.vanchart.getParentDom();if(t.chartShadow)d3.select(i).style("box-shadow","1px 1px 2px rgba(0,0,0,0.1)");else if(t.plotShadow){for(var o=[5,3,1],s=[.05,.1,.15],l=r.rectSubPixelOpt(e.x,e.y,e.width,e.height,1),h=0;3>h;h++)this._backgroundG.append("rect").attr("class","background").attr("x",l.x).attr("y",l.y).attr("width",l.width).attr("height",l.height).attr("transform","translate(1, 1)").attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill","none").style("stroke","black").style("stroke-width",o[h]).style("stroke-opacity",s[h]);this._backgroundG.append("rect").attr("class","background").attr("x",l.x).attr("y",l.y).attr("width",l.width).attr("height",l.height).attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill","white")}this._backgroundG.append("rect").attr("class","background").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height).attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill",function(){return t.color?"string"==typeof t.color?t.color:"url(#"+a+")":"none"}).style("stroke",t.borderColor).style("stroke-width",t.borderWidth),t.image&&this._backgroundG.append("image").attr("class","background").attr("preserveAspectRatio","none").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height).attr("xlink:href",t.image)},_renderTrendLine:function(){var t=this.vanchart.getTrendLineOption(),e=this.vanchart.getPlotBounds(),i=this.vanchart.getBodyClipID();this._trendG||(this._trendG=this.svgRoot.append("g").attr("clip-path","url(#"+i+")")),this._trendG.attr("transform","translate("+e.x+","+e.y+")");var r=this._trendG.selectAll("line").data(t);r.enter().append("line"),r.exit().remove(),r.attr("x1",function(t){return t.x1}).attr("y1",function(t){return t.y1}).attr("x2",function(t){return t.x2}).attr("y2",function(t){return t.y2}).style("stroke",function(t){return t.trendLine.color}).style("stroke-width",function(t){return t.trendLine.width}).style("stroke-dasharray",function(t){return a.DASH_TYPE[t.trendLine.dashStyle]})},getRenderRoot:function(){return this.svgRoot},remove:function(){this.svgRoot.remove();var t=this.vanchart.getChartRenders(),e=this.vanchart.getComponentRenders();t.forEach(function(t){t.removeDivLabels()}),e.forEach(function(t){t.removeDivLabels()})}},r.inherit(e,i),t("./RenderLibrary").register(a.VANCHART_SVG,e),e}),a("render/VanChartVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){this.vanchart=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){var t=this.vanchart.getParentDom(),e=this.vanchart.chartWidth(),a=this.vanchart.chartHeight();this.paper||(this.paper=Raphael(t,e,a));var i=this.vanchart.getChartRenders(),r=this.vanchart.getFixedComponentRenders(),n=this.vanchart.getFloatComponentRenders();this._renderBackground(),r.forEach(function(t){t.render()}),i.forEach(function(t){t.render()}),n.forEach(function(t){t.render()}),this._renderTrendLine()},dataAddRender:function(){var t=this.vanchart.getChartRenders(),e=this.vanchart.getFixedComponentRenders(),a=this.vanchart.getFloatComponentRenders();this._renderBackground(),e.forEach(function(t){t.dataChangeRender()}),t.forEach(function(t){t.dataAddRender()}),a.forEach(function(t){t.dataChangeRender()}),this._renderTrendLine()},dataDeleteRender:function(){var t=this.vanchart.getChartRenders(),e=this.vanchart.getFixedComponentRenders(),a=this.vanchart.getFloatComponentRenders();this._renderBackground(),e.forEach(function(t){t.dataChangeRender()}),t.forEach(function(t){t.dataDeleteRender()}),a.forEach(function(t){t.dataChangeRender()}),this._renderTrendLine()},_renderBackground:function(){this.backgroundSet&&this.backgroundSet.remove(),this.backgroundSet=this.paper.set();var t=this.vanchart.getChartBounds(),e=this.vanchart.getChartBackgroundOption();t=i.rectSubPixelOpt(t.x,t.y,t.width-e.borderWidth,t.height-e.borderWidth,e.borderWidth);var a=this.vanchart.getPlotBounds(),r=this.vanchart.getPlotBackgroundOption();this._renderBackgroundWithBounds(e,t),this._renderBackgroundWithBounds(r,a)},_renderTrendLine:function(){this.trendLineSet&&this.trendLineSet.remove(),this.trendLineSet=this.paper.set();var t=this.vanchart.getTrendLineOption(),e=this.vanchart.getPlotBounds(),a=this;t.forEach(function(t){a.trendLineSet.push(a.paper.path(a._getLinePath([t.x1,t.y1],[t.x2,t.y2])).attr({stroke:t.trendLine.color,"stroke-width":t.trendLine.width,"stroke-dasharray":t.trendLine.dashStyle==r.DASH_TYPE?"-":""}))}),this.trendLineSet.transform("t"+e.x+","+e.y)},_renderBackgroundWithBounds:function(t,e){var a=this.vanchart.getParentDom();if(t.chartShadow)a.style.boxShadow="1px 1px 2px rgba(0,0,0,0.1)";else if(t.plotShadow){for(var r=[5,3,1],n=[.05,.1,.15],o=i.rectSubPixelOpt(e.x,e.y,e.width,e.height,1),s=0;3>s;s++){var l=this.paper.rect(o.x,o.y,o.width,o.height).attr({fill:"none",stroke:"rgb(0,0,0)","stroke-opacity":n[s],"stroke-width":r[s],rx:t.borderRadius,ry:t.borderRadius}).transform("t1,1");this.backgroundSet.push(l)}var l=this.paper.rect(o.x,o.y,o.width,o.height).attr({fill:"white",stroke:"none",rx:t.borderRadius,ry:t.borderRadius});this.backgroundSet.push(l)}var l=this.paper.rect(e.x,e.y,e.width,e.height).attr({fill:this._getRaphaelFill(t.color),stroke:t.borderColor,"stroke-width":t.borderWidth,rx:t.borderRadius,ry:t.borderRadius}).attr("fill-opacity",this._getFillOpacity(t.color));if(this.backgroundSet.push(l),t.image){var h=this.paper.image(t.image,e.x,e.y,e.width,e.height);this.backgroundSet.push(h)}},getRenderRoot:function(){return this.paper},refreshInOrder:function(){this._renderBackground();var t=this.vanchart.getFixedComponentRenders(),e=this.vanchart.getFloatComponentRenders();t.forEach(function(t){t.dataChangeRender()});var a=this.vanchart.getChartRenders();a.forEach(function(t){t.refreshInOrder()}),e.forEach(function(t){t.dataChangeRender()}),this._renderTrendLine()},refreshRestore:function(){this._renderBackground();var t=this.vanchart.getFixedComponentRenders(),e=this.vanchart.getFloatComponentRenders();t.forEach(function(t){t.refreshRestore()});var a=this.vanchart.getChartRenders();a.forEach(function(t){t.refreshRestore()}),e.forEach(function(t){t.refreshRestore()}),this._renderTrendLine()},remove:function(){this.paper.remove();var t=this.vanchart.getChartRenders(),e=this.vanchart.getComponentRenders();t.forEach(function(t){t.removeDivLabels()}),e.forEach(function(t){t.removeDivLabels()})}},i.inherit(e,a),t("./RenderLibrary").register(r.VANCHART_VML,e),e}),a("theme/config",["require","../Constants"],function(t){var e=t("../Constants"),a={};return a[e.PIE_CHART]={},a[e.COLUMN_CHART]={xAxis:{type:"category",position:"bottom",lineWidth:1,lineColor:"#cccccc",enableTick:!0,enableMinorTick:!0,showLabel:!0,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,gridLineWidth:0,gridLineColor:"#cccccc",labelStyle:{color:"blue",fontFamily:"Verdana",fontSize:"16px"},formatter:function(){return this}},yAxis:{type:"value",position:"left",lineWidth:1,lineColor:"#cccccc",enableTick:!0,enableMinorTick:!1,showLabel:!0,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,gridLineWidth:1,gridLineColor:"#dddddd",labelStyle:{color:"blue",fontFamily:"Verdana",fontSize:"16px"},formatter:function(){return this}}},a[e.BAR_CHART]={xAxis:{type:"value",position:"bottom",lineWidth:1,lineColor:"#cccccc",enableTick:!0,enableMinorTick:!0,showLabel:!0,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,gridLineWidth:0,gridLineColor:"#cccccc",labelStyle:{color:"blue",fontFamily:"Verdana",fontSize:"16px"},formatter:function(){return this}},yAxis:{type:"category",position:"left",lineWidth:1,lineColor:"#cccccc",enableTick:!0,enableMinorTick:!1,showLabel:!0,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,gridLineWidth:1,gridLineColor:"#dddddd",labelStyle:{color:"blue",fontFamily:"Verdana",fontSize:"16px"},formatter:function(){return this}}},a[e.LINE_CHART]=a[e.AREA_CHART]={plotOptions:{marker:{symbol:"null_marker"},dataLabels:{enabled:!1,align:"outside"}},xAxis:{type:"category",position:"bottom",lineWidth:1,lineColor:"#cccccc",enableTick:!0,showLabel:!0,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,gridLineWidth:0,gridLineColor:"#cccccc",labelStyle:{color:"blue",fontFamily:"Verdana",fontSize:"16px"},formatter:function(t){return t}},yAxis:{type:"value",position:"left",minorTickLength:2,lineWidth:0,lineColor:"#cccccc",enableTick:!0,showLabel:!0,tickColor:"#cccccc",tickWidth:2,tickLength:4,tickPadding:3,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,gridLineWidth:1,gridLineColor:"#dddddd",labelStyle:{color:"blue",fontFamily:"Verdana",fontSize:"16px"},formatter:function(t){return t}}},a[e.GAUGE_CHART]={legend:{enabled:!1},yAxis:{type:"value",showLabel:!0,step:1,enableTick:!0,tickColor:"#BBBBBB",tickWidth:1,enableMinorTick:!0,minorTickColor:"#e2e2e2",minorTickWidth:1,labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"10px"}},pointer:{tickStyle:{color:"#BBBBBB",fontSize:"8px",fontFamily:"Verdana"},tickWidth:1,tickColor:"#666666",minorTickWidth:1,minorTickColor:"#FCFCFC",seriesLabel:{enabled:!0,align:e.BOTTOM,useHtml:!1,style:{color:"#333333",fontSize:"14px",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}"}},valueLabel:{enabled:!0,useHtml:!1,backgroundColor:"#F5F5F7",style:{color:"#333333",fontSize:"11px",fontFamily:"Verdana"},formatter:{identifier:"${SERIES}${VALUE}",valueFormat:"#.##"}},needle:"#E5715A",hinge:"#656B6D",hingeBackgroundColor:"#DCF2F9",paneBackgroundColor:"#FCFCFC"},slot:{percentageLabel:{enabled:!0,useHtml:!1,style:{fontSize:"36px",fontFamily:"Verdana",fontWeight:"bold",textShadow:"0px 2px 0px rgba(0,0,0,0.08)"},formatter:{identifier:"${PERCENT}",percentFormat:"#.##%"}},valueLabel:{enabled:!0,useHtml:!1,style:{color:"#666666",fontSize:"14px",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}${VALUE}",valueFormat:"#.##"}},needle:"#ffffff",slotBackgroundColor:"#eeeeee"},thermometer:{percentageLabel:{enabled:!0,useHtml:!1,align:"left",style:{color:"#333333",fontSize:"12px",fontFamily:"Verdana",fontWeight:"bold"},formatter:{identifier:"${PERCENT}",percentFormat:"#.##%"}},valueLabel:{enabled:!0,useHtml:!1,align:"left",style:{color:"#bababa",fontSize:"12px",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}${VALUE}",valueFormat:"#.##"}},needle:"#ffffff",slotBackgroundColor:"#eeeeee",thermometerLayout:"vertical"},ring:{percentageLabel:{enabled:!0,useHtml:!1,style:{fontSize:"24px",fontFamily:"Verdana",fontWeight:"bold"},formatter:{identifier:"${PERCENT}",percentFormat:"#.##%"}},valueLabel:{enabled:!0,useHtml:!1,style:{color:"#777777",fontSize:"12px",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}${VALUE}",valueFormat:"#.##"}},clockwise:!1,paneBackgroundColor:"#eeeeee",innerPaneBackgroundColor:"#f4f4f4"}},a[e.RADAR_CHART]={plotOptions:{columnType:!1,marker:{symbol:"null_marker"},borderWidth:1,borderColor:"white",lineWidth:1},xAxis:{type:"category",step:1,position:"bottom",showLabel:!0,labelStyle:{color:"blue",fontFamily:"Verdana",fontSize:"9pt"},formatter:function(){return this}},yAxis:{type:"value",step:1,position:"left",lineWidth:1,lineColor:"#cccccc",showLabel:!0,gridLineWidth:1,gridLineColor:"#dddddd",labelStyle:{color:"blue",fontFamily:"Verdana",fontSize:"9pt"},formatter:function(){return this}}},a}),a("theme/default",[],function(){var t={colors:["#63b2ee","#76da91","#f8cb7f","#f89588","#7cd6cf","#9192ab","#7898e1","#efa666","#eddd86","#9987ce"],plotOptions:{dataLabels:{enabled:!1}},tooltip:{enabled:!0},tools:{enabled:!0,hidden:!1},legend:{hiddenColor:"#cccccc",hoverColor:"green",style:{color:"#666666",fontFamily:"Verdana",fontSize:"14px"},position:"right"},backgroundColor:null,backgroundImage:null,borderColor:"#CCCCCC",borderWidth:0,borderRadius:0,shadow:!1,plotBackgroundColor:null,plotBackgroundImage:null,plotBorderColor:"#CCCCCC",plotBorderWidth:0,plotBorderRadius:0,plotShadow:!1};return t}),a("VanChart",["require","./utils/BaseUtils","./utils/QueryUtils","./ComponentLibrary","./ChartLibrary","./Constants","./render/RenderFactory","./component/Title","./component/Axis","./component/CategoryAxis","./component/ValueAxis","./component/DateAxis","./component/Legend","./component/Tooltip","./component/Toolbar","./component/ZoomBar","./component/DataSheet","./render/VanChartSvgRender","./render/VanChartVmlRender","./theme/config","./theme/default"],function(t){function e(t,e,a){this.isInitStatus=!0,this.ID_PREFIX="VANCHARTS"+Math.random()+"INDEX",this.dom=e,this.dom.style.cssText+="-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;",this.dom.onselectstart=this.dom.ondrag=function(){return!1},this.vancharts=a,this.render=s.getRender(o.VANCHART,this),this.refresh(t),this._setDomEvent()}var a=t("./utils/BaseUtils"),i=t("./utils/QueryUtils"),r=t("./ComponentLibrary"),n=t("./ChartLibrary"),o=t("./Constants"),s=t("./render/RenderFactory"),l=[o.TOOLBAR_COMPONENT,o.TITLE_COMPONENT,o.LEGEND_COMPONENT,o.ZOOM_COMPONENT,o.DATA_SHEET_COMPONENT,o.X_AXIS_COMPONENT,o.Y_AXIS_COMPONENT,o.TOOLTIP_COMPONENT];t("./component/Title"),t("./component/Axis"),t("./component/CategoryAxis"),t("./component/ValueAxis"),t("./component/DateAxis"),t("./component/Legend"),t("./component/Tooltip"),t("./component/Toolbar"),t("./component/ZoomBar"),t("./component/DataSheet"),t("./render/VanChartSvgRender"),t("./render/VanChartVmlRender");var h=5;return e.prototype={constructor:e,componentType:o.VANCHART,refresh:function(t){this._init(t),this._refresh()},_refresh:function(){this._refreshOptions(),this.render.render()},refreshAddData:function(){this._refreshOptions(),this.render.dataAddRender()},refreshDeleteData:function(){this._refreshOptions(),this.render.dataDeleteRender()},refreshIncreaseOrder:function(){this.currentOption.increateOrderred=!0,this.currentOption.decreaseOrderred=!1;for(var t in this.charts)this.charts[t].orderDataIncrease();this.render.refreshInOrder()},refreshDecreaseOrder:function(){this.currentOption.decreaseOrderred=!0,this.currentOption.increateOrderred=!1;for(var t in this.charts)this.charts[t].orderDataDecrease();this.render.refreshInOrder()},refreshRestore:function(){this.isInitStatus=!0,this.currentOption=a.clone(this.restoreOption),this.currentOption.plotOptions.columnType&&this.currentOption.chartType==o.RADAR_CHART&&this.currentOption.series.forEach(function(t){t.stack=o.RADAR_CHART});for(var t in this.components)this.components[t].updateStatus();this.updatePieChartDataVisible(),this._refreshOptions(),this.render.refreshRestore()},resize:function(t,e){},_init:function(t){this.width=this._getDomWidth(),this.height=this._getDomHeight(),this.bounds={x:h,y:h,width:this.width-2*h,height:this.height-2*h},this.chartBounds={x:0,y:0,width:this.width,height:this.height},this.components={},this.charts={},this._updateOption(t)},_getDomWidth:function(){var t=this.dom,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0},_getDomHeight:function(){var t=this.dom,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0},_updateOption:function(t){t.series=t.series||[],this.themeConfig=this._normalizeOption(this._mergeThemeConfig(t),t),this.restoreOption=i.merge(a.clone(t),this.themeConfig,!1),this.currentOption=a.clone(this.restoreOption),this.currentOption.plotOptions.columnType&&this.currentOption.chartType==o.RADAR_CHART&&this.currentOption.series.forEach(function(t){t.stack=o.RADAR_CHART})},_normalizeOption:function(t,e){if(t=a.clone(t),e.xAxis){a.isArray(e.xAxis)||(e.xAxis=[e.xAxis]);for(var i=[],r=0,n=e.xAxis.length;n>r;r++)i.push(a.clone(t.xAxis));t.xAxis=i}else e.xAxis=t.xAxis;if(e.yAxis){a.isArray(e.yAxis)||(e.yAxis=[e.yAxis]);for(var i=[],r=0,n=e.yAxis.length;n>r;r++)i.push(a.clone(t.yAxis));t.yAxis=i}else e.yAxis=t.yAxis;return t},_mergeThemeConfig:function(e){var a=t("./theme/config"),r=[];e.chartType&&r.push(e.chartType);for(var n=0,o=e.series.length;o>n;n++){var s=e.series[n].type;s&&r.push(e.series[n].type)}for(var l={},n=0,o=r.length;o>n;n++)i.merge(l,a[r[n]],!0);var h=t("./theme/default");return i.merge(l,h,!0),l},_isComponentEnabled:function(t){return null!=t.enabled&&void 0!=t.enabled?t.enabled:!0},_refreshOptions:function(){this.bounds={x:h,y:h,width:this.width-2*h,height:this.height-2*h};for(var t,e,a,i=this.currentOption,s=0;s<l.length;s++)e=l[s],a=this.components[e],i[e]?a?a.refresh(i):this._isComponentEnabled(i[e])&&(t=r.get(/Axis/.test(e)?o.AXIS_COMPONENT:e),a=new t(this,i,e),this.components[e]=a):a&&(a.remove(),this.components[e]=null,delete this.components[e]);this._dealFirstAndLastAxisLabel(i),this._dealDataSheetBounds(),this._updateZoomBounds(),this._updateAxisRange(),this._dealOnZeroAxisBounds();for(var c,d=i.chartType||o.LINE_CHART,u={},s=0,g=i.series.length;g>s;s++){var f=i.series[s],p=f.type||d;if(!u[p])if(u[p]=!0,c=n.get(p),this.charts[p])this.charts[p].refresh(i);else if(c){var m=new c(this,i,p);this.charts[p]=m}}},_dealOnZeroAxisBounds:function(){this.components.xAxis&&this.components.xAxis.dealOnZero(),this.components.yAxis&&this.components.yAxis.dealOnZero()},_dealFirstAndLastAxisLabel:function(t){var e,a,i,r;e=a=i=r=0;var n=[];this.components.xAxis&&(n=n.concat(this.components.xAxis.getAllAxis())),this.components.yAxis&&(n=n.concat(this.components.yAxis.getAllAxis()));for(var s=0,l=n.length;l>s;s++){var h=n[s];h.getRender()&&(h.isHorizontal()?(e=Math.max(e,h.getStartLabelDim().width),a=Math.max(a,h.getEndLabelDim().width)):(i=Math.max(i,h.getStartLabelDim().height),r=Math.max(r,h.getEndLabelDim().height)))}var c=this.bounds.x,d=this.bounds.y,u=this.bounds.width,g=this.bounds.height;this.bounds={x:c+Math.ceil(e/2),y:d+Math.ceil(i/2),width:u-Math.ceil((e+a)/2),height:g-Math.ceil((i+r)/2)};var f=this.bounds,p=this.bounds.x-c,m=this.bounds.x+this.bounds.width-c-u,v=this.bounds.y-d,y=this.bounds.y+this.bounds.height-d-g;n.forEach(function(t){var e=t.getPosition();t.isHorizontal()?(t.bounds.x=f.x,t.bounds.width=f.width,t.bounds.y+=e==o.TOP?v:y):(t.bounds.x+=e==o.LEFT?p:m,t.bounds.y=f.y,t.bounds.height=f.height)})},_dealDataSheetBounds:function(){var t=this.components[o.DATA_SHEET_COMPONENT],e=this.xAxis();if(t&&e&&e.getPosition()==o.BOTTOM&&e.type==o.CATEGORY_AXIS_COMPONENT){var a=this._getAxisForPosition(o.Y_AXIS_COMPONENT,o.LEFT),i=this._getAxisForPosition(o.Y_AXIS_COMPONENT,o.RIGHT),r=this._getAxisForPosition(o.X_AXIS_COMPONENT,o.BOTTOM),n=t.getSeriesNameLength();if(this.bounds.x<n){var s=n-this.bounds.x+h;this.bounds.x+=s,this.bounds.width-=s,a.forEach(function(t){t.bounds.x+=s})}var l=t.getDataSheetHeight();a.forEach(function(t){t.bounds.height-=l}),i.forEach(function(t){t.bounds.height-=l}),r.forEach(function(t){t.bounds.y-=l}),this.bounds.height-=l,t.bounds={x:this.bounds.x-n,y:this.bounds.y+this.bounds.height,width:n+this.bounds.width,height:l}}},_getAxisForPosition:function(t,e){var a=[];if(this.components[t]){var i=this.components[t].getAllAxis();i.forEach(function(t){t.componentOption.position==e&&a.push(t)})}return a},_updateZoomBounds:function(){if(this.components[o.ZOOM_COMPONENT]){var t=this.components[o.ZOOM_COMPONENT],e=this.xAxis(0),a=e?e.bounds:this.getPlotBounds();t.bounds.x=a.x,t.bounds.width=a.width}},_updateAxisRange:function(){this.components.xAxis&&this.components.xAxis.updateAxisRange(),this.components.yAxis&&this.components.yAxis.updateAxisRange()},getPlotBackgroundOption:function(){var t=this.currentOption;return{color:t.plotBackgroundColor,image:t.plotBackgroundImage,borderColor:t.plotBorderColor,borderWidth:t.plotBorderWidth,borderRadius:t.plotBorderRadius,plotShadow:t.plotShadow}},getChartBackgroundOption:function(){var t=this.currentOption;return{color:t.backgroundColor,image:t.backgroundImage,borderColor:t.borderColor,borderWidth:t.borderWidth,borderRadius:t.borderRadius,chartShadow:t.shadow}},getTrendLineOption:function(){for(var t=this.currentOption,e=t.series,a=[],r=0,n=e.length;n>r;r++){var s=e[r],l=i.queryList([s,t.plotOptions],"trendLine");if(l&&this.isSeriesVisible(r)){var h=t.chartType||s.type,c=this.charts[h].getTrendLineXYValues(s),d=c[0],u=c[1],g=c[2];if(!(d.length<=1)){var f,p,m,v;if(g==o.TOP||g==o.BOTTOM){var y=this._leastSquares(c[0],c[1]);f=d[0],m=y[0]*f+y[1],p=d[d.length-1],v=y[0]*p+y[1]}else{var y=this._leastSquares(c[1],c[0]);m=u[0],f=y[0]*m+y[1],v=u[u.length-1],p=y[0]*v+y[1]}a.push({x1:f,y1:m,x2:p,y2:v,trendLine:l})}}}return a},_leastSquares:function(t,e){var a=function(t,e){return t+e},i=1*t.reduce(a)/t.length,r=1*e.reduce(a)/e.length,n=t.map(function(t){return Math.pow(t-i,2)}).reduce(a),o=(e.map(function(t){return Math.pow(t-r,2)}).reduce(a),t.map(function(t,a){return(t-i)*(e[a]-r)}).reduce(a)),s=o/n,l=r-i*s;return[s,l]},getParentDom:function(){return this.dom},chartWidth:function(){return this.width},chartHeight:function(){return this.height},setPlotBounds:function(t){this.bounds=t},getPlotClipBounds:function(){var t=0,e=0,a=this.bounds.width,i=this.bounds.height,r={},n=[];return this.components.xAxis&&(n=n.concat(this.components.xAxis.getAllAxis())),this.components.yAxis&&(n=n.concat(this.components.yAxis.getAllAxis())),n.forEach(function(t){var e=t.getPosition();t.isOnZero()||r[e]||(r[e]=t.getLineWidth())}),e=r[o.TOP]?Math.ceil(r[o.TOP]/2):0,i-=e,i=r[o.BOTTOM]?i-Math.ceil(r[o.BOTTOM]/2-.5):i,t=r[o.LEFT]?Math.ceil(r[o.LEFT]/2):0,a-=t,a=r[o.RIGHT]?a-Math.ceil(r[o.RIGHT]/2):a,{x:t,y:e,width:a,height:i}},getPlotBounds:function(){return this.bounds},getChartBounds:function(){return this.chartBounds},xAxis:function(t){t||(t=0);var e=this.components.xAxis;return e?e.getAxis(t):null},yAxis:function(t){t||(t=0);var e=this.components.yAxis;return e?e.getAxis(t):null},getComponents:function(){return this.components},getCharts:function(){return this.charts},getRender:function(){return this.render},getChartRenders:function(){var t=[];for(var e in this.charts){var a=this.charts[e].getRender();a&&t.push(a)}return t},getComponentRenders:function(){var t=[o.TITLE_COMPONENT,o.TOOLBAR_COMPONENT,o.LEGEND_COMPONENT,o.ZOOM_COMPONENT,o.DATA_SHEET_COMPONENT,o.X_AXIS_COMPONENT,o.Y_AXIS_COMPONENT,o.TOOLTIP_COMPONENT],e=[],a=this;return t.forEach(function(t){if(a.components[t]){var i=a.components[t].getRender();i&&e.push(i)}}),e},getFixedComponentRenders:function(){var t=[o.TITLE_COMPONENT,o.TOOLBAR_COMPONENT,o.LEGEND_COMPONENT,o.ZOOM_COMPONENT,o.DATA_SHEET_COMPONENT,o.X_AXIS_COMPONENT,o.Y_AXIS_COMPONENT,o.TOOLTIP_COMPONENT],e=[],a=this;return t.forEach(function(t){if(a.components[t]){var i=a.components[t];if(!i.isFloat){var r=i.getRender();r&&e.push(r)}}}),e},getFloatComponentRenders:function(){var t=[o.TITLE_COMPONENT,o.TOOLBAR_COMPONENT,o.LEGEND_COMPONENT,o.ZOOM_COMPONENT,o.DATA_SHEET_COMPONENT,o.X_AXIS_COMPONENT,o.Y_AXIS_COMPONENT,o.TOOLTIP_COMPONENT],e=[],a=this;return t.forEach(function(t){if(a.components[t]){var i=a.components[t];if(i.isFloat){var r=i.getRender();r&&e.push(r)}}}),e},getThemeConfig:function(){return this.themeConfig},isSeriesVisible:function(t){var e=this.currentOption.series[t],r=this.currentOption.plotOptions;return a.pick(i.queryList([e,r],"visible"),!0)},updatePieChartData:function(t,e){this.charts[o.PIE_CHART]&&this.charts[o.PIE_CHART].updatePieChartData(t,e)},updatePieChartDataVisible:function(){var t=this.charts[o.PIE_CHART];t&&t.updatePieChartDataVisible()},getToolbarWidth:function(){return this.components[o.TOOLBAR_COMPONENT]?this.components[o.TOOLBAR_COMPONENT].getToolbarWidth():0},getToolbarHeight:function(){var t=this.components[o.TITLE_COMPONENT];return!this.components[o.TOOLBAR_COMPONENT]||t&&!t.isFloat?0:this.components[o.TOOLBAR_COMPONENT].getToolbarHeight()},getComponent:function(t){return this.components[t]},getIDPrefix:function(){return this.ID_PREFIX},getBodyClipID:function(){return"bodyClip"+this.getIDPrefix()},getOptions:function(){return this.currentOption},remove:function(){this.render.remove(),this.components[o.TOOLTIP_COMPONENT]&&this.components[o.TOOLTIP_COMPONENT].remove()},_setDomEvent:function(){a.addEvent(this.dom,"mousedown",this._onContainerMouseDown.bind(this)),a.addEvent(this.dom,"mouseup",this._onContainerMouseUp.bind(this)),a.addEvent(this.dom,"mouseleave",this._onContainerMouseLeave.bind(this)),a.addEvent(this.dom,"mouseenter",this._onContainerMouseEnter.bind(this)),a.addEvent(this.dom,"mousemove",this._onContainerMouseMove.bind(this)),a.addEvent(this.dom,"click",this._onContainerClick.bind(this))},_onContainerClick:function(t){t=t||window.event,this.target&&this.target.onContainerClick(t)},_onContainerMouseDown:function(t){t=t||window.event,this.target&&this.target.onContainerMouseDown(t),this._supportCoordinateZoom()&&this.render.onZoomStart(t,this.target)},_onContainerMouseUp:function(t){t=t||window.event,this.target&&this.target.onContainerMouseUp(t),this._supportCoordinateZoom()&&this.render.onZoomEnd(t)},_onContainerMouseMove:function(t){t=t||window.event,this.target&&this.target.onContainerMouseMove(t),
this._supportCoordinateZoom()&&this.render.onZoom(t)},_onContainerMouseEnter:function(t){t=t||window.event,this.target&&this.target.onContainerMouseEnter(t)},_onContainerMouseLeave:function(t){t=t||window.event,this.target&&this.target.onContainerMouseLeave(t)},_supportCoordinateZoom:function(){return a.isSupportSVG()&&this.currentOption.zoom&&this.currentOption.zoom.zoomType},setTarget:function(t){this.target=t},setData:function(t){for(var e in this.components)e._needLayout=!0;this._updateOption(t),this._refreshOptions(),this.render.monitorRender()}},e}),a("VanCharts",["require","./utils/BaseUtils","./ChartLibrary","./VanChart"],function(t){function e(t){var e=t.getAttribute(n);if(e||(e=n+o++,t.setAttribute(n,e)),s[e]){var i=s[e].svgRoot;i&&i.remove()}else{var r=new a(t);s[e]=r}return s[e]}function a(t){this.dom=t,this.charts=[]}var i=t("./utils/BaseUtils"),r=(t("./ChartLibrary"),t("./VanChart")),n="vancharts_index_",o=0,s=Object.create(null);return a.prototype={constructor:a,setOptions:function(t){i.isArray(t)||(t=[t]),this.options=t;for(var e=0,a=t.length;a>e;e++)this.charts.push(new r(t[e],this.dom,this))},resize:function(t){this.charts.forEach(function(t){t.remove()}),this.charts=[],t=t||this.options,this.options=t,this.setOptions(t)},setData:function(t){i.isSupportSVG()?this.charts.forEach(function(e){e.setData(t)}):this.resize(t)}},{init:e}}),a("chart/BaseChart",["require","../utils/BaseUtils","../utils/QueryUtils","../component/Base","../Constants","../utils/QueryUtils","../utils/ColorUtils"],function(t){function e(t){return.5>t?Math.sqrt(t/2):1-Math.sqrt(2-2*t)/2}function a(t,e,a){n.call(this,t,e,a)}var i=t("../utils/BaseUtils"),r=t("../utils/QueryUtils"),n=t("../component/Base"),o=t("../Constants"),r=t("../utils/QueryUtils"),s=t("../utils/ColorUtils"),l="class";return a.prototype={constructor:a,_isStackedSery:function(t){var e=this.option.series[t],a=r.queryList([e,this.option.plotOptions],"stack");return null!=a&&void 0!=a},_buildLocationMap:function(){for(var t={},e=this.option.series,a=0;a<e.length;a++){var i=e[a],r=i.type||this.option.chartType;if(r==this.componentType&&this.vanchart.isSeriesVisible(a)){var n=this._getAxisPair(i).baseAxis,o=n.getPosition(),s=n.getAxisIndex();t[o]=t[o]||[],t[o][s]=t[o][s]||[],t[o][s].push(a)}}var l={},h={};for(var c in t){for(var d=[],u=t[c]||[],g=0;g<u.length;g++){var f=u[g];if(f)for(var p=0,m=0;m<f.length;m++){var i=e[f[m]],v=i.name;null!=i.stack&&void 0!=i.stack&&(v=i.stack+""),null!=l[v]&&void 0!=l[v]?d[g][l[v]].push(f[m]):(l[v]=p,d[g]=d[g]||[],d[g][p]=[f[m]],p++)}}h[c]=d}return h},_mergeCommonAttributes:function(t,e){function a(e){e=e||window.event,f._showTooltip(t,e),f.makeChosenState(t)}function i(){f._hideTooltip(),f.cancelChosenState(t)}function n(e){e=e||window.event,f._showTooltip(t,e)}function l(e){e=e||window.event;var a=t.hyperlink;a&&window.FR&&FR.doHyperlink(e,new Function("return "+a)(),!0)}var h=this._getSeriesType(t.seriesIndex),c=h==o.PIE_CHART?t.categoryIndex:t.seriesIndex,d=this._getDefaultSeriesColor(c);d=r.queryList(e,"color")||d,d=this._getBandsColor(t)||d;var u=r.queryList(e,"dataLabels"),g="-"===t.value;t.value=g?0:t.value,r.merge(t,{isNull:g,color:d,highlight:s.getHighLightColor(d),dataLabels:g?null:u,mouseOverColor:r.queryList(e,"mouseOverColor"),mouseEnter:a,mouseLeave:i,mouseMove:n,click:l},!0);var f=this},_showTooltip:function(t,e){var a=this.getTooltipComponent(),i=t.tooltip,r=a.calculateTooltipDivDim(i),n=this.getTooltipPos(t,r,e);a.show(n,i)},_hideTooltip:function(){var t=this.getTooltipComponent();t.hide()},_getBandsColor:function(t){var e=this.option.series[t.seriesIndex],a=e.bands||this.option.plotOptions.bands;if(a&&this.vanchart[a.axis]){var i=this.vanchart[a.axis](e[i]);if(i.type==o.VALUE_AXIS_COMPONENT){var r=i.getValueFromData(t.data);if(r>=a.from&&r<=a.to)return a.color}else if(i.type==o.CATEGORY_AXIS_COMPONENT){var n=i.getTickScale(),s=n(a.from),l=n(a.to);n.rangeBand&&(l+=n.rangeBand(),s-=n.rangeBand());var h=n(t.category);if(h>s&&l>h)return a.color}}},_getMarkerData:function(t,a,n,s){var h=this.option.series[a],c=h.data.length,d=h.data[t],u=[d,h,this.option.plotOptions],g=i.clone(r.queryList(u,"marker")),f=r.queryList(u,"borderWidth")||0,p=r.queryList(u,"borderColor")||"rgba(255,255,255,0)";i.isSupportSVG()&&!i.isIE()||!i.isImageMarker(g.symbol)||(g=i.clone(g),g.symbol=o.CIRCLE);var m=n.getValueFromData(d,t),v=s.getValueFromData(d),y=n.isAxisReversed(),_={data:d,hyperlink:d.hyperlink,seriesName:h.name,seriesID:l+i.removeAllBlank(encodeURI(h.name)),seriesIndex:a,marker:g,borderWidth:f,borderColor:p,category:m,y:v,y0:0,value:v,isByPercent:s.isByPercent(),delay:800*e((y?c-t-1:t)/c),dataID:l+i.removeAllBlank(encodeURI(m+h.name))},u=[d,h,this.option.plotOptions];return this._mergeCommonAttributes(_,u),_.isNull&&(_.y=0),_.marker.fillColor=_.marker.fillColor?_.marker.fillColor:_.color,_},getTooltipPos:function(t,e,a){if(t&&t.tooltip){var i,r=t.tooltip||t.data.tooltip,n=this.getVanchartRender().getRenderRoot();if(r.follow){var o=a?this.getMousePos(a):d3.mouse(n.node());i=[o[0]+10,o[1]+10]}else i=this._getFixedPos(t,e);var s=this.vanchart.getChartBounds(),l=s.y,h=s.y+s.height,c=s.x,d=s.x+s.width,u=i[0],g=i[1];return c>u?u+=c-u:u+e.width>d&&(u-=u+e.width-d),l>g?g+=l-g:g+e.height>h&&(g-=g+e.height-h),[u,g]}},_getArcPoint:function(t,e){return[t*Math.sin(e),-t*Math.cos(e)]},isSupportAnimation:function(){var t=this.option.plotOptions;return t?!!t.animation:!1},_calculatePercentage:function(t){var e=0;t.forEach(function(t){e+=Math.abs(t.value)}),e=e>0?e:1,t.forEach(function(t){t.percentage=Math.abs(t.value)/e})},makeChosenState:function(t){this.render&&this.render.makeChosenState(t)},cancelChosenState:function(t){this.render&&this.render.cancelChosenState(t)},_orderDataInOrder:function(t){var e=this.option.series,a=this._buildLocationMap();for(var r in a)for(var n=a[r],s=n.length-1;s>=0;s--){var l=n[s];if(l.length&&l[0].length){for(var h=e[l[0][0]],c=this.vanchart.xAxis(h.xAxis),d=this.vanchart.yAxis(h.yAxis),u=c.type==o.CATEGORY_AXIS_COMPONENT?c:d,g=c.type==o.VALUE_AXIS_COMPONENT?c:d,f=[],p=[],m=0,v=l.length;v>m;m++)for(var y=l[m],_=0,b=y.length;b>_;_++)for(var h=e[y[_]],x=0,L=h.data.length;L>x;x++)i.hasNotDefined(f[x])&&(f[x]=0,p.push(x)),f[x]+=g.getValueFromData(h.data[x]);if(u.type!=o.CATEGORY_AXIS_COMPONENT)continue;for(var C=u.getCategories(),m=0;m<f.length;m++){for(var T=m,A=f[m],_=m+1;_<f.length;_++)t?f[_]<A&&(A=f[_],T=_):f[_]>A&&(A=f[_],T=_);var k=f[m];f[m]=f[T],f[T]=k,k=p[m],p[m]=p[T],p[T]=k}var R=[];p.forEach(function(t){R.push(C[t])}),u.setCategories(R),l.forEach(function(t){t.forEach(function(t){var a=[],i=e[t].data;e[t].data=a,p.forEach(function(t){a.push(i[t])})})});for(var O=0,S=e.length;S>O;O++){var h=e[O],P=this._getAxisPair(h).baseAxis;if(!this.vanchart.isSeriesVisible(O)&&P&&P.getPosition()==r){var w=[],D=h.data;h.data=w,p.forEach(function(t){w.push(D[t])})}}}}},_onCommonContainerClick:function(t){var e=this.getMousePos(t),a=this.getPlotBounds();if(i.containsPoint(a,e)&&this.lastChosen){var r=this.lastChosen.hyperlink;r&&window.FR&&FR.doHyperlink(t,new Function("return "+r)(),!0)}},_onLineSeriesContainerLeave:function(){this.render._cancelChosenStateWithData(this.lastChosen),this._hideTooltip(),this.lastChosen=null},_onLineSeriesContainerMove:function(t){var e=this.getMousePos(t),a=this.getPlotBounds(),r=this.getClosestPoint(e);i.containsPoint(a,e)&&r?(this.render._makeChosenStateWithData(r),this._showTooltip(r,t),this.lastChosen&&this.lastChosen.dataID!=r.dataID&&this.render._cancelChosenStateWithData(this.lastChosen),this.lastChosen=r):(this.render._cancelChosenStateWithData(this.lastChosen),this._hideTooltip(),this.lastChosen=null)},orderDataIncrease:function(){},orderDataDecrease:function(){},zoomRefresh:function(){}},i.inherit(a,n),a}),a("render/PieSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/ColorUtils","../Constants","./RenderLibrary"],function(t){function e(t){n.call(this,t),this.pie=t,this.lastData={},this.byDataID=!1}var a="path-g",i="label-g",r="pie-g",n=t("./BaseRender"),o=t("../utils/BaseUtils"),s=t("../utils/ColorUtils"),l=t("../Constants"),h=1.1,c=1e3,d="bounce";return e.prototype={constructor:e,render:function(){var t=this.pie.getPlotBounds(),e=this.pie.getVanchartRender().getRenderRoot();this._bodyG||(this._bodyG=e.append("g")),this._bodyG.attr("transform",o.makeTranslate(t));var n=this,s=this.pie.getPieData();s=o.objectToArray(s);var l=this._bodyG.selectAll("g."+r).data(s,function(t){return t.className});l.attr("transform",function(t){return o.makeTranslate([t.centerX,t.centerY])}).each(function(t){var e=d3.select(this);n._updateDefs(e.select("defs"),t),n._updateSlices(e.select("g."+a),t),n._drawLabel(e.select("g."+i),t,c),n._updateLastData(t.category,t.points)});var h=l.enter().append("g").attr("class",function(t){return r+" "+t.className});l.exit().remove(),h.each(function(t){var e=d3.select(this).attr("transform",o.makeTranslate([t.centerX,t.centerY]));e.append("defs"),e.append("g").attr("class",a),e.append("g").attr("class",i),n._updateDefs(e.select("defs"),t),n._updateSlices(e.select("g."+a),t,!0),n._drawLabel(e.select("g."+i),t,c),n._updateLastData(t.category,t.points)}),this.updateEventHandler(c)},_updateDefs:function(t,e){if(e.style&&e.style==l.STYLE_GRADUAL){var a=this,i=e.points,r=t.selectAll("radialGradient").data(i,function(t){return t.dataID}),n=r.enter().append("radialGradient");n.append("stop").attr("class","startStop"),n.append("stop").attr("class","endStop"),r.attr("gradientUnits","userSpaceOnUse").attr("cx","0%").attr("cy","0%").attr("r",function(t){return t.radius+"px"}).attr("id",function(t){return a._getGradualID(t)}),r.select("stop.startStop").attr("offset",function(t){return t.innerRadius/t.radius*100+"%"}).style("stop-color",function(t){return s.getColorWithDivider(t.color,.8)}),r.select("stop.endStop").attr("offset","100%").style("stop-color",function(t){return t.color})}},_updateSlices:function(t,e,a){var i,r=d3.svg.arc().innerRadius(e.innerRadius),n=e.points,s=e.style,l=this;i=this.byDataID?t.selectAll("path").data(n,function(t){return t.dataID}):t.selectAll("path").data(n);var h=d3.transform(t.attr("transform")).rotate;this.pie.recalculateLabelPos(e,o.toRadian(h));var u=i.exit();u.transition().ease(d).duration(c).attrTween("d",function(t){var e,a=this._dataIndex_,i=this._current_.radius;if(0==a)e={startAngle:0,endAngle:0,radius:i};else if(a==n.length)e={startAngle:2*Math.PI,endAngle:2*Math.PI,radius:i};else{var o=n[a-1];if(o.lastShape){var s=Math.abs(o.lastShape.endAngle-o.endAngle),l=t.startAngle+s;e={startAngle:l,endAngle:l,radius:i}}else e={startAngle:t.startAngle,endAngle:t.startAngle,radius:t.radius}}var h=d3.interpolate(this._current_,e);return function(e){return r.outerRadius(t.radius)(h(e))}}).each("end",function(){d3.select(this).remove()}),i.enter().append("path");var g=this.pie.isSupportAnimation()?c:0;i.each(function(t){this._dataIndex_=t.dataIndex,d3.select(this).attr("class",t.dataID).style("fill",l._getFill(s,t)).style("stroke",t.borderColor).style("stroke-width",t.borderWidth).transition().ease("bounce").duration(g).attrTween("d",function(t){var e=this._current_;if(a)e={startAngle:0,endAngle:0,radius:t.radius};else if(!e){var i=t.dataIndex;if(0==i)e={startAngle:0,endAngle:0,radius:t.radius};else if(i==n.length-1)e={startAngle:2*Math.PI,endAngle:2*Math.PI,radius:t.radius};else{var o=n[i-1];if(o.lastShape){var s=Math.abs(o.lastShape.endAngle-o.endAngle),h=t.startAngle+s;e={startAngle:h,endAngle:h,radius:t.radius}}else e={startAngle:t.startAngle,endAngle:t.startAngle,radius:t.radius}}}var c=d3.interpolate(e,l._getArcData(t));return this._current_=c(1),function(t){var e=c(t);return r.outerRadius(e.radius)(e)}})})},_drawLabel:function(t,e,a){a=a||0,a=this.pie.isSupportAnimation()?a:0;var i=this.pie.getPlotBounds(),r=e.centerX+i.x,n=e.centerY+i.y;this._drawSvgDataLabels(t,e.points,r,n,a,e.category)},onDragStart:function(t,e){var r=this._bodyG.select("g."+t.className),n=r.select("g."+i),o=r.select("g."+a);this._removeSvgDataLabels(n,t.category),o.selectAll("path").call(this.removeShapeEventHandler.bind(this)),this.initPos=e,this.initRotate=d3.transform(o.attr("transform")).rotate},_getPositionInPie:function(t,e){var a=this.pie.getPlotBounds(),i=t[0]-a.x-e.centerX,r=t[1]-a.y-e.centerY;return[i,r]},onDrag:function(t,e){var i=this._bodyG.select("g."+t.className),r=i.select("g."+a),n=this._getAngle(this._getPositionInPie(this.initPos,t),[0,0]),o=this._getAngle(this._getPositionInPie(e,t),[0,0]),s=o-n+this.initRotate;console.log("start:"+n+"  end:"+o+"  rotate:"+s),r.attr("transform","rotate("+s+",0,0)")},onDragEnd:function(t){var e=this._bodyG.select("g."+t.className),r=e.select("g."+i),n=e.select("g."+a),s=d3.transform(n.attr("transform")).rotate;this.pie.recalculateLabelPos(t,o.toRadian(s)),this._drawLabel(r,t)},_getFill:function(t,e){return t==l.STYLE_GRADUAL?"url(#"+this._getGradualID(e)+")":e.color},_getGradualID:function(t){return t.dataID+this.pie.vanchart.getIDPrefix()},_getArcData:function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,radius:t.radius}},_getAngle:function(t,e){return Math.atan2(t[1]-e[1],t[0]-e[0])/(Math.PI/180)},_updateLastData:function(t,e){var a=this.lastData[t];if(this.lastData[t]=e,a){for(var i={},r=0,n=a.length;n>r;r++){var o=a[r],s=this.byDataID?o.dataID:o.dataIndex;i[s]=o}for(var r=0,n=e.length;n>r;r++){var l=e[r],s=this.byDataID?l.dataID:l.dataIndex,h=i[s];h&&(l.lastShape=this._getArcData(h))}}},monitorRender:function(){this.removeEventHandler(),this.byDataID=!0,this.render()},refreshRestore:function(){this.removeEventHandler(),this.byDataID=!1,this.render()},refreshInOrder:function(){this.removeEventHandler(),this.byDataID=!1,this.render()},dataChangeRender:function(){this.removeEventHandler(),this.byDataID=!0,this.render()},makeChosenState:function(t){if(t&&t.elWrapper){var e=this,a=t.elWrapper.node();clearTimeout(a.cancelChosenTimeout);var i=this.pie.getPieData()[t.category],r=d3.svg.arc().innerRadius(i.innerRadius);a&&!a.isChosen&&(t.elWrapper.style("fill",function(t){return t.mouseOverColor?t.mouseOverColor:e._getFill(t.style,t)}).transition().ease("elastic").duration(800).attrTween("d",function(t){var e=t.radius,a=d3.interpolate(e,1.1*e);return function(e){return r.outerRadius(a(e))(t)}}),t.elWrapper.node().isChosen=!0)}this.updateTarget()},cancelChosenState:function(t){if(t&&t.elWrapper){var e=this.pie.getPieData()[t.category],a=d3.svg.arc().innerRadius(e.innerRadius),i=this,r=t.elWrapper,n=r.node();if(!n||!n.isChosen)return;clearTimeout(n.cancelChosenTimeout),n.cancelChosenTimeout=setTimeout(function(){n.isChosen&&(r.style("fill",function(t){return i._getFill(t.style,t)}).transition().ease("elastic").duration(600).attrTween("d",function(t){var e=t.radius,i=d3.interpolate(e*h,e);return function(e){return a.outerRadius(i(e))(t)}}),n.isChosen=!1)},50)}},addEventHandler:function(){var t=this;this._bodyG.selectAll("g."+r).each(function(){d3.select(this).select("g."+a).selectAll("path").call(t.addShapeEventHandler.bind(t))})},removeEventHandler:function(){var t=this;this._bodyG.selectAll("g."+r).each(function(){d3.select(this).select("g."+a).selectAll("path").call(t.removeShapeEventHandler.bind(t))})}},o.inherit(e,n),t("./RenderLibrary").register(l.PIE_SVG,e),e}),a("render/PieVmlRender",["require","./BaseRender","../utils/BaseUtils","../utils/ColorUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.pie=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../Constants"),o=1.1;2*Math.PI;return e.prototype={constructor:e,render:function(){var t=this.pie.getVanchartRender().getRenderRoot(),e=this.pie.getPlotBounds();this._bodySet=t.set(),t.customAttributes.segment=function(t,e,a,i,n){var o=d3.svg.arc().innerRadius(t).outerRadius(e),s={path:o({startAngle:a,endAngle:i})};return n&&(s.fill=n,s["fill-opacity"]=r.getColorOpacity(n)),s};var a=this.pie.getPieData();for(var i in a){var n=t.set();this._bodySet.push(n);for(var o=a[i],s=e.x+o.centerX,l=e.y+o.centerY,h=o.innerRadius,c=o.points,d=0,u=c.length;u>d;d++){var g=c[d],f=t.path().attr({segment:[h,g.radius,g.startAngle,g.endAngle],fill:g.color,"fill-opacity":r.getColorOpacity(g.color),stroke:g.borderColor,"stroke-width":g.borderWidth});this.addShapeEventHandler(f,g),n.push(f)}n.transform("t"+s+","+l)}this._renderDataLabels(t)},_renderDataLabels:function(t){var e=this.pie.getPieData();for(var a in e){var i=t.set();this._bodySet.push(i);var r=e[a],n=this.pie.getPlotBounds(),o=n.x+r.centerX,s=n.y+r.centerY,l=r.points;this._drawVmlDataLabels(t,i,l,o,s)}},dataChangeRender:function(){this._removeAll(),this.render()},refreshInOrder:function(){this._refreshNoDataCountChange()},refreshRestore:function(){this._refreshNoDataCountChange()},_refreshNoDataCountChange:function(){this._removeAll();var t=this.pie.getPieData();for(var e in t){var a=t[e];this.pie.recalculateLabelPos(a,0)}this.render()},_removeAll:function(){this._bodySet.remove(),this.labelDivManager.clearAllLabels()},makeChosenState:function(t){var e=t.elWrapper;if(e){var a=t.startAngle,i=t.endAngle,r=t.innerRadius,n=t.radius,s=t.mouseOverColor?t.mouseOverColor:t.color;e.attr("segment")&&e.attr({segment:[r,n*o,a,i,s]})}},cancelChosenState:function(t){var e=t.elWrapper;if(e){var a=t.startAngle,i=t.endAngle,r=t.innerRadius,n=t.radius;e.attr("segment")&&e.attr({segment:[r,n,a,i,t.color]})}}},i.inherit(e,a),t("./RenderLibrary").register(n.PIE_VML,e),e}),a("chart/Pie",["require","../Constants","../utils/BaseUtils","./BaseChart","../utils/QueryUtils","../utils/BoundsManager","../render/PieSvgRender","../render/PieVmlRender","../ChartLibrary"],function(t){function e(t,e,a){p.call(this,t,e,a),this.arcMap={},this.invisibleName={},this.refresh(e)}var a="right-top",i="right-bottom",r="left-top",n="left-bottom",o="class",s=2*Math.PI,l=1.1,h=3,c=Math.PI/180,d=2,u=[.75,.7,.65,.6,.55],g=t("../Constants"),f=t("../utils/BaseUtils"),p=t("./BaseChart"),m=t("../utils/QueryUtils"),v=t("../utils/BoundsManager");t("../render/PieSvgRender"),t("../render/PieVmlRender"),e.prototype={constructor:e,_doLayout:function(){this.arcMap={};for(var t=this.option.series,e=this.vanchart.getPlotBounds(),a=this._calculateSeriesBounds(),i=0,r=t.length;r>i;i++){var n=t[i],s=a[n.name],l=0,h=0,c=0;if("fixed"==s){var h=t[i].center[0],c=t[i].center[1];if(-1!=t[i].center[0].indexOf("%")&&(h=this._getPercentValue(t[i].center[0],this.vanchart.chartWidth()),c=this._getPercentValue(t[i].center[1],this.vanchart.chartHeight())),n.size)l=n.radius/2;else{var d=h-e.x,u=e.x+e.width-h,p=c-e.y,v=e.y+e.height-c;l=Math.min(d,u,p,v)}h-=e.x,c-=e.y}else l=Math.min(s.width/2,s.height/2),h=s.x+s.width/2,c=s.y+s.height/2;var y=[n,this.option.plotOptions],_=m.queryList(y,"innerRadius")||0,b=m.queryList(y,"startAngle")||0,x=m.queryList(y,"endAngle")||360;b>x?b-=360:b==x&&(b=0,x=360);var L=m.queryList(y,"roseType"),C=m.queryList(y,"rotatable");l=m.queryList(y,"radius")||l;var T=this.option.style,A=d3.layout.pie().value(function(t){return t.arcValue}).sort(null).startAngle(f.toRadian(b)).endAngle(f.toRadian(x)),k={centerX:h,centerY:c,bounds:s,radius:l,innerRadius:_,startAngle:b,endAngle:x,points:[],roseType:L,pieLayout:A,category:n.name,className:this.getSeriesID(n.name),rotatable:C,style:T};this.arcMap[n.name]=k;for(var R=0,O={},S=0,P=n.data.length;P>S;S++){var w=n.data[S],D=this._getPieValueFromData(w,S);if(!(this.invisibleName[D[0]]||O[D[0]]||isNaN(+D[1]))){O[D[0]]=!0;var E={data:w,seriesIndex:i,categoryIndex:S,seriesName:D[0],dataIndex:R++,category:n.name,className:this.getSeriesID(n.name),value:D[1],x:n.name,y:D[1],arcValue:L==g.SAME_ARC?1:Math.abs(D[1]),radius:l,innerRadius:_,roseType:L,rotate:0,style:T,hyperlink:w.hyperlink,dataID:o+f.removeAllBlank(encodeURI(n.name+D[0]))};this._mergeArcAttributes(E),k.points.push(E)}}this._calculatePercentage(k.points);var M=A(k.points);M.forEach(function(t){var e=t.data;e.startAngle=t.startAngle,e.endAngle=t.endAngle}),this._checkArcValueAllZero(k.points),this._mergeTooltipAttributes(k.points),this._calculateLabelPos(k)}},_checkArcValueAllZero:function(t){for(var e=!0,a=0,i=t.length;i>a;a++)if(0!=t[a].arcValue){e=!1;break}e&&t.forEach(function(t){t.startAngle=0,t.endAngle=0})},_getFixedPos:function(t,e){var a=this.getPlotBounds(),i=t.category,r=this.arcMap[i],n=r.centerX,o=r.centerY,h=this.getCenterAngle(t),c=t.radius*l,d=c*Math.sin(h)+n+a.x,u=c*Math.cos(h+Math.PI)+o+a.y;return h<Math.PI/2?u-=e.height:h>=Math.PI&&h<3*Math.PI/2?d-=e.width:h>=3*Math.PI/2&&s>h&&(u-=e.height,d-=e.width),[d,u]},recalculateLabelPos:function(t,e){for(var a=t.points,i=0,r=a.length;r>i;i++)a[i].labelPos=null,a[i].rotate=e;for(var n=[],o=[],i=0,r=a.length;r>i;i++){var s=a[i],l=s.dataLabels;l&&l.enabled&&(l.align==g.OUTSIDE?n.push(s):o.push(s))}this._calculateOutsideLabelBounds(n,t,!0),this._calculateLeadLineStartPos(n),this._calculateInsideLabelBounds(o,t)},_calculateLabelPos:function(t){for(var e=t.roseType,a=t.points,i=[],r=[],n=0,o=a.length;o>n;n++){var s=a[n],c=s.dataLabels;c&&c.enabled&&(c.align==g.OUTSIDE?i.push(s):r.push(s),s.labelContent=this._calculateLabelContent(s),s.labelDim=this._calculateTextDim(s.labelContent))}if(this._calculateOutsideLabelBounds(i,t),(r.length&&!i.length||!r.length&&!i.length)&&(t.radius=t.radius/l-h),this._calculateInnerRadius(t),e){var a=t.points,d=t.radius-t.innerRadius,u=0;a.forEach(function(t){u=Math.max(u,Math.abs(t.value))});var f=d/u;(isNaN(f)||!isFinite(f))&&(f=0),a.forEach(function(e){e.radius=t.innerRadius+f*Math.abs(e.value)})}else{var p=t.radius;t.points.forEach(function(t){t.radius=p})}this._calculateLeadLineStartPos(i),this._calculateInsideLabelBounds(r,t)},_calculateInnerRadius:function(t){var e=t.innerRadius,a=t.radius;"string"==typeof e&&(e=-1!=e.indexOf("%")?parseFloat(e)*a/100:parseFloat(e)),t.innerRadius=e;var i=t.points;i.forEach(function(t){t.innerRadius=e})},_calculateLeadLineStartPos:function(t){var e=this;t.forEach(function(t){var a=t.radius,i=e.getCenterAngle(t);t.labelPos&&(t.labelPos.startPos={x:(a+1)*Math.sin(i),y:(a+1)*Math.cos(i+Math.PI)})})},_calculateOutsideLabelBounds:function(t,e,a){if(t.length){a=a||!1;for(var i=[],r=[],n=[],o=[],s=0,l=t.length;l>s;s++){var h=t[s],c=this.getCenterAngle(h);c<Math.PI/2?i.push(h):c>=Math.PI/2&&c<Math.PI?r.push(h):c>=Math.PI&&c<3*Math.PI/2?o.push(h):n.push(h)}var d=e.radius;this._ignoreMinArcLabel(d,i),this._ignoreMinArcLabel(d,r),this._ignoreMinArcLabel(d,n),this._ignoreMinArcLabel(d,o),a?this._calculateArcR(e,i,r,n,o):this._initCalculateArcR(e,i,r,n,o)}},_initCalculateArcR:function(t,e,a,i,r){var n=t.radius,o=.5*n,s=t.bounds,l={width:s.width/2,height:s.height/2};if(!this._testIfAllFit(o,l,e,a,i,r))return void(t.radius=o);for(var h=0,c=u.length;c>h;h++)if(o=n*u[h],this._testIfAllFit(o,l,e,a,i,r))return void(t.radius=o);t.radius=o},_calculateArcR:function(t,e,a,i,r){var n=t.radius,o=t.bounds,s={width:o.width/2,height:o.height/2};this._testIfAllFit(n,s,e,a,i,r)},_testIfAllFit:function(t,e,o,s,l,h){var o=this._testIfFit(o,t,e,a),s=this._testIfFit(s,t,e,i),l=this._testIfFit(l,t,e,r),h=this._testIfFit(h,t,e,n);return o&&s&&l&&h},_getStartAndEndAngle:function(t){switch(t){case a:return{startAngle:0,endAngle:Math.PI/2};case i:return{startAngle:Math.PI/2,endAngle:Math.PI};case n:return{startAngle:Math.PI,endAngle:3*Math.PI/2};case r:return{startAngle:3*Math.PI/2,endAngle:2*Math.PI}}},_getLabelBounds:function(t,e,r,n,o){var s,l;return s=t==a||t==i?e+n+d:e-n-d-o.width,l=r-o.height/2,{x:s,y:l,width:o.width,height:o.height}},_testIfFit:function(t,e,a,i){var r=this._findNiceBoundsFromStartAngle(t,e,a,i);return r?r:(t.forEach(function(t){t.labelPos=null}),this._findNiceBoundsFromEndAngle(t,e,a,i))},_findNiceBoundsFromStartAngle:function(t,e,a,i){return this._findNiceBounds(!0,t,e,a,i)},_findNiceBoundsFromEndAngle:function(t,e,a,i){return this._findNiceBounds(!1,t,e,a,i)},_findNiceBounds:function(t,e,r,n,o){for(var s=1.2*r,l=.1*r,h=new v,d=this._getStartAndEndAngle(o),u=this._getPossibleLabelBoundsByLocation(n,o),g=t?d.endAngle:d.startAngle,p=t?c:-c,m=!0,y=0,_=e.length;_>y&&m;y++){var b=t?y:_-y-1,x=e[b],L=x.labelDim,C=this.getCenterAngle(x),T=s*Math.sin(C),A=s*Math.cos(C+Math.PI),k=this._getLabelBounds(o,T,A,l,L);if(h.isOverlapped(k)||!f.containsRect(u,k)){m=!1;for(var R=C+p;t?g>R:R>g;R+=p)if(T=s*Math.sin(R),A=s*Math.cos(R+Math.PI),k=this._getLabelBounds(o,T,A,l,L),!h.isOverlapped(k)&&f.containsRect(u,k)){m=!0;break}}if(m){var O,S={x:T,y:A};O=o==a||o==i?{x:T+l,y:A}:{x:T-l,y:A},h.addBounds(k),x.labelPos={x:k.x,y:k.y,midPos:S,endPos:O}}}return m},getCenterAngle:function(t){var e=t.rotate+(t.startAngle+t.endAngle)/2;return f.makeValueInRange(0,2*Math.PI,e)},_getPossibleLabelBoundsByLocation:function(t,e){var o,s,l=t.width,h=t.height;switch(e){case a:o=0,s=-h;break;case i:o=s=0;break;case n:o=-l,s=0;break;case r:o=-l,s=-h}return{x:o,y:s,width:l,height:h}},_ignoreMinArcLabel:function(t,e){for(var a=0,i=0,r=e.length;r>i;i++){var n=e[i].labelDim;a+=n.height}if(a>t){var o=a-t;e.sort(function(t,e){var a=t.value,i=e.value;return i>a?-1:a>i?1:0});for(var i=0,r=e.length;r>i&&!(0>o);i++){var s=e[i].labelDim.height;o-=s}e.slice(0,i)}e.sort(function(t,e){var a=t.startAngle,i=e.startAngle;return i>a?-1:a>i?1:0})},_calculateInsideLabelBounds:function(t,e){for(var a=e.innerRadius,i=0,r=t.length;r>i;i++){var n=t[i],o=n.radius,s=this.getCenterAngle(n),l=a+(o-a)/2,h=this._getArcPoint(l,s),c=h[0]-n.labelDim.width/2,d=h[1]-n.labelDim.height/2;n.labelPos={x:c,y:d}}},_mergeArcAttributes:function(t){var e=t.data,a=this.option.series[t.seriesIndex],i=[e,a,this.option.plotOptions];m.merge(t,{borderWidth:m.queryList(i,"borderWidth")||0,borderColor:m.queryList(i,"borderColor")||"black"},!0),this._mergeCommonAttributes(t,i)},_calculateSeriesBounds:function(){for(var t=this.option.series,e=this.vanchart.getPlotBounds(),a={},i=0,r=0,n=0,o=t.length;o>n;n++)!t[n].center&&t[n].radius&&(i+=2*(t[n].radius||0),r++);var s=e.width/Math.max(1,t.length-r);s/=2;for(var l={x:0,y:0,width:e.width,height:e.height},n=0,o=t.length;o>n;n++)if(t[n].center)a[t[n].name]="fixed";else{var h=2*(t[n].radius||s);a[t[n].name]={x:l.x,y:l.y,width:h,height:l.height},l.x+=h,l.width-=h}return a},updatePieChartData:function(t,e){this.invisibleName[t]=!e},updatePieChartDataVisible:function(){for(var t in this.invisibleName)this.invisibleName[t]=!1},getPieData:function(){return this.arcMap},_updateDataIndex:function(){for(var t in this.arcMap)for(var e=(this.arcMap[t],this.arcMap[t].points),a=0,i=e.length;i>a;a++)e[a].dataIndex=a},orderDataIncrease:function(){for(var t in this.arcMap){var e=this.arcMap[t],a=this.arcMap[t].points,i=e.pieLayout;a.sort(function(t,e){var a=Math.abs(t.value),i=Math.abs(e.value);return i>a?-1:a>i?1:0});var r=i(a);r.forEach(function(t){var e=t.data;e.startAngle=t.startAngle,e.endAngle=t.endAngle})}this._updateDataIndex()},orderDataDecrease:function(){for(var t in this.arcMap){var e=this.arcMap[t],a=this.arcMap[t].points,i=e.pieLayout;a.sort(function(t,e){var a=Math.abs(t.value),i=Math.abs(e.value);return i>a?1:a>i?-1:0});var r=i(a);r.forEach(function(t){var e=t.data;e.startAngle=t.startAngle,e.endAngle=t.endAngle})}this._updateDataIndex()},onContainerMouseMove:function(t){if(this.dragTarget){var e=this.getMousePos(t);this.render.onDrag(this.dragTarget,e)}},onContainerMouseUp:function(t){if(this.dragTarget){var e=this.getMousePos(t);this.render.onDragEnd(this.dragTarget,e),this.dragTarget=null}},onContainerMouseDown:function(t){this.dragTarget=null;var e=this.getMousePos(t),a=this.getPlotBounds(),i=e[0]-a.x,r=e[1]-a.y;for(var n in this.arcMap){var o=this.arcMap[n];if(f.containsPoint(o.bounds,[i,r])&&o.rotatable){this.dragTarget=o;break}}this.dragTarget&&this.render.onDragStart(this.dragTarget,e)}},f.inherit(e,p),t("../ChartLibrary").register(g.PIE_CHART,e)}),a("render/BarSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","../utils/ColorUtils","../utils/BezierEasing","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.bar=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/ColorUtils"),o=t("../utils/BezierEasing"),s=2,l=1,h=0,c=80,d=400,u=6;e.prototype={constructor:e,render:function(){var t=this.bar.getVanchartRender().getRenderRoot();this._bodyG||(this._bodyG=t.append("g"),this._labelG=t.append("g")),this._updateBodyTranslate();var e=this.bar.getBarData(),a=this._fixAnimationTimeAndPara(e);for(var i in e){var r=e[i],n=this._bodyG.append("g").attr("class",i).selectAll("rect").data(r,function(t){return t.dataID});this._updateDefs(r,i),n.call(this._crateBarElement.bind(this),a.animationPara)}this._drawLabel(a.animationTime),this.updateEventHandler(a.animationTime)},_updateBodyTranslate:function(){var t=this.bar.getPlotBounds(),e=this.bar.vanchart.getBodyClipID();this._bodyG.attr("transform","translate("+t.x+","+t.y+")").attr("clip-path","url(#"+e+")"),this._labelG.attr("transform","translate("+t.x+","+t.y+")").attr("clip-path","url(#"+e+")")},_fixAnimationTimeAndPara:function(t){var e=0;for(var a in t){var i=t[a];e=Math.max(e,i.length)}var r=e>10?800:d+(e-1)*c;return r=this.bar.isSupportAnimation()?r:0,e>10?{animationPara:s,animationTime:r}:{animationPara:l,animationTime:r}},_drawLabel:function(t){var e=this.bar.getBarData(),a=[];for(var i in e)a=a.concat(e[i]);var r=this.bar.getPlotBounds();this._drawSvgDataLabels(this._labelG,a,r.x,r.y,t)},_updateDefs:function(t,e){var a=this._bodyG.select("g."+e).select("defs");a=a.empty()?this._bodyG.select("g."+e).append("defs"):a;var i=this;if(this.bar.option.style){var o,s,l,h,c=a.selectAll("linearGradient").data(t,function(t){return t.dataID});switch(o=s=l=h="0%",e){case r.TOP:s="100%";break;case r.BOTTOM:h="100%";break;case r.LEFT:o="100%";break;case r.RIGHT:l="100%"}c.enter().append("linearGradient").attr("x1",o).attr("y1",s).attr("x2",l).attr("y2",h).attr("id",function(t){return i._getGradualID(t)}),c.append("stop").attr("offset","0%").style("stop-color",function(t){return n.getColorWithDivider(t.color,.9)}),c.append("stop").attr("offset","100%").style("stop-color",function(t){return t.color})}var d=[];t.forEach(function(t){if(t.image&&(d.push(t),t.image))switch(d.push(t),t.location){case r.BOTTOM:t.imageX=t.x,t.imageY=t.y+t.height%t.imageHeight;break;case r.TOP:case r.LEFT:t.imageX=t.x,t.imageY=t.y;break;case r.RIGHT:t.imageX=t.x+t.width%t.imageWidth,t.imageY=t.y}});var u=a.selectAll("pattern").data(d,function(t){return t.dataID}),g=u.enter().append("pattern");g.append("image"),u.attr("x",function(t){return t.imageX}).attr("y",function(t){return t.imageY}).attr("width",function(t){return t.imageWidth}).attr("height",function(t){return t.imageHeight}).attr("patternUnits","userSpaceOnUse").attr("id",function(t){return i._getImageID(t)}).select("image").attr("x",0).attr("y",0).attr("width",function(t){return t.imageWidth}).attr("height",function(t){return t.imageHeight}).attr("xlink:href",function(t){return t.image})},_getGradualID:function(t){var e=this.bar.vanchart.getIDPrefix();return"gradual"+t.dataID+e},_getImageID:function(t){var e=this.bar.vanchart.getIDPrefix();return"image"+t.dataID+e},_getFill:function(t){var e=this.bar.option.style,a="url(#"+this._getGradualID(t)+")",i="url(#"+this._getImageID(t)+")";return t.image?i:e==r.STYLE_GRADUAL?a:t.color},_crateBarElement:function(t,e,a){var i=this,r=t.enter().append("rect");r.each(function(t){var r=i.bar.getInitBarAttribute(t);d3.select(this).attr("class",t.dataID).attr("x",r.x).attr("y",r.y).attr("width",r.width).attr("height",r.height).attr("rx",function(t){return t.borderRadius}).attr("ry",function(t){return t.borderRadius}).style("fill",function(t){return i._getFill(t)}).style("stroke",function(t){return t.borderColor}).style("stroke-width",function(t){return t.borderWidth}).call(i._defaultAnimation.bind(i),e,a)})},_defaultAnimation:function(t,e,a){var i=t.datum();if(!this.bar.isSupportAnimation())return void t.attr("x",i.x).attr("y",i.y).attr("width",i.width).attr("height",i.height);var n=i.width,h=i.height,u=e==l?1:0,g=e==s?o.css.swing:"back-out",f=e==s?800:d,p=i.barIndex*c*u;
    if(i.stackIndex&&!a)switch(p+=(i.stackIndex-1)*c,i.direction){case r.BOTTOM_TO_TOP:h=i.startPos-i.y,t.transition().delay(p).ease(g).duration(f).attr("y",i.y).attr("height",h).call(this._animationWatch);break;case r.TOP_TO_BOTTOM:h=i.y+i.height-i.startPos,t.transition().delay(p).ease(g).duration(f).attr("height",h).call(this._animationWatch);break;case r.LEFT_TO_RIGHT:n=i.x+i.width-i.startPos,t.transition().delay(p).ease(g).duration(f).attr("width",n).call(this._animationWatch);break;case r.RIGHT_TO_LEFT:n=i.startPos-i.x,t.transition().delay(p).ease(g).duration(f).attr("x",i.x).attr("width",n).call(this._animationWatch)}else p=a||p,t.transition().delay(p).ease(g).duration(f).attr("x",i.x).attr("y",i.y).attr("width",n).attr("height",h).call(this._animationWatch)},_animationWatch:function(t){t.each("end",function(t){d3.select(this).attr("x",t.x).attr("y",t.y).attr("width",t.width).attr("height",t.height)})},_exitedBarTransition:function(t,e){if(!this.bar.isSupportAnimation())return void t.each(function(t){d3.select(this).attr("x",t.x).attr("y",t.y).attr("width",t.width).attr("height",t.height)});e=e||0,t.each(function(t){var e=d3.select(this);t.lastBar={x:parseFloat(e.attr("x")),y:parseFloat(e.attr("y")),width:parseFloat(e.attr("width")),height:parseFloat(e.attr("height"))}});var a=this;t.each(function(t){var i=t.x,r=t.y,n=t.height,s=t.width,l=t.lastBar.x,h=t.lastBar.y,c=t.lastBar.height,d=t.lastBar.width,u=50*t.indexInCate+e;d3.select(this).transition().delay(u).duration(250).ease("linear").attrTween("x",function(){return function(t){return l+(i-l)*o.css.swing(t)+"px"}}).attrTween("y",function(){return function(t){return h+(r-h)*o.css.swing(t)+"px"}}).attrTween("width",function(){return function(t){return d+(s-d)*o.css.swing(t)+"px"}}).attrTween("height",function(){return function(t){return c+(n-c)*o.css.swing(t)+"px"}}).call(a._animationWatch)})},dataDeleteRender:function(){this.removeEventHandler(),this._updateBodyTranslate();var t=this.bar.getBarData(),e=[r.TOP,r.BOTTOM,r.LEFT,r.RIGHT];for(var a in t){var i=t[a],n=this._bodyG.select("g."+a).selectAll("rect").data(i,function(t){return t.dataID});this._updateDefs(i,a),this._barDisappearTransition(n.exit()),this._exitedBarTransition(n,150)}var o=this;e.forEach(function(e){t[e]||o._bodyG.select("g."+e).selectAll("rect").data([]).exit().call(o._barDisappearTransition.bind(o))}),this._drawLabel(550),this.updateEventHandler(550)},_barDisappearTransition:function(t){return this.bar.isSupportAnimation()?void t.each(function(t){var e=t.y,a=t.height,i=e+a;t.stackIndex?d3.select(this).transition().duration(400).ease("linear").attrTween("y",function(){return function(t){var e=a*(1-d3.ease("back")(t));return i-e+"px"}}).attrTween("height",function(){return function(t){return a*(1-d3.ease("back")(t))+"px"}}).each("end",function(){d3.select(this).remove()}):d3.select(this).transition().duration(150).ease("linear").attrTween("y",function(){return function(t){var e=a*(1-d3.ease("back")(t));return i-e+"px"}}).attrTween("height",function(){return function(t){return a*(1-d3.ease("back")(t))+"px"}}).each("end",function(){d3.select(this).remove()})}):void t.remove()},dataAddRender:function(){this.removeEventHandler(),this._updateBodyTranslate();var t=this.bar.getBarData();for(var e in t){var a=t[e];this._bodyG.select("g."+e).empty()&&this._bodyG.append("g").attr("class",e),this._updateDefs(a,e)}for(var e in t){var a=t[e],i=this._bodyG.select("g."+e).selectAll("rect").data(a,function(t){return t.dataID});this._exitedBarTransition(i);var r=this,n=r.bar.isSupportAnimation()?250:0;i.call(r._crateBarElement.bind(r),h,n),i.exit().remove()}this._drawLabel(250+d),this.updateEventHandler(250+d)},refreshInOrder:function(){this.removeEventHandler(),this._updateBodyTranslate();var t=this.bar.getBarData(),e=this;for(var a in t){var i=t[a],r=this._bodyG.select("g."+a).selectAll("rect").data(i);this._updateDefs(i,a);var n=e.bar.isSupportAnimation()?250:0;r.call(e._crateBarElement.bind(e),h,n),r.attr("class",function(t){return t.dataID}).style("fill",function(t){return e._getFill(t)}).style("stroke",function(t){return t.borderColor}).style("stroke-width",function(t){return t.borderWidth}).transition().ease("linear").duration(300).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}).attr("rx",function(t){return t.borderRadius}).attr("ry",function(t){return t.borderRadius}).call(this._animationWatch)}this._drawLabel(300),this.updateEventHandler(300)},_makeChosenStateWithData:function(t){t&&this.makeChosenState(t)},_cancelChosenStateWithData:function(t){t&&this.cancelChosenState(t)},makeChosenState:function(t){t&&t.elWrapper&&t.elWrapper.style("stroke",t.highlight).style("fill",t.mouseOverColor?t.mouseOverColor:this._getFill(t)).style("stroke-width",t.borderWidth).style("stroke-opacity",.35).interrupt().transition().duration(100).ease("ease-out-in").style("stroke-width",u),this.bar.lastChosen=t,this.updateTarget()},cancelChosenState:function(t){t&&t.elWrapper&&(t.elWrapper.interrupt().transition(),t.elWrapper.style("fill",this._getFill(t)).style("stroke",t.borderColor).style("stroke-opacity",1).style("stroke-width",t.borderWidth))},zoomRefresh:function(){this._updateBodyTranslate();var t=this.bar.getBarData();for(var e in t){var a=t[e];this._updateDefs(a,e),this._bodyG.select("g."+e).selectAll("rect").data(a,function(t){return t.dataID}).transition().ease("linear").duration(300).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}).call(this._animationWatch)}this._drawLabel(300),this.updateEventHandler(1e3)},addEventHandler:function(){var t=this.bar.getBarData();for(var e in t){var a=this._bodyG.select("g."+e).selectAll("rect");a.call(this.addShapeEventHandler.bind(this))}},removeEventHandler:function(){var t=this.bar.getBarData();for(var e in t){var a=this._bodyG.select("g."+e).selectAll("rect");a.call(this.removeShapeEventHandler.bind(this))}},refreshRestore:function(){this.refreshInOrder()},monitorRender:function(){this.dataAddRender()}},i.inherit(e,a),t("./RenderLibrary").register(r.BAR_SVG,e)}),a("render/BarVmlRender",["require","./BaseRender","../utils/BaseUtils","../utils/ColorUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.bar=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../Constants");e.prototype={constructor:e,render:function(){var t=this.bar.getVanchartRender().getRenderRoot(),e=this.bar.getPlotBounds();this._bodySet=t.set();var a=t.set();this._bodySet.push(a),this.shapeMap={};var i=this._getPlotClipRect(),r=this.bar.getBarData();for(var n in r)for(var o=r[n],s=0,l=o.length;l>s;s++)a.push(this._createBar(o[s],t,i));a.transform("t"+e.x+","+e.y),this._drawDataLabels(t)},_createBar:function(t,e,a){var i=e.rect(t.x,t.y,t.width,t.height).attr({rx:t.borderRadius,ry:t.borderRadius,fill:t.color,"fill-opacity":r.getColorOpacity(t.color),stroke:t.borderColor,"stroke-width":t.borderWidth});return this.addShapeEventHandler(i,t),this.shapeMap[t.dataID]=i,i},_getPlotClipRect:function(){var t=this.bar.vanchart.getPlotClipBounds(),e=this.bar.getPlotBounds(),a=e.x+t.x,i=e.y+t.y,r=t.width,n=t.height;return a+","+i+","+r+","+n},_drawDataLabels:function(t){var e=this.bar.getBarData(),a=this.bar.getPlotBounds();for(var i in e){var r=t.set();this._bodySet.push(r);var n=e[i];this._drawVmlDataLabels(t,r,n,a.x,a.y)}},refreshInOrder:function(){this.dataChangeRender()},dataChangeRender:function(){this._removeAll(),this.render()},_removeAll:function(){this._bodySet.remove(),this.labelDivManager.clearAllLabels()},getElementByData:function(t){return this.shapeMap[t.dataID]},makeChosenState:function(t){var e=this.getElementByData(t);e.attr({stroke:t.highlight,"stroke-opacity":.35,fill:t.mouseOverColor?t.mouseOverColor:t.color,"stroke-width":6})},cancelChosenState:function(t){var e=this.getElementByData(t);e.attr({fill:t.color,"fill-opacity":r.getColorOpacity(t.color),stroke:t.borderColor,"stroke-opacity":1,"stroke-width":t.borderWidth})}},i.inherit(e,a),t("./RenderLibrary").register(n.BAR_VML,e)}),a("chart/Bar",["require","./BaseChart","../utils/BaseUtils","../Constants","../utils/QueryUtils","../utils/BoundsManager","../render/BarSvgRender","../render/BarVmlRender","../ChartLibrary","../ChartLibrary"],function(t){function e(t,e,i){a.call(this,t,e,i),this.pointsMap={},this.refresh(e)}var a=t("./BaseChart"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/QueryUtils"),o=t("../utils/BoundsManager"),s="class",l=1,h=3,c=2;return t("../render/BarSvgRender"),t("../render/BarVmlRender"),e.prototype={constructor:e,_doLayout:function(){this.pointsMap={};var t=this._buildLocationMap();for(var e in t){this.pointsMap[e]=[];for(var a=t[e],i=0,r=a.length;r>i;i++){var n=a[i];n&&this._buildBars(n,e,this.pointsMap[e])}}this._calculateLabelPos()},getTrendLineXYValues:function(t){for(var e=this._getAxisPair(t),a=e.baseAxis,i=e.valueAxis,n=a.getPosition(),o=this.pointsMap[n],s=[],l=[],h=0,c=o.length;c>h;h++){var d=o[h];if(d.seriesName==t.name&&!d.isNull){var u,g;n==r.TOP||n==r.BOTTOM?(u=d.x+d.width/2,g=i.isAxisReversed()?d.y+d.height:d.y):(u=i.isAxisReversed()?d.x:d.x+d.width,g=d.y+d.height/2),s.push(u),l.push(g)}}return[s,l,n]},_buildBars:function(t,e,a){var i=e==r.LEFT||e==r.RIGHT,n=t[0][0],o=this.option.series[n],s=i?this.vanchart.yAxis(o.yAxis):this.vanchart.xAxis(o.xAxis);s.type==r.CATEGORY_AXIS_COMPONENT?this._buildNormalBars(t,e,a,s):this._buildDoubleValueAxisBars(t,e,a,s)},_buildDoubleValueAxisBars:function(t,e,a,o){for(var l=[],h=0,d=t.length,u=this.option.series,g=e==r.LEFT||e==r.RIGHT,f=0;d>f;f++){for(var p=t[f],m={},v=0,y=p.length;y>v;v++)for(var _=p[v],b=u[_],x=g?this.vanchart.xAxis(b.xAxis):this.vanchart.yAxis(b.yAxis),L=g?this.vanchart.yAxis(b.yAxis):this.vanchart.xAxis(b.xAxis),C=0,T=b.data.length;T>C;C++){var A=b.data[C],k=L.getValueFromData(A),R={data:A,hyperlink:A.hyperlink,value:x.getValueFromData(A),seriesIndex:_,seriesName:b.name,category:k,location:e,dataID:s+i.removeAllBlank(encodeURI(k+b.name)),indexInCate:f};this._mergeBarAttributes(R),m[k]=m[k]||[],m[k].push(R),h++}l.push(i.objectToArray(m))}var O=0,S=o.isHorizontal()?o.bounds.width:o.bounds.height,P=this.fixedBarWidth?this.fixedBarWidth:S/h/3;P=Math.max(P,c),this.fixedBarWidth=P;var g=e==r.LEFT||e==r.RIGHT,w=this;l.forEach(function(t){t.forEach(function(t){w._calculatePercentage(t);for(var e=0,r=0,o=null,s=null,l=[],h=0,c=t.length;c>h;h++){var d=t[h];l.push(d);var f=u[d.seriesIndex],p=n.queryList([w.option.plotOptions,f],"width")||P,m=g?w.vanchart.xAxis(f.xAxis):w.vanchart.yAxis(f.yAxis),v=g?w.vanchart.yAxis(f.yAxis):w.vanchart.xAxis(f.xAxis),y=v.scale(d.category)-p/2;d.category=v.getShowValue(d.category);var _,b,x,L=m.isByPercent()?d.percentage:d.value;L>=0?(_=m.scale(r+m.getStartPosValue()),b=m.scale(L+r),r+=L):(_=m.scale(e),b=m.scale(L+e),e+=L),x=Math.abs(b-_);var C=d.borderWidth,T=g?Math.min(_,b):y,A=g?y:Math.min(_,b),k=g?x:p,R=g?p:x,S=i.rectSubPixelOpt(T,A,k,R,C);L>0&&o?g?S.x=o.x+(m.isAxisReversed()?-S.width:o.width):S.y=o.y+(m.isAxisReversed()?o.height:-S.height):0>L&&s&&(g?S.x=s.x+(m.isAxisReversed()?s.width:-S.width):S.y=s.y+(m.isAxisReversed()?-S.height:s.height)),n.merge(d,n.merge(S,{barIndex:O,stackIndex:c>1?c-h:h,startPos:m.getStartPos(),direction:w.getAnimationDirection(m,L)},!0),!0),L>0?o=d:s=d}O++,i.addArray(a,l.reverse())})}),this._mergeTooltipAttributes(a)},_buildNormalBars:function(t,e,a,n){for(var o=[],l=e==r.LEFT||e==r.RIGHT,h=n.getCategoryCount(),c=t.length,d=this.option.series,u=0;h>u;u++)for(var g=n.getCategoryLabel(u),f=0;c>f;f++){for(var p=t[f],m=[],v=0,y=p.length;y>v;v++){var _=p[v],b=d[_],x=l?this.vanchart.xAxis(b.xAxis):this.vanchart.yAxis(b.yAxis),L=b.data[u],C={data:L,hyperlink:L.hyperlink,value:x.getValueFromData(L),seriesIndex:_,stackIndex:y>1?y-v:v,barIndex:u*c+f,indexInCate:f,seriesName:b.name,category:g,location:e,dataID:s+i.removeAllBlank(encodeURI(g+b.name))};this._mergeBarAttributes(C),o[u]=o[u]||[],o[u][f]=o[u][f]||[],o[u][f].push(C),m.push(C)}i.addArray(a,m.reverse())}this._calculateBarPercentage(o),this._mergeBarSizeAttributes(o,n,l),this._mergeBarTooltipAttributes(o)},_mergeBarTooltipAttributes:function(t){var e=this;t.forEach(function(t){var a=[];t.forEach(function(t){t.forEach(function(t){a.push(t)})}),e._margetTooltipWithCategory(a)})},_calculateBarPercentage:function(t){var e=this;t.forEach(function(t){var a=[[]];t.forEach(function(t){e._isStackedSery(t[0].seriesIndex)?a.push(t):a[0].push(t[0])}),a.forEach(function(t){e._calculatePercentage(t)})})},getAnimationDirection:function(t,e){var a=e>=0;return t.isHorizontal()?a^t.isAxisReversed()?r.LEFT_TO_RIGHT:r.RIGHT_TO_LEFT:a^t.isAxisReversed()?r.BOTTOM_TO_TOP:r.TOP_TO_BOTTOM},_getFixedPos:function(t,e){var a,i,n=t.location,o=this.getPlotBounds();return n==r.TOP||n==r.BOTTOM?(a=o.x+t.x+t.width+l,i=o.y+t.y):(a=o.x+t.x+t.width-e.width,i=o.y+t.y+t.height+l),[a,i]},_mergeBarSizeAttributes:function(t,e,a){if(t.length)for(var r=this._getBarSize(e,t[0]),o=r.centerPos,s=r.barWidth,l=e.getCategoryCount(),h=this.option.series,c=0;l>c;c++)for(var d=e.scaleByIndex(c),u=t[c],g=0,f=u.length;f>g;g++)for(var p=u[g],m=0,v=0,y=null,_=null,b=0,x=p.length;x>b;b++){var L,C,T,A=+d+o[g]-s[g][b]/2,k=p[b],R=a?this.vanchart.xAxis(h[k.seriesIndex].xAxis):this.vanchart.yAxis(h[k.seriesIndex].yAxis),O=R.isByPercent()?k.percentage:k.value;O>=0?(L=R.scale(v+R.getStartPosValue()),C=R.scale(O+v),v+=O):(L=R.scale(m),C=R.scale(O+m),m+=O),T=Math.abs(C-L);var S=k.borderWidth,P=a?Math.min(L,C):A,w=a?A:Math.min(L,C),D=a?T:s[g][b],E=a?s[g][b]:T,M=i.rectSubPixelOpt(P,w,D,E,S);O>0&&y?a?M.x=y.x+(R.isAxisReversed()?-M.width:y.width):M.y=y.y+(R.isAxisReversed()?y.height:-M.height):0>O&&_&&(a?M.x=_.x+(R.isAxisReversed()?_.width:-M.width):M.y=_.y+(R.isAxisReversed()?-M.height:_.height)),n.merge(k,n.merge(M,{startPos:R.getStartPos(),direction:this.getAnimationDirection(R,O)},!0),!0),O>0?y=k:_=k}},_mergeBarAttributes:function(t){var e=t.data,a=this.option.series[t.seriesIndex],i=[e,a,this.option.plotOptions];n.merge(t,{borderWidth:n.queryList(i,"borderWidth")||0,borderColor:n.queryList(i,"borderColor")||"rgba(255,255,255,0)",borderRadius:n.queryList(i,"borderRadius")||0,image:n.queryList(i,"image"),imageWidth:n.queryList(i,"imageWidth")||0,imageHeight:n.queryList(i,"imageHeight")||0},!0),this._mergeCommonAttributes(t,i)},_getBarSize:function(t,e){var a=e.length,i=t.getTickLength(),r=this.option.plotOptions.categoryGap||"20%",o=this.option.plotOptions.gap||"20%";r=this._getPercentValue(r,i);for(var s=(i-r)/a,l=r/2,h=[],d=0;a>d;d++)h.push(l+s*(d+.5));o=this._getPercentValue(o,s),s-=o;for(var u=[],d=0;a>d;d++)for(var g=0,f=e[d].length;f>g;g++){var p=this.option.series[e[d][g]],m=n.queryList([this.option.plotOptions,p],"width");u[d]=u[d]||[],u[d].push(m?m:Math.max(s,c))}return{centerPos:h,barWidth:u}},_calculateLabelPos:function(){var t=this,e=new o;for(var a in this.pointsMap){var n=this.pointsMap[a];n.forEach(function(a){var n=a.dataLabels;if(n&&n.enabled)if(a.labelContent=t._calculateLabelContent(a),a.labelDim=t._calculateTextDim(a.labelContent),n.align)a.labelPos=t._calculateAlignLabelPos(a,n.align),e.addBounds(i.makeBounds(a.labelPos,a.labelDim));else for(var o=[r.CENTER,r.INSIDE,r.OUTSIDE],s=0,l=o.length;l>s;s++){var h=o[s],c=t._calculateAlignLabelPos(a,h);if(!e.isOverlapped(i.makeBounds(c,a.labelDim))||h==r.OUTSIDE){a.labelPos=c,e.addBounds(i.makeBounds(c,a.labelDim));break}}})}},_calculateAlignLabelPos:function(t,e){var a=t.labelDim,i=t.location==r.TOP||t.location==r.BOTTOM,n=t.value>=0,o=this.option.series[t.seriesIndex],s=i?this.vanchart.yAxis(o.yAxis):this.vanchart.xAxis(o.xAxis);n^=s.isAxisReversed();var l,c,d=t.x+t.width/2,u=t.y+t.height/2;switch(e){case r.CENTER:l=d-a.width/2,c=u-a.height/2;break;case r.INSIDE:i?(l=d-a.width/2,c=n?t.y+h:t.y+t.height-h-a.height):(c=u-a.height/2,l=n?t.x+t.width-h-a.width:t.x+h);break;case r.OUTSIDE:i?(l=d-a.width/2,c=n?t.y-h-a.height:t.y+t.height+h):(c=u-a.height/2,l=n?t.x+t.width+h:t.x-h-a.width)}return{x:l,y:c}},getBarData:function(){return this.pointsMap},getInitBarAttribute:function(t){var e=t.direction||r.BOTTOM_TO_TOP,a={x:t.startPos,y:t.y,width:0,height:t.height},i={x:t.startPos,y:t.y,width:0,height:t.height},n={x:t.x,y:t.startPos,width:t.width,height:0},o={x:t.x,y:t.startPos,width:t.width,height:0};switch(e){case r.BOTTOM_TO_TOP:return n;case r.TOP_TO_BOTTOM:return o;case r.LEFT_TO_RIGHT:return a;case r.RIGHT_TO_LEFT:return i}},orderDataIncrease:function(){this._orderDataInOrder(!0),this._doLayout()},orderDataDecrease:function(){this._orderDataInOrder(!1),this._doLayout()},zoomRefresh:function(){this._doLayout(),this.render.zoomRefresh()}},i.inherit(e,a),t("../ChartLibrary").register(r.BAR_CHART,e),t("../ChartLibrary").register(r.COLUMN_CHART,e),e}),a("render/LineSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","../utils/QueryUtils","../utils/BezierEasing","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.line=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=(t("../utils/QueryUtils"),t("../utils/BezierEasing")),o="lineGroupG",s="markerGroupG",l="pathG",h="areaG",c="class",d=800,u=500,g=250;return e.prototype={constructor:e,render:function(){var t=this.line.getVanchartRender().getRenderRoot();this._bodyG||(this._bodyG=t.append("g"),this._defsG=this._bodyG.append("g"),this._areaG=this._bodyG.append("g"),this._lineG=this._bodyG.append("g"),this._labelG=this._bodyG.append("g")),this._updateBodyTranslate(),this._updateLineSeries(),this._drawLabel(d)},_updateBodyTranslate:function(){var t=this.line.getPlotBounds(),e=this.line.vanchart.getBodyClipID();this._bodyG.attr("transform","translate("+t.x+","+t.y+")").attr("clip-path","url(#"+e+")")},_updateLineSeries:function(t,e){var a=this._updateDataBinding(),i=a.defsG,r=a.areaG,o=a.lineG;t=this.line.isSupportAnimation()?t||g:0,e=e||n.css.swing,i.exit().remove(),o.exit().remove(),r.exit().remove(),i.selectAll("clipPath").select("rect").transition().ease(e).duration(t).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}),r.selectAll("path").filter(function(t){return t.lineData.isStack}).transition().ease(e).duration(t).attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)}).each("end",function(){d3.select(this).attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)})}),o.select("g."+l).selectAll("path").transition().ease(e).duration(t).attr("d",function(t){var e=t.lineData;return e.lineSvg(e.points)}).each("end",function(){d3.select(this).attr("d",function(t){var e=t.lineData;return e.lineSvg(e.points)})}),o.select("g."+h).selectAll("path").filter(function(t){return!t.lineData.isStack}).transition().ease(e).duration(t).attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)}).each("end",function(){d3.select(this).attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)})});var c=this;o.each(function(a){var i=d3.select(this).select("g."+s).selectAll("g").data(a.points);i.transition().ease(e).duration(t).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).each("end",function(t){var e=d3.select(this);e.attr("transform",function(){return"translate("+t.x+","+t.y+")"}),t.elWrapper=e}),i.exit().remove(),d3.select(this).transition().delay(t).each("end",function(){i.call(c._createSvgMarker.bind(c)).attr("transform",function(t){return"translate("+t.x+","+t.y+")"})})}),this._createNewLineSeries(a)},_updateDataBinding:function(){var t=this.line.getLineData(),e=this._lineG.selectAll("g."+o).data(t,function(t){return t.seriesName}),a=this._areaG.selectAll("g").data(t,function(t){return t.seriesName}),i=this._defsG.selectAll("defs").data(t,function(t){return t.seriesName});return i.selectAll("clipPath").data(function(t){return t.dataBands}),a.selectAll("path").data(function(t){return t.dataBands}),e.select("g."+l).selectAll("path").data(function(t){return t.dataBands}),e.select("g."+h).selectAll("path").data(function(t){return t.dataBands}),{defsG:i,areaG:a,lineG:e}},_createNewLineSeries:function(t){var t=this._updateDataBinding(),e=t.defsG,a=t.areaG,i=t.lineG,n=this.line.isSupportAnimation()?d:0;e.enter().append("defs").selectAll("clipPath").data(function(t){return t.dataBands}).enter().append("clipPath").attr("id",function(t){return t.clipID}).append("rect").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){var e=t.lineData;return e.isHorizontal?t.width:0}).attr("height",function(t){var e=t.lineData;return e.isHorizontal?0:t.height}).transition().ease("quad-in-out").duration(n).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}),this.line.type==r.AREA_CHART&&a.enter().append("g").attr("class",h).selectAll("path").data(function(t){return t.dataBands}).enter().append("path").filter(function(t){return t.lineData.isStack}).style("fill",function(t){return t.fillColor}).style("fill-opacity",function(t){return t.fillColorOpacity}).style("stroke","none").attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)}).attr("clip-path",function(t){return"url(#"+t.clipID+")"}).on("mouseenter",function(t){g._updateChosenSeries(t.lineData)});var u=i.enter().append("g").attr("class",function(t){return o+" "+(c+t.seriesIndex)});u.append("g").attr("class",l).selectAll("path").data(function(t){return t.dataBands}).enter().append("path").style("fill","none").style("stroke",function(t){return t.color}).style("stroke-width",function(t){return t.lineData.lineWidth}).attr("d",function(t){var e=t.lineData;return e.lineSvg(e.points)}).attr("clip-path",function(t){return"url(#"+t.clipID+")"}).on("mouseenter",function(t){g._updateChosenSeries(t.lineData)}),this.line.type==r.AREA_CHART&&u.append("g").attr("class",h).selectAll("path").data(function(t){return t.dataBands}).enter().append("path").filter(function(t){return!t.lineData.isStack}).style("fill",function(t){return t.fillColor}).style("fill-opacity",function(t){return t.fillColorOpacity}).style("stroke","none").attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)}).attr("clip-path",function(t){return"url(#"+t.clipID+")"}).on("mouseenter",function(t){g._updateChosenSeries(t.lineData)});var g=this;this.line.isSupportAnimation()?u.append("g").attr("class",s).selectAll("g").data(function(t){return t.points}).call(this._createSvgMarker.bind(this)).attr("transform",function(t){return"translate("+t.x+","+t.y+") scale(0.01)"}).transition().delay(function(t){return t.delay}).duration(150).ease("ease-out-in").attr("transform",function(t){return"translate("+t.x+","+t.y+") scale(1.5)"}).transition().duration(150).ease("ease-out-in").attr("transform",function(t){return"translate("+t.x+","+t.y+") scale(1)"}):u.append("g").attr("class",s).selectAll("g").data(function(t){return t.points}).call(this._createSvgMarker.bind(this)).attr("transform",function(t){return"translate("+t.x+","+t.y+")"})},_createImageMarker:function(t,e){var a=new Image;a.onload=function(){e(this.width,this.height)},a.src=t},_makeChosenStateWithData:function(t){t&&this._makeMarkerChosenState(this._lineG,t)},_cancelChosenStateWithData:function(t){t&&this._cancelMarkerChosenState(this._lineG,t)},getElementByData:function(t){return this._lineG.select("g."+t.dataID)},makeChosenState:function(t){this._updateChosenSeries(t)},_toTop:function(){var t=this._lineG.select("g."+(c+this.line.selectedIndex));t.empty()||i.toFront(t.node())},_drawLabel:function(t){t=this.line.isSupportAnimation()?t:0;var e=this.line.getLineData(),a=[];e.forEach(function(t){a=a.concat(t.points)});var i=this.line.getPlotBounds();this._drawSvgDataLabels(this._labelG,a,i.x,i.y,t)},dataChangeRender:function(){this.render()},refreshInOrder:function(){this.dataChangeRender()},zoomRefresh:function(){this.dataChangeRender()},refreshRestore:function(){this.dataChangeRender()},monitorRender:function(){this._updateBodyTranslate(),this._updateLineSeries(u,"linear"),this._drawLabel(u)}},i.inherit(e,a),t("./RenderLibrary").register(r.LINE_SVG,e),e}),a("render/LineVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.line=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){var t=this.line.getVanchartRender().getRenderRoot(),e=this.line.getPlotBounds(),a=e.x,i=e.y;this._bodySet=t.set(),this._lineSet=t.set(),this._markerSet=t.set(),this._labelSet=t.set(),this._bodySet.push(this._lineSet),this._bodySet.push(this._markerSet),this._bodySet.push(this._labelSet),this._toFrontMap={},this.markerMap={};var n=this.line.getLineData(),o=this;n.forEach(function(e){var a=e.dataBands,i=a.length>1;a.forEach(function(e){var a=e.lineData;if(o.line.type==r.AREA_CHART&&a.isStack){var n=t.path(a.areaSvg(a.points)).attr({fill:e.fillColor,"fill-opacity":e.fillColorOpacity,stroke:"none"}).mouseover(function(){o._updateChosenSeries(a)});i&&n.attr("clip-rect",o._getClipRect(e)),o._lineSet.push(n)}})}),n.forEach(function(e){var a=e.dataBands,i=t.set();o._toFrontMap[e.seriesIndex]=i;var n=a.length>1;a.forEach(function(e){var a=e.lineData;if(o.line.type==r.AREA_CHART&&!a.isStack){var s=t.path(a.areaSvg(a.points)).attr({fill:e.fillColor,"fill-opacity":e.fillColorOpacity,stroke:"none"}).mouseover(function(){o._updateChosenSeries(a)});n&&s.attr("clip-rect",o._getClipRect(e)),o._lineSet.push(s),i.push(s)}var l=t.path(a.lineSvg(a.points)).attr({fill:"none",stroke:e.color,"stroke-width":a.lineWidth,"clip-rect":o._getClipRect(e)}).mouseover(function(){o._updateChosenSeries(a)});n&&l.attr("clip-rect",o._getClipRect(e)),o._lineSet.push(l),i.push(l)})}),n.forEach(function(e){var r=o._toFrontMap[o.line.selectedIndex];e.points.forEach(function(e){var n=e.x+a,s=e.y+i,l=o._createVmlMarker(t,e,[n,s]);o.markerMap[e.dataID]=l,l.marker&&(r.push(l.marker),o._markerSet.push(l.marker)),l.strokeMarker&&(r.push(l.strokeMarker),o._markerSet.push(l.strokeMarker))})}),this._drawDataLabels(t),this._lineSet.transform("t"+e.x+","+e.y)},_getClipRect:function(t){var e=this.line.getPlotBounds();return t.x+e.x+","+(t.y+e.y)+","+t.width+","+t.height},getElementByData:function(t){return this.markerMap&&this.markerMap[t.dataID]?this.markerMap[t.dataID]:void 0},_toTop:function(){var t=this._toFrontMap[this.line.selectedIndex];t&&t.toFront()},makeChosenState:function(t){this._updateChosenSeries(t)},_makeChosenStateWithData:function(t){t&&this._makeVmlMarkerChosenState(t)},_cancelChosenStateWithData:function(t){t&&this._cancelVmlMarkerChosenState(t)},_drawDataLabels:function(t){var e=this.line.getLineData(),a=this.line.getPlotBounds(),i=this._labelSet,r=this;e.forEach(function(e){var n=e.points;r._drawVmlDataLabels(t,i,n,a.x,a.y)})},refreshInOrder:function(){this.dataChangeRender()},dataChangeRender:function(){this._removeAll(),this.render()},_removeAll:function(){this._bodySet.remove(),this.labelDivManager.clearAllLabels()}},i.inherit(e,a),t("./RenderLibrary").register(r.LINE_VML,e),e}),a("chart/Line",["require","../Constants","../utils/BaseUtils","../utils/QueryUtils","./BaseChart","../render/LineSvgRender","../render/LineVmlRender","../ChartLibrary"],function(t){function e(t,e,a){n.call(this,t,e,a),this.refresh(e)}var a=t("../Constants"),i=t("../utils/BaseUtils"),r=t("../utils/QueryUtils"),n=t("./BaseChart");t("../render/LineSvgRender"),t("../render/LineVmlRender");var o=.35,s=4;return e.prototype={constructor:e,type:a.LINE_CHART,_doLayout:function(){this.lines=[],this.selectedIndex=0;var t=this._buildLocationMap();for(var e in t)for(var a=t[e],i=a.length-1;i>=0;i--){var r=a[i];r&&this._buildLines(r,e)}this._calculateLabelPos()},_buildLines:function(t,e){var i=e==a.LEFT||e==a.RIGHT,r=t[0][0],n=this.option.series[r],o=i?this.vanchart.yAxis(n.yAxis):this.vanchart.xAxis(n.xAxis);o.type==a.CATEGORY_AXIS_COMPONENT?this._buildNormalLines(t,e,o):this._buildDoubleValueAxisLines(t,e,o),this.lines.forEach(function(t){if(t.connectNulls){var e=[];t.points.forEach(function(t){t.isNull||e.push(t)}),t.points=e}})},_buildDoubleValueAxisLines:function(t,e,r){for(var n=e==a.LEFT||e==a.RIGHT,o=this.option.series,s=0,l=t.length;l>s;s++){for(var h=t[s],c=o[h[0]],d=n?this.vanchart.xAxis(c.xAxis):this.vanchart.yAxis(c.yAxis),u={},g=[],f=0,p=h.length;p>f;f++){var m=h[f],v=o[m],y=this._getLineData(m,n,d),_=y.points;this.lines.push(y),g.push(_);for(var b=v.data.length,x=0;b>x;x++){var L=this._getMarkerData(x,m,r,d),C=L.category;u[C]=u[C]||[],u[C].push(L),_.push(L)}}u=i.objectToArray(u);var T=this;u.forEach(function(t){T._calculatePercentage(t)}),this._updateInitY(g),u.forEach(function(t){for(var e=0,a=0,i=0,r=t.length;r>i;i++){var n=t[i];n.y>=0?(n.y0=e,e+=n.y):(n.y0=a,a+=n.y)}}),g.forEach(function(t){t.forEach(function(t){T._positionFix(t,n)}),T._orderValueBasedPoints(t,r,n),T._mergeTooltipAttributes(t)})}},_updateInitY:function(t){t.forEach(function(t){t.forEach(function(t){t.y=t.isByPercent?t.percentage:t.y})})},_orderValueBasedPoints:function(t,e,a){t.sort(function(t,i){return a?e.isAxisReversed()?i.y-t.y:t.y-i.y:e.isAxisReversed()?i.x-t.x:t.x-i.x})},_buildNormalLines:function(t,e,r){for(var n=e==a.LEFT||e==a.RIGHT,o=this.option.series,s=[],l=[],h=0,c=t.length;c>h;h++){var d=t[h],u=o[d[0]],g=n?this.vanchart.xAxis(u.xAxis):this.vanchart.yAxis(u.yAxis),f=[],p=[];s.push(p),l.push(f);for(var m=0,v=d.length;v>m;m++){var y=d[m],_=o[y],b=this._getLineData(y,n,g),x=b.points;this.lines.push(b),f.push(x);for(var L=_.data.length,C=0;L>C;C++){var T=r.scale.domain(),A=this._getMarkerData(C,y,r,g);-1!=i.indexInArray(T,A.category)&&(x.push(A),p[C]=p[C]||[],p[C].push(A))}}}this._calculateLinePercentageAndTooltip(s);var k=this;l.forEach(function(t){if(k._updateInitY(t),t.length)for(var e=t[0].length,a=0;e>a;a++)for(var i=0,r=0,o=0,s=t.length;s>o;o++){var l=t[o][a];l.y>=0?(l.y0=i,i+=l.y):(l.y0=r,r+=l.y)}t.forEach(function(t){t.forEach(function(t){k._positionFix(t,n)})})})},_positionFix:function(t,e){var a=this.option.series,i=this._getAxisPair(a[t.seriesIndex]),r=i.baseAxis,n=i.valueAxis,o=r.scale.rangeBand?r.scale.rangeBand()/2:0,s=r.scale(t.category)+o,l=n.scale(t.y+t.y0),h=n.scale(t.y0);e?(t.y=s,t.x=l,t.x0=h):(t.x=s,t.y=l,t.y0=h),t.category=r.getShowValue(t.category)},_getLineData:function(t,e,a){var n=this.option.series[t],s=this.option.plotOptions,l=[n,s],h=i.pick(r.queryList(l,"connectNulls"),!0),c=r.queryList(l,"lineWidth")||0,d=r.queryList(l,"color")||this._getDefaultSeriesColor(t),u=r.queryList(l,"fillColor");u=u?u===!0?d:u:u===!1?"":d;var g=i.pick(r.queryList(l,"fillColorOpacity"),o),f=r.queryList(l,"stack"),p=n.step,m=n.curve;p||m||(p=p===!1?!1:s.step,m=m===!1?!1:s.curve);var v="linear";p?v="step-after":m&&(v="cardinal");var y=d3.svg.line().interpolate(v).x(function(t){return t.x}).y(function(t){return t.y}).defined(function(t){return!t.isNull}),_=d3.svg.area().interpolate(v).x(function(t){return t.x}).y0(function(t){return t.y0}).y1(function(t){return t.y}).defined(function(t){return!t.isNull}),b=[],x={seriesName:n.name,seriesIndex:t,lineWidth:c,color:d,fillColor:u,fillColorOpacity:g,connectNulls:h,lineSvg:y,areaSvg:_,isHorizontal:e,points:b,isStack:!!f},L=this._calculateDataBands(a,x);return x.dataBands=L,x},_calculateLinePercentageAndTooltip:function(t){var e=this,a=[],i=[];t.forEach(function(t){if(t&&t.length){if(e._isStackedSery(t[0][0].seriesIndex))t.forEach(function(t){e._calculatePercentage(t)});else for(var r=0,n=t.length;n>r;r++)a[r]=a[r]||[],a[r].push(t[r][0]);for(var r=0,n=t.length;n>r;r++)i[r]=i[r]||[],t[r]&&t[r].forEach(function(t){i[r].push(t)})}}),a.forEach(function(t){e._calculatePercentage(t)}),i.forEach(function(t){e._margetTooltipWithCategory(t)})},_calculateDataBands:function(t,e){var a=this.getPlotBounds(),n=e.seriesName,o=e.color,s=e.fillColor,l=e.fillColorOpacity,h=this.option.series[e.seriesIndex],c=r.queryList([h,this.option.plotOptions],"bands"),d=this.vanchart.getIDPrefix()+n,u=[];
    if(u.push({x:0,y:0,width:a.width,height:a.height,color:o,fillColor:s,fillColorOpacity:l,lineData:e,clipID:d+"-1"}),!c)return u;i.isArray(c)||(c=[c]);for(var g=0,f=c.length;f>g;g++){var p=0,m=0,v=a.width,y=a.height,_=t.scale.domain(),b=Math.max(_[0],c[g].from),x=Math.min(_[1],c[g].to);b=t.scale(b),x=t.scale(x);var L=c[g].color||o,C=c[g].fillColor||s,T=c[g].fillColorOpacity||l;t.isHorizontal()?(p=Math.min(b,x),v=Math.abs(b-x)):(m=Math.min(b,x),y=Math.abs(b-x)),u.push({x:p,y:m,height:y,width:v,color:L,fillColor:C,fillColorOpacity:T,lineData:e,clipID:d+g})}return u},_getFixedPos:function(t){var e=t.marker.radius||this.getDefaultMarkerRadius(),a=this.getPlotBounds(),i=a.x+t.x+e,r=a.y+t.y+e;return[i,r]},_calculateLabelPos:function(){var t=this;this.lines.forEach(function(e){e.points.forEach(function(e){var a=e.dataLabels;a&&a.enabled&&(e.labelContent=t._calculateLabelContent(e),e.labelDim=t._calculateTextDim(e.labelContent),e.labelPos={x:e.x-e.labelDim.width/2,y:e.y-s-e.labelDim.height})})})},getTrendLineXYValues:function(t){for(var e=[],i=[],r=0,n=this.lines.length;n>r;r++){var o=this.lines[r];if(o.seriesName==t.name&&!o.isNull){o.points.forEach(function(t){e.push(t.x),i.push(t.y)});break}}return[e,i,a.BOTTOM]},orderDataIncrease:function(){this._orderDataInOrder(!0),this._doLayout()},orderDataDecrease:function(){this._orderDataInOrder(!1),this._doLayout()},zoomRefresh:function(){this._doLayout(),this.render.zoomRefresh()},getLineData:function(){return this.lines},onContainerMouseMove:function(t){this._onLineSeriesContainerMove(t)},onContainerMouseLeave:function(t){this._onLineSeriesContainerLeave(t)},onContainerClick:function(t){this._onCommonContainerClick(t)},getClosestPoint:function(t){var e,a=Number.MAX_VALUE,i=this.getSelectedLineData(),r=this.getPlotBounds();return i&&i.points&&i.points.forEach(function(i){var n=Math.abs(i.x+r.x-t[0]);a>n&&!i.isNull&&(e=i,a=n)}),e},getSelectedLineData:function(){if(this.lines.length){for(var t=this.selectedIndex,e=0,a=this.lines.length;a>e;e++)if(this.lines[e].seriesIndex==t)return this.lines[e];return this.selectedIndex=this.lines[0].seriesIndex,this.lines[0]}}},i.inherit(e,n),t("../ChartLibrary").register(a.LINE_CHART,e),e}),a("render/AreaSvgRender",["require","../utils/BaseUtils","../Constants","./LineSvgRender","./RenderLibrary"],function(t){function e(t){r.call(this,t),this.area=t}var a=t("../utils/BaseUtils"),i=t("../Constants"),r=t("./LineSvgRender");e.prototype={constructor:e},a.inherit(e,r),t("./RenderLibrary").register(i.AREA_SVG,e)}),a("render/AreaVmlRender",["require","../utils/BaseUtils","../Constants","./LineVmlRender","./RenderLibrary"],function(t){function e(t){r.call(this,t),this.area=t}var a=t("../utils/BaseUtils"),i=t("../Constants"),r=t("./LineVmlRender");e.prototype={constructor:e},a.inherit(e,r),t("./RenderLibrary").register(i.AREA_VML,e)}),a("chart/Area",["require","../Constants","../utils/BaseUtils","./Line","../render/AreaSvgRender","../render/AreaVmlRender","../ChartLibrary"],function(t){function e(t,e,a){r.call(this,t,e,a),this.refresh(e)}var a=t("../Constants"),i=t("../utils/BaseUtils"),r=t("./Line");return t("../render/AreaSvgRender"),t("../render/AreaVmlRender"),e.prototype={constructor:e,type:a.AREA_CHART},i.inherit(e,r),t("../ChartLibrary").register(a.AREA_CHART,e),e}),a("render/GaugeSvgRender",["require","../utils/BaseUtils","../utils/ColorUtils","../Constants","./BaseRender","./RenderLibrary"],function(t){function e(t){n.call(this,t),this.gauge=t}var a=t("../utils/BaseUtils"),i=t("../utils/ColorUtils"),r=t("../Constants"),n=t("./BaseRender"),o=1e3,s=5,l=.001,h="quad-out",c="gauge-class",d="pointer-hinge-background",u="pointer-hinge",g="slot-background",f="thermometer-background",p="ring-inner-background",m="ring-inner-stroke",v="ring-outer-stroke",y="ring-arc-path",_="gauge-needle",b="gauge-background",x="gauge-label",L="gauge-axis";e.prototype={constructor:e,render:function(){var t=this.gauge.getPlotBounds(),e=this.gauge.getVanchartRender().getRenderRoot();this._bodyG||(this._bodyG=e.append("g").attr("transform","translate("+t.x+","+t.y+")"),this._createDefs());var a=this.gauge.getGaugeData();this._bodyG.selectAll("g").data(a,function(t){return t.category}).enter().append("g").attr("class",function(t){return c+" "+t.category}).attr("transform",function(t){return"translate("+Math.round(t.centerX)+","+Math.round(t.centerY)+")"}).call(this._createGauge.bind(this));var i=this.gauge.option.plotOptions.style;i!=r.GAUGE_POINTER&&i!=r.GAUGE_POINTER_SEMI&&this._addMouseMoveHandler(e)},_addMouseMoveHandler:function(t){var e=this,a=this.gauge.getTooltipComponent();t.on("mousemove.gauge",function(){var t=d3.mouse(e._bodyG.node()),i=e._findGaugeByPos(t);if(i){var r=i.points[0];if(r.tooltip){i.tooltip=r.tooltip;var n=r.tooltip;a.show(e.gauge.getTooltipPos(e._bodyG.select("g."+i.category),a.calculateTooltipDivDim(n)),n)}}else a.hide()}).on("mouseleave.gauge",function(){a.hide()}).on("click.gauge",function(){var t=d3.mouse(e._bodyG.node()),a=e._findGaugeByPos(t);if(a){var i=a.points[0],r=i.data.hyperlink;r&&FR.doHyperlink(d3.event,new Function("return "+r)(),!0)}})},_findGaugeByPos:function(t){for(var e=this.gauge.getGaugeData(),i=0,r=e.length;r>i;i++){var n=e[i];if(a.containsPoint(n.bounds,t))return n}},_createDefs:function(){var t=this._bodyG.append("defs"),e=t.append("linearGradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%").attr("id",this._getRingGradualID());e.append("stop").attr("offset","0%").style("stop-color","#ffffff"),e.append("stop").attr("offset","100%").style("stop-color","#dddddd");var a=this,n=this.gauge.getGaugeData();n.forEach(function(e){if(e.style==r.GAUGE_THERMOMETER){var n=e.points[0],o=n.color,s=i.mixColorWithHSB(o,0,-.1,.1);if(e.thermometerLayout==r.HORIZONTAL_LAYOUT){var l=t.append("linearGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("id",a._getThermometerGradualID(e));l.append("stop").attr("offset","0%").style("stop-color",s),l.append("stop").attr("offset","100%").style("stop-color",o)}else{var l=t.append("linearGradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%").attr("id",a._getThermometerGradualID(e));l.append("stop").attr("offset","0%").style("stop-color",o),l.append("stop").attr("offset","100%").style("stop-color",s)}}else e.style==r.GAUGE_POINTER||e.style==r.GAUGE_POINTER_SEMI?(a._createDropShadowFilter(t,a._getPointerDropShadowID(),0,2,.1,2),a._createInnerShadowFilter(t,a._getPointerInnerShadowID(),0,2,.1,2)):e.style==r.GAUGE_SLOT&&(a._createDropShadowFilter(t,a._getSlotDropShadowID(),0,2,.05,0),a._createInnerShadowFilter(t,a._getSlotInnerShadowID(),0,2,.05,0))})},_removeGaugeLabels:function(t){var e=t.select("g."+x);e.selectAll("text").remove(),e.selectAll("rect").remove()},_createGauge:function(t){var e=this;t.each(function(t){var a=t.style,i=d3.select(this);switch(a){case r.GAUGE_POINTER:i.append("path").attr("class",b),i.append("path").attr("class",d),i.append("g").attr("class",x),i.append("g").attr("class",L),i.append("g").attr("class",_),i.append("path").attr("class",u),e._createPointerCircle(i,t);break;case r.GAUGE_POINTER_SEMI:i.append("path").attr("class",b),i.append("path").attr("class",d),i.append("g").attr("class",x),i.append("g").attr("class",L),i.append("g").attr("class",_),i.append("path").attr("class",u),e._createPointerSemi(i,t);break;case r.GAUGE_SLOT:i.append("path").attr("class",b),i.append("path").attr("class",g),i.append("circle").attr("class",_),i.append("g").attr("class",x),e._createSlot(i,t);break;case r.GAUGE_THERMOMETER:i.append("line").attr("class",b),i.append("line").attr("class",f),i.append("circle").attr("class",_),i.append("g").attr("class",L),i.append("g").attr("class",x),e._createThermometer(i,t);break;case r.GAUGE_RING:i.append("path").attr("class",b),i.append("path").attr("class",y),i.append("path").attr("class",p),i.append("path").attr("class",m),i.append("path").attr("class",v),i.append("g").attr("class",x),e._createRing(i,t)}})},_updateGauge:function(t){var e=this;t.each(function(t){var a=t.style,i=d3.select(this);switch(e._removeGaugeLabels(i),a){case r.GAUGE_POINTER:e._createPointerCircle(i,t);break;case r.GAUGE_POINTER_SEMI:e._createPointerSemi(i,t);break;case r.GAUGE_SLOT:e._createSlot(i,t);break;case r.GAUGE_THERMOMETER:e._createThermometer(i,t);break;case r.GAUGE_RING:e._createRing(i,t)}})},_createPointerCircle:function(t,e){this._createPointer(t,e,180,150,.16,.07)},_createPointerSemi:function(t,e){this._createPointer(t,e,98,90,.11,.055)},_createPointer:function(t,e,r,n,o,s){var l=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0),h=d3.svg.arc().startAngle(a.toRadian(-r)).endAngle(a.toRadian(r)).innerRadius(0).outerRadius(e.radius).toCenter(!1),c=e.yAxis.scale.domain(),g=d3.scale.linear().domain(c).range([a.toRadian(-n),a.toRadian(n)]);t.select("path."+b).attr("d",h()).style("fill",e.paneBackgroundColor).style("fill-opacity",i.getColorOpacity(e.paneBackgroundColor)),this._addFilter(t.select("path."+b),this._getPointerDropShadowID()),l.outerRadius(o*e.radius),t.select("path."+d).attr("d",l()).style("fill",e.hingeBackgroundColor).style("fill-opacity",i.getColorOpacity(e.hingeBackgroundColor)),this._addFilter(t.select("path."+d),this._getPointerInnerShadowID()),this._drawGaugeLabels(t,e),this._drawPointerTicks(t,e,g),this._drawPointerArrow(t,e,g),l.outerRadius(s*e.radius),t.select("path."+u).attr("d",l()).style("fill",e.hinge).style("fill-opacity",i.getColorOpacity(e.hinge)),this._addFilter(t.select("path."+u),this._getPointerDropShadowID())},_drawPointerArrow:function(t,e,r){var n=t.select("g."+_),s=this,l=r.domain(),c=n.selectAll("path").data(e.points);c.enter().append("path").call(this.addShapeEventHandler.bind(this)),c.exit().remove(),c.each(function(t){var n=d3.select(this),c=s._getRotate(n),d=r(s.gauge.isSupportAnimation()?l[0]:t.valueInDomain),u=r(t.valueInDomain),g=a.toDegree(u-d);n.attr("d",s._getArrowPath(e.radius,d)).style("fill",e.needle).style("fill-opacity",i.getColorOpacity(e.needle)).transition().duration(o).ease(h).attrTween("transform",function(){var t=d3.interpolate(c,g);return function(e){return"rotate("+t(e)+")"}}),s._addFilter(n,s._getPointerDropShadowID(),o)})},_addFilter:function(t,e,a){a=a||0,a+=100,setTimeout(function(){t&&t.style("filter","url(#"+e+")")},a)},_getRotate:function(t){var e=t.attr("transform");if(e){var a=e.indexOf("(");if(-1!=a)return parseFloat(e.substr(a+1))}return 0},_getArrowPath:function(t,e){var a=this._getArcPoint(.9*t,e),i=this._getArcPoint(.02*t,e+Math.PI/2),r=this._getArcPoint(.02*t,e-Math.PI/2);return"M"+a[0]+","+a[1]+"L"+i[0]+","+i[1]+"L"+r[0]+","+r[1]+"Z"},_drawPointerTicks:function(t,e,i){var r=t.select("g."+L),n=e.yAxis.getTickData(),o=e.yAxis.componentOption,s=o.labelStyle,l=o.useHtml,h=e.yAxis.getMinorTickData(),c=this,d=.95*e.radius,u=.84*e.radius,g=e.bands,f=this.gauge.getPlotBounds(),p=f.x+e.centerX,m=f.y+e.centerY,v=r.selectAll("g.tick").data(n,function(t){return i(t.tickValue)});v.exit().remove();var y=v.enter().append("g").attr("class","tick");y.append("text"),y.append("line"),v.each(function(t){var r=d3.select(this),n=i(t.tickValue),o=c._getArcPoint(d,n),h=c._getArcPoint(d-.1*e.radius,n),f=c.gauge._getColorFromBands(t.tickValue,g);r.select("line").attr("x1",o[0]).attr("y1",o[1]).attr("x2",h[0]).attr("y2",h[1]).attr("stroke",f);var v=c.gauge._getPointerTickCenter(t,u,i);if(l){var y={x:p+v.x-t.tickDim.width/2,y:m+v.y-t.tickDim.height/2};c.labelDivManager.addLabel(t.tickContent,y,s)}else r.select("text").attr("x",v.x).attr("y",v.y).attr("dy",".35em").attr("text-anchor","middle").text(t.tickContent).call(a.setTextStyle,s)});var _=r.selectAll("line.minorTick").data(h,function(t){return i(t)});_.enter().append("line").attr("class","minorTick"),_.exit().remove(),_.each(function(t){var a=i(t),r=c._getArcPoint(d,a),n=c._getArcPoint(d-.05*e.radius,a),o=c.gauge._getColorFromBands(t,g);d3.select(this).attr("x1",r[0]).attr("y1",r[1]).attr("x2",n[0]).attr("y2",n[1]).attr("stroke",o)})},_getArcPoint:function(t,e){return[t*Math.sin(e),-t*Math.cos(e)]},_createSlot:function(t,e){var r=d3.svg.arc().startAngle(a.toRadian(-135)).endAngle(a.toRadian(135)).innerRadius(0).outerRadius(e.radius).toCenter(!1).closePath(!1),n=d3.svg.arc().startAngle(a.toRadian(-135)).endAngle(a.toRadian(135)).innerRadius(0).outerRadius(e.radius).toCenter(!1).closePath(!1),s=e.yAxis.scale.domain(),l=d3.scale.linear().domain(s).range([a.toRadian(-135),a.toRadian(135)]),c=e.points[0],d=l(s[0]),u=l(c.valueInDomain),f=this.gauge._getColorFromBands(s[0],e.bands),p=c.color,m=this._getRotate(t.select("circle."+_)),v=t.select("path."+g).attr("lastStroke");f=a.isEmpty(v)?f:v,this.gauge.isSupportAnimation()||(d=u,f=p),t.select("path."+b).attr("d",n()).style({fill:"none",stroke:e.slotBackgroundColor,"stroke-linecap":"round","stroke-width":.16*e.radius}),this._addFilter(t.select("path."+b),this._getSlotInnerShadowID()),t.select("path."+g).attr("lastStroke",p).style({fill:"none",stroke:i.colorToHex(f),"stroke-linecap":"round","stroke-width":.16*e.radius}).transition().duration(o).ease(h).attrTween("d",function(){var t=d3.interpolate(d+a.toRadian(m),u);return function(e){return r.endAngle(t(e))()}}).style("stroke",i.colorToHex(p)),this._addFilter(t.select("path."+g),this._getSlotInnerShadowID(),o);var y=this._getArcPoint(e.radius,d);t.select("circle."+_).attr("cx",y[0]).attr("cy",y[1]).attr("r",.048*e.radius).style("fill",e.needle).style("fill-opacity",i.getColorOpacity(e.needle)).transition().duration(o).ease(h).attrTween("transform",function(){var t=d3.interpolate(m,a.toDegree(u-d));return function(e){return"rotate("+t(e)+")"}}),this._addFilter(t.select("circle."+_),this._getSlotDropShadowID(),o),this._drawGaugeLabels(t,e)},_createThermometer:function(t,e){var a=e.yAxis.scale.domain(),n=e.points[0],c=n.valueInDomain,d=n.color,u=e.radius,g=d3.scale.linear().domain(a).range([-u,u]),p="x1",m="y1",v="x2",y="y2",x="cx",L="cy",C=g(c),T=-u;if(e.thermometerLayout==r.VERTICAL_LAYOUT&&(p="y1",m="x1",v="y2",y="x2",x="cy",L="cx",T=u,C=g.range([u,-u])(c)),t.select("line."+b).attr(p,-u).attr(m,0).attr(v,u).attr(y,0).style({fill:"none",stroke:e.slotBackgroundColor,"stroke-width":2*s,"stroke-linecap":"round"}),this.gauge.isSupportAnimation()){var A=t.select("line."+f).attr(v)||T;A=parseFloat(A),t.select("line."+f).attr(p,T).attr(m,0).attr(v,A).attr(y,l).style({stroke:"url(#"+this._getThermometerGradualID(e)+")","stroke-width":2*s,"stroke-linecap":"round"}).transition().duration(o).ease(h).attr(v,C),t.select("circle."+_).attr(x,A).attr(L,0).attr("r",.9*s).style({fill:e.needle,"fill-opacity":i.getColorOpacity(e.needle),"stroke-width":.6*s,stroke:i.mixColorWithHSB(d,0,.1,-.1)}).transition().duration(o).ease(h).attr(x,C)}else t.select("line."+f).attr(p,T).attr(m,0).attr(v,C).attr(y,l).style({stroke:"url(#"+this._getThermometerGradualID(e)+")","stroke-width":2*s,"stroke-linecap":"round"}),t.select("circle."+_).attr(x,C).attr(L,0).attr("r",.9*s).style({fill:e.needle,"fill-opacity":i.getColorOpacity(e.needle),"stroke-width":.6*s,stroke:i.mixColorWithHSB(d,0,.1,-.1)});this._drawGaugeLabels(t,e),this._drawThermometerTicks(t,e,g)},_drawThermometerTicks:function(t,e,i){var n=t.select("g."+L),o=e.yAxis.getTickData(),s=e.yAxis.componentOption,l=s.labelStyle,h=s.useHtml,c=this.gauge.getPlotBounds(),d=c.x+e.centerX,u=c.y+e.centerY,g=e.yAxis.getMinorTickData(),f="x1",p="y1",m="x2",v="y2",y="dx",_="x",b="y",x=-9,C=-15,T=-13,A="middle",k=-19,R="0em";e.thermometerLayout==r.VERTICAL_LAYOUT&&(f="y1",p="x1",m="y2",v="x2",y="dy",_="y",b="x",x=9,C=15,T=13,A="start",k=19,R=".35em");var O=n.selectAll("g.tick").data(o,function(t){return i(t.tickValue)});O.exit().remove();var S=O.enter().append("g").attr("class","tick");S.append("text"),S.append("line");var P=this;O.each(function(t){var n=d3.select(this),o=i(t.tickValue);if(o=a.lineSubPixelOpt(o,1),n.select("line").attr(f,o).attr(p,x).attr(m,o).attr(v,C).style("stroke",s.tickColor).style("stork-width",s.tickWidth),h){var c;c=e.thermometerLayout==r.HORIZONTAL_LAYOUT?{x:d+o-t.tickDim.width/2,y:u+k-t.tickDim.height}:{x:d+k,y:u+o-t.tickDim.height/2},P.labelDivManager.addLabel(t.tickContent,c,l)}else n.select("text").attr(_,o).attr(b,k).attr("text-anchor",A).attr(y,R).text(t.tickContent).call(a.setTextStyle,l)});var w=n.selectAll("line.minorTick").data(g,function(t){return i(t)});w.enter().append("line").attr("class","minorTick"),w.exit().remove(),w.each(function(t){var e=i(t);e=a.lineSubPixelOpt(e,1),d3.select(this).attr(f,e).attr(p,x).attr(m,e).attr(v,T).style("stroke",s.minorTickColor).style("stork-width",s.minorTickWidth)})},_createRing:function(t,e){var r=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0).outerRadius(e.radius),n=d3.svg.arc().startAngle(0).innerRadius(0).outerRadius(e.radius),s=e.yAxis.scale.domain(),l=e.points[0],c=Math.max(l.percentage,0),d=2*Math.PI*c*(e.clockwise?1:-1),u=this.gauge._getColorFromBands(s[0],e.bands),g=l.color,f=.8*e.radius,_=f+2,x=f-1.5;if(t.select("path."+b).attr("d",r()).style({fill:e.paneBackgroundColor,"fill-opacity":i.getColorOpacity(e.paneBackgroundColor)}),this.gauge.isSupportAnimation()){var L=t.select("path."+y),C=L.attr("lastRadian");a.isEmpty(C)?C=0:(u=L.style("fill"),C=parseFloat(C)),L.style("fill",i.colorToHex(u)).style("fill-opacity",i.getColorOpacity(u)).transition().duration(o).ease(h).style("fill",i.colorToHex(g)).style("fill-opacity",i.getColorOpacity(g)).attrTween("d",function(){var t=d3.interpolate(C,d);return function(e){return n.endAngle(t(e))()}}).attr("lastRadian",d)}else t.select("path."+y).style("fill",g).style("fill-opacity",i.getColorOpacity(g)).attr("d",n.endAngle(d)());t.select("path."+p).attr("d",r.outerRadius(f)()).style("fill",e.innerPaneBackgroundColor).style("fill-opacity",i.getColorOpacity(e.innerPaneBackgroundColor)),t.select("path."+v).attr("d",r.outerRadius(_)).style({fill:"none",stroke:"#000000","stroke-opacity":.05,"stroke-width":4}),t.select("path."+m).attr("d",r.outerRadius(x)).style({fill:"none",stroke:"url(#"+this._getRingGradualID()+")","stroke-width":3}),this._drawGaugeLabels(t,e)},_drawGaugeLabels:function(t,e){var a=t.select("g."+x);if(e.seriesLabelContent&&this._drawLabel(a,e.seriesLabelContent,e.seriesLabelPos,e.seriesLabelDim,e.seriesLabelStyle,e,e.seriesLabel.useHtml),e.percentageLabelContent&&this._drawLabel(a,e.percentageLabelContent,e.percentageLabelPos,e.percentageLabelDim,e.percentageLabelStyle,e,e.percentageLabel.useHtml),e.valueLabelContent&&e.valueLabelContent.length){e.valueLabelBackground&&(a.append("rect").attr("x",e.valueLabelBackground.x).attr("y",e.valueLabelBackground.y).attr("width",e.valueLabelBackground.width).attr("height",e.valueLabelBackground.height).attr("rx",.02*e.radius).attr("ry",.02*e.radius).style({fill:e.valueLabel.backgroundColor,"fill-opacity":i.getColorOpacity(e.valueLabel.backgroundColor)}),this._addFilter(a,this._getPointerInnerShadowID()));for(var r=0,n=e.valueLabelContent.length;n>r;r++){var o=e.valueLabelContent[r];this._drawLabel(a,o.labelContent,o.labelPos,o.labelDim,o.labelStyle,e,e.valueLabel.useHtml)}}},_drawLabel:function(t,e,i,r,n,o,s){if(s){var l=this.gauge.getPlotBounds(),h=o.centerX,c=o.centerY;i={x:i.x+h+l.x,y:i.y+c+l.y},this.labelDivManager.addLabel(e,i,n)}else t.append("text").attr("text-anchor","middle").attr("dy","0.85em").attr("x",i.x+r.width/2).attr("y",i.y).text(e).call(a.setTextStyle,n)},refreshInOrder:function(){var t=this.gauge.getGaugeData(),e=this;this.labelDivManager.clearAllLabels(),this._bodyG.selectAll("g."+c).data(t,function(t){return t.category}).transition().duration(o).ease(h).attr("transform",function(t){return"translate("+t.centerX+","+t.centerY+")"}).each("end",function(){d3.select(this).call(e._updateGauge.bind(e))})},monitorRender:function(){var t=this.gauge.getPlotBounds();this._bodyG.attr("transform","translate("+t.x+","+t.y+")"),this.labelDivManager.clearAllLabels(),this._bodyG.select("defs").remove(),this._createDefs();var e=this.gauge.getGaugeData(),a=this._bodyG.selectAll("g."+c).data(e,function(t){return t.category}).attr("class",function(t){return c+" "+t.category});a.attr("transform",function(t){return"translate("+t.centerX+","+t.centerY+")"}).call(this._updateGauge.bind(this)),a.enter().append("g").attr("class",function(t){return c+" "+t.category}).attr("transform",function(t){return"translate("+t.centerX+","+t.centerY+")"}).call(this._createGauge.bind(this)),a.exit().remove()},refreshRestore:function(){this.refreshInOrder()},_getPointerInnerShadowID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_POINTER+"innerShadow"},_getPointerDropShadowID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_POINTER+"dropShadow"},_getSlotDropShadowID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_SLOT+"dropShadow"},_getSlotInnerShadowID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_SLOT+"innerShadow"},_getRingGradualID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_RING},_getThermometerGradualID:function(t){return this.gauge.vanchart.getIDPrefix()+a.removeAllBlank(t.category)}},a.inherit(e,n),t("./RenderLibrary").register(r.GAUGE_SVG,e)}),a("render/GaugeVmlRender",["require","../utils/BaseUtils","../Constants","./BaseRender","../utils/ColorUtils","./RenderLibrary"],function(t){function e(t){r.call(this,t),this.gauge=t}var a=t("../utils/BaseUtils"),i=t("../Constants"),r=t("./BaseRender"),n=t("../utils/ColorUtils"),o=5;e.prototype={constructor:e,render:function(){var t=this.gauge.getVanchartRender().getRenderRoot(),e=this.gauge.getPlotBounds(),a=e.x,r=e.y;this._bodySet=t.set();for(var n=this.gauge.getGaugeData(),o=0,s=n.length;s>o;o++){var l=t.set(),h=n[o],c=h.style;switch(c){case i.GAUGE_POINTER:this._createPointer(t,l,h);break;case i.GAUGE_POINTER_SEMI:this._createPointerSemi(t,l,h);break;case i.GAUGE_SLOT:this._createSlot(t,l,h);break;case i.GAUGE_THERMOMETER:this._createThermometer(t,l,h);break;case i.GAUGE_RING:this._createRing(t,l,h)}l.transform("t"+(h.centerX+a)+","+(h.centerY+r)),this._bodySet.push(l)}},_createPointer:function(t,e,i){var r=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0).outerRadius(i.radius),o=i.yAxis.scale.domain(),s=d3.scale.linear().domain(o).range([a.toRadian(-150),a.toRadian(150)]);e.push(t.path(r()).attr({fill:i.paneBackgroundColor,"fill-opacity":n.getColorOpacity(i.paneBackgroundColor),stroke:"none"})),r.outerRadius(.16*i.radius),e.push(t.path(r()).attr({fill:i.hingeBackgroundColor,"fill-opacity":n.getColorOpacity(i.hingeBackgroundColor),stroke:"none"})),this._drawGaugeLabels(t,e,i),this._drawPointerTicks(t,e,i,s),this._drawPointerArrow(t,e,i,s),r.outerRadius(.07*i.radius),e.push(t.path(r()).attr({fill:i.hinge,"fill-opacity":n.getColorOpacity(i.hinge),stroke:"none"}))},_createPointerSemi:function(t,e,i){var r=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0),o=d3.svg.arc().startAngle(a.toRadian(-98)).endAngle(a.toRadian(98)).innerRadius(0).outerRadius(i.radius).toCenter(!1),s=i.yAxis.scale.domain(),l=d3.scale.linear().domain(s).range([a.toRadian(-90),a.toRadian(90)]);e.push(t.path(o()).attr({fill:i.paneBackgroundColor,"fill-opacity":n.getColorOpacity(i.paneBackgroundColor),stroke:"none"})),r.outerRadius(.11*i.radius),e.push(t.path(r()).attr({fill:i.hingeBackgroundColor,"fill-opacity":n.getColorOpacity(i.hingeBackgroundColor),stroke:"none"})),this._drawGaugeLabels(t,e,i),this._drawPointerTicks(t,e,i,l),this._drawPointerArrow(t,e,i,l),r.outerRadius(.055*i.radius),e.push(t.path(r()).attr({fill:i.hinge,"fill-opacity":n.getColorOpacity(i.hinge),stroke:"none"}))},_drawGaugeLabels:function(t,e,a){if(a.seriesLabelContent&&this._drawLabel(t,e,a.seriesLabelContent,a.seriesLabelPos,a.seriesLabelStyle,a.seriesLabelDim,a,a.seriesLabel.useHtml),a.percentageLabelContent&&this._drawLabel(t,e,a.percentageLabelContent,a.percentageLabelPos,a.percentageLabelStyle,a.percentageLabelDim,a,a.percentageLabel.useHtml),a.valueLabelContent){if(a.valueLabelBackground){var i=a.valueLabelBackground;e.push(t.rect(i.x,i.y,i.width,i.height).attr({fill:a.valueLabel.backgroundColor,"fill-opacity":n.getColorOpacity(a.valueLabel.backgroundColor),stroke:"none"}))}for(var r=0,o=a.valueLabelContent.length;o>r;r++){var s=a.valueLabelContent[r];this._drawLabel(t,e,s.labelContent,s.labelPos,s.labelStyle,s.labelDim,a,a.valueLabel.useHtml)}}},_drawLabel:function(t,e,a,i,r,n,o,s){var l=this.gauge.getPlotBounds(),h=o.centerX,c=o.centerY;i={x:i.x+h+l.x,y:i.y+c+l.y},this.labelDivManager.addLabel(a,i,r)},_drawPointerArrow:function(t,e,a,i){var r=this;a.points.forEach(function(o){var s=i(o.valueInDomain),l=r._getArcPoint(.9*a.radius,s),h=r._getArcPoint(.02*a.radius,s+Math.PI/2),c=r._getArcPoint(.02*a.radius,s-Math.PI/2),d=t.path("M"+r._dealWithFloat(l[0])+","+r._dealWithFloat(l[1])+"L"+r._dealWithFloat(h[0])+","+r._dealWithFloat(h[1])+"L"+r._dealWithFloat(c[0])+","+r._dealWithFloat(c[1])+"Z");d.attr({fill:a.needle,"fill-opacity":n.getColorOpacity(a.needle),stroke:"none"}),r.addShapeEventHandler(d,o),e.push(d)})},_drawPointerTicks:function(t,e,i,r){var n=i.yAxis.getTickData(),o=i.yAxis.componentOption,s=o.labelStyle,l=o.useHtml,h=i.yAxis.getMinorTickData(),c=this,d=.95*i.radius,u=i.bands,g=this.gauge.getPlotBounds(),f=g.x+i.centerX,p=g.y+i.centerY;n.forEach(function(n){var o=r(n.tickValue),h=c._getArcPoint(d,o),g=c._getArcPoint(d-.1*i.radius,o),m=c.gauge._getColorFromBands(n.tickValue,u);e.push(t.path(c._getLinePath(h,g)).attr({stroke:m}));var v,y,_=.84*i.radius,b=n.tickDim,x=Math.atan(b.width/b.height),L=c._getArcPoint(_,o),C=L[0],T=L[1];if(Math.abs(o)<x){var A=b.height/2;v=C+A*C/T,y=T+A}else if(o>=x&&o<=Math.PI-x){var A=b.width/2;v=C-A,y=T-A*T/C}else if(o>=x-Math.PI&&-x>=o){var A=b.width/2;v=C+A,y=T+A*T/C}else{var A=b.height/2;v=C-A*C/T,y=T-A}if(l){var k={x:f+v-n.tickDim.width/2,y:p+y-n.tickDim.height/2};c.labelDivManager.addLabel(n.tickContent,k,s)}else e.push(t.text(v,y,n.tickContent).attr(a.cssNormalization(s)))}),h.forEach(function(a){var n=r(a),o=c._getArcPoint(d,n),s=c._getArcPoint(d-.05*i.radius,n),l=c.gauge._getColorFromBands(a,u);e.push(t.path(c._getLinePath(o,s)).attr({stroke:l}))})},_getArcPoint:function(t,e){return[t*Math.sin(e),-t*Math.cos(e)]},_createSlot:function(t,e,i){var r=d3.svg.arc().startAngle(a.toRadian(-135)).endAngle(a.toRadian(135)).innerRadius(0).outerRadius(i.radius).toCenter(!1).closePath(!1),o=d3.svg.arc().startAngle(a.toRadian(-135)).endAngle(a.toRadian(135)).innerRadius(0).outerRadius(i.radius).toCenter(!1).closePath(!1);e.push(t.path(o()).attr({fill:"none",stroke:i.slotBackgroundColor,"stroke-linecap":"round","stroke-width":.16*i.radius}));var s=i.yAxis.scale.domain(),l=a.toRadian(-135),h=d3.scale.linear().domain(s).range([l,a.toRadian(135)]),c=i.points[0],d=c.valueInDomain,u=h(d),g=c.color,f=this._getArcPoint(i.radius,u);Math.abs(u-l)<1e-6?e.push(t.circle(f[0],f[1],.08*i.radius).attr({fill:g,stroke:"none"})):e.push(t.path(r.endAngle(u)()).attr({fill:"none",stroke:g,"stroke-linecap":"round","stroke-width":.16*i.radius})),e.push(t.circle(f[0],f[1],.048*i.radius).attr({fill:i.needle,"fill-opacity":n.getColorOpacity(i.needle),stroke:"none"})),this._drawGaugeLabels(t,e,i)},_createThermometer:function(t,e,a){a.thermometerLayout==i.HORIZONTAL_LAYOUT?this._createHorizontalThermometer(t,e,a):this._createVerticalThermometer(t,e,a)},_createHorizontalThermometer:function(t,e,a){var i=a.yAxis.scale.domain(),r=a.points[0],s=r.valueInDomain,l=r.color,h=a.radius,c=d3.scale.linear().domain(i).range([-h,h]);e.push(t.path(this._getLinePath([-h,0],[h,0])).attr({fill:"none",stroke:a.slotBackgroundColor,"stroke-width":2*o,"stroke-linecap":"round"})),e.push(t.path(this._getLinePath([-h,0],[c(s),0])).attr({fill:"none",stroke:l,"stroke-width":2*o,"stroke-linecap":"round"})),e.push(t.circle(c(s),0,.9*o).attr({fill:a.needle,"fill-opacity":n.getColorOpacity(a.needle),"stroke-width":.6*o,stroke:n.mixColorWithHSB(l,0,.1,-.1)})),this._drawGaugeLabels(t,e,a),this._drawHorizontalThermometerTicks(t,e,a,c)},_drawHorizontalThermometerTicks:function(t,e,i,r){var n=i.yAxis.getTickData(),o=i.yAxis.componentOption,s=o.labelStyle,l=o.useHtml,h=i.yAxis.getMinorTickData(),c=this.gauge.getPlotBounds(),d=c.x+i.centerX,u=c.y+i.centerY,g=this;n.forEach(function(i){var n=r(i.tickValue);if(e.push(t.path(g._getLinePath([n,-9],[n,-15])).attr({stroke:o.tickColor,"stroke-width":1})),l){var h={x:d+n-i.tickDim.width/2,y:u-19-i.tickDim.height};g.labelDivManager.addLabel(i.tickContent,h,s)}else e.push(t.text(n,-19-i.tickDim.height/2,i.tickContent).attr(a.cssNormalization(s)))}),h.forEach(function(a){var i=r(a);e.push(t.path(g._getLinePath([i,-9],[i,-13])).attr({stroke:o.minorTickColor,"stroke-width":1}))})},_createVerticalThermometer:function(t,e,a){var i=a.yAxis.scale.domain(),r=a.points[0],s=r.color,l=r.valueInDomain,h=a.radius,c=d3.scale.linear().domain(i).range([h,-h]);e.push(t.path(this._getLinePath([0,h],[0,-h])).attr({fill:"none",stroke:a.slotBackgroundColor,"stroke-width":2*o,"stroke-linecap":"round"})),e.push(t.path(this._getLinePath([0,h],[0,c(l)])).attr({fill:"none",stroke:s,"stroke-width":2*o,"stroke-linecap":"round"})),e.push(t.circle(0,c(l),.9*o).attr({fill:a.needle,"fill-opacity":n.getColorOpacity(a.needle),"stroke-width":.6*o,stroke:n.mixColorWithHSB(s,0,.1,-.1)})),this._drawGaugeLabels(t,e,a),this._drawVerticalThermometerTicks(t,e,a,c)},_drawVerticalThermometerTicks:function(t,e,i,r){var n=i.yAxis.getTickData(),o=i.yAxis.componentOption,s=o.labelStyle,l=o.useHtml,h=i.yAxis.getMinorTickData(),c=this.gauge.getPlotBounds(),d=c.x+i.centerX,u=c.y+i.centerY,g=this;n.forEach(function(i){var n=r(i.tickValue);if(e.push(t.path(g._getLinePath([9,n],[15,n])).attr({stroke:o.tickColor,"stroke-width":1})),l){var h={x:d+19,y:u+n-i.tickDim.height/2};g.labelDivManager.addLabel(i.tickContent,h,s)}else e.push(t.text(19,n,i.tickContent).attr(a.cssNormalization(s)).attr("text-anchor","start"))}),h.forEach(function(a){var i=r(a);e.push(t.path(g._getLinePath([9,i],[13,i])).attr({stroke:o.minorTickColor,"stroke-width":1}))})},_createRing:function(t,e,a){var i=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0).outerRadius(a.radius),r=d3.svg.arc().startAngle(0).innerRadius(0).outerRadius(a.radius),o=a.points[0],s=Math.max(o.percentage,0),l=2*Math.PI*s*(a.clockwise?1:-1),h=o.color,c=.8*a.radius,d=c+2;e.push(t.path(i()).attr({fill:a.paneBackgroundColor,"fill-opacity":n.getColorOpacity(a.paneBackgroundColor),stroke:"none"})),e.push(t.path(r.endAngle(l)()).attr({fill:h,"fill-opacity":n.getColorOpacity(h),stroke:"none"})),e.push(t.path(i.outerRadius(c)()).attr({fill:a.innerPaneBackgroundColor,"fill-opacity":n.getColorOpacity(a.innerPaneBackgroundColor),stroke:"none"})),e.push(t.path(i.outerRadius(d)).attr({fill:"none",stroke:"#000000","stroke-opacity":.05,"stroke-width":4})),this._drawGaugeLabels(t,e,a)},_reRender:function(){this._bodySet.remove(),this.labelDivManager.clearAllLabels(),this.render()},refreshInOrder:function(){this._reRender()},refreshRestore:function(){this._reRender()}},a.inherit(e,r),t("./RenderLibrary").register(i.GAUGE_VML,e)}),a("chart/Gauge",["require","../Constants","../utils/BaseUtils","./BaseChart","../utils/QueryUtils","../utils/BoundsManager","../render/GaugeSvgRender","../render/GaugeVmlRender","../ChartLibrary"],function(t){function e(t,e,a){r.call(this,t,e,a),this.refresh(e)}var a=t("../Constants"),i=t("../utils/BaseUtils"),r=t("./BaseChart"),n=t("../utils/QueryUtils"),o=t("../utils/BoundsManager"),s=100,l=5,h=6,c=4,d=5,u=.8,g=.3,f=.3,p="class";return t("../render/GaugeSvgRender"),t("../render/GaugeVmlRender"),e.prototype={constructor:e,_doLayout:function(){var t=this.option.plotOptions;this.gaugeData=[];for(var e=this.option.series,r=0,o=e.length;o>r;r++){var s=e[r],l=s.data,h={};if(l&&l.length){for(var c=s.name,d=[],u=[s,t],g=n.queryList(u,"style")||a.GAUGE_POINTER,f=this.vanchart.getThemeConfig(),m=f[g]||f[a.GAUGE_POINTER],v=n.queryList(u,"seriesLabel")||{},y=n.queryList(u,"valueLabel")||{},_=n.queryList(u,"percentageLabel")||{},b=n.queryList(u,"needle"),x=n.queryList(u,"hinge"),L=n.queryList(u,"clockwise"),C=n.queryList(u,"hingeBackgroundColor"),T=n.queryList(u,"paneBackgroundColor"),A=n.queryList(u,"slotBackgroundColor"),k=n.queryList(u,"innerPaneBackgroundColor"),R=n.queryList(u,"thermometerLayout"),O=this.vanchart.yAxis(s.yAxis),S=O.scale.domain()[0],P=O.scale.domain(),w=n.queryList(u,"bands")||[],D=this._getDefaultBands(u,P),E=g==a.GAUGE_POINTER||g==a.GAUGE_POINTER_SEMI?l.length:1,M=0,I=0;E>I;I++){
    var B=l[I],N=B.x||B[0]||"",G=i.pick(B.y,B[1],B);if(!isNaN(G)){var H=i.getValueInDomain(G,P),V={data:B,hyperlink:l.hyperlink,gauge:h,category:c,seriesName:N,seriesIndex:r,value:G,valueInDomain:H,dataID:p+i.removeAllBlank(encodeURI(c+N))};this._mergeCommonAttributes(V,[B,s,t]),V.color=this._getColorFromBands(G,w)||this._getColorFromBands(H,D)||V.color,d.push(V),M+=G-S}}d.length&&(this.gaugeData.push(n.merge(h,{category:c,points:d,sery:s,totalValue:M,style:g,yAxis:O,bands:i.addArray(w,D),center:n.queryList(u,"center"),radius:n.queryList(u,"radius"),seriesLabel:n.merge(v,m.seriesLabel),valueLabel:n.merge(y,m.valueLabel),percentageLabel:n.merge(_,m.percentageLabel),needle:b||m.needle,hinge:x||m.hinge,thermometerLayout:R||m.thermometerLayout,clockwise:i.pick(L,m.clockwise),hingeBackgroundColor:C||m.hingeBackgroundColor,paneBackgroundColor:T||m.paneBackgroundColor,slotBackgroundColor:A||m.slotBackgroundColor,innerPaneBackgroundColor:k||m.innerPaneBackgroundColor})),this._calculateGaugePercentage(d,s),this._mergeTooltipAttributes(d))}}this._dealGaugeLabels();var F=t.layout||a.HORIZONTAL_LAYOUT;this._fixCenterAndSize(F)},_getDefaultBands:function(t,e){var a=n.queryList(t,"color"),r=[];if(a)r.push({from:e[0],to:e[1],color:a});else for(var o=e[0],s=e[1],l=i.accDiv(s-o,3),h=this.option.colors,c=0;3>c;c++)r.push({from:o+c*l,to:2==c?s:o+(c+1)*l,color:h[c]});return r},_calculateGaugePercentage:function(t,e){var a=this.vanchart.yAxis(e.yAxis),i=a.scale.domain();t.forEach(function(t){t.percentage=(t.value-i[0])/(i[1]-i[0])})},_dealGaugeLabels:function(){var t=this;this.gaugeData.forEach(function(e){var r=e.style;if(r==a.GAUGE_POINTER||r==a.GAUGE_POINTER_SEMI){if(e.seriesLabelContent="",e.seriesLabelDim={width:0,height:0},e.seriesLabel&&e.seriesLabel.enabled){var n=e.seriesLabel.formatter,r=e.seriesLabel.style,o=e.seriesLabel.useHtml,s=t._calculateLabelContent(e.points[0],n,r,o),l=t._calculateTextDim(s);e.seriesLabelContent=s[0]?s[0].text:"",e.seriesLabelStyle=r,e.seriesLabelDim=l}}else if(e.percentageLabelContent="",e.percentageLabelDim={width:0,height:0},e.percentageLabel&&e.percentageLabel.enabled){var n=e.percentageLabel.formatter,h=i.clone(e.percentageLabel.style);h.color||(h.color=e.points[0].color);var o=e.percentageLabel.useHtml,s=t._calculateLabelContent(e.points[0],n,h,o),l=t._calculateTextDim(s);e.percentageLabelContent=s[0]?s[0].text:"",e.percentageLabelStyle=h,e.percentageLabelDim=l}e.valueLabelContent="",e.valueLabelDim={width:0,height:0},e.valueLabel&&e.valueLabel.enabled&&(e.valueLabelContent=t._fixValueLabelContent(e))})},_fixValueLabelContent:function(t){var e=t.valueLabel,r=e.style,n=e.useHtml,o=e.formatter,s=[];if(t.style==a.GAUGE_POINTER||t.style==a.GAUGE_POINTER_SEMI||t.style==a.GAUGE_RING||t.style==a.GAUGE_THERMOMETER)for(var l=0,h=t.points.length;h>l;l++){var c=t.points[l],d=this._calculateSingleLineLabelContent(o,c),u=i.getTextDimension(d,r,n);s.push({labelContent:d,labelDim:u,labelStyle:r})}else for(var d=this._createMultiLineLabelContent(o,t.points[0]),g=e.style,l=0,h=d.length;h>l;l++)s.push({labelContent:d[l],labelStyle:g,labelDim:i.getTextDimension(d[l],g,n)});return s},orderDataIncrease:function(){this.gaugeData.sort(function(t,e){var a=t.totalValue,i=e.totalValue;return i>a?-1:a>i?1:0}),this._layoutAfterSort()},orderDataDecrease:function(){this.gaugeData.sort(function(t,e){var a=t.totalValue,i=e.totalValue;return i>a?1:a>i?-1:0}),this._layoutAfterSort()},_layoutAfterSort:function(){var t=this.option.plotOptions;this.gaugeData.forEach(function(e){var a=e.sery;e.radius=n.queryList([a,t],"radius")});var e=t.layout||a.HORIZONTAL_LAYOUT;this._fixCenterAndSize(e)},_fixCenterAndSize:function(t){for(var e=0,i=this.gaugeData.length;i>e;e++){var r=this.gaugeData[e];if(r.center){var n=r.center[0],o=r.center[1];-1!=n.indexOf("%")&&(n=this._getPercentValue(n,this.vanchart.chartWidth())),-1!=o.indexOf("%")&&(o=this._getPercentValue(o,this.vanchart.chartHeight())),r.centerX=n,r.centerY=o,r.radius=r.radius||s}}t==a.HORIZONTAL_LAYOUT?this._dealHorizontalLayout():this._dealVerticalLayout();var l=this;this.gaugeData.forEach(function(t){if(!t.center){var e=t.style;switch(e){case a.GAUGE_POINTER:l._fixPointerCenter(t);break;case a.GAUGE_POINTER_SEMI:l._fixPointerSemiCenter(t);break;case a.GAUGE_SLOT:l._fixSlotCenter(t);break;case a.GAUGE_THERMOMETER:l._fixThermometerCenter(t);break;case a.GAUGE_RING:l._fixRingCenter(t)}}})},_fixPointerCenter:function(t){var e=t.bounds,r=20+t.seriesLabelDim.height,n=e.height-r,o=t.seriesLabel.align||a.BOTTOM,s=e.x+e.width/2,h=e.y+e.height/2,c=Math.min(e.width,n)/2-l;if(o==a.BOTTOM){if(h+c+r>e.y+e.height){var d=e.height-(2*c+r);d>=0&&(h=e.y+c+d/2)}}else if(h-c-r<e.y){var d=e.height-(2*c+r);d>=0&&(h=e.y+c+r+d/2)}if(t.seriesLabelContent){var u=t.seriesLabelDim;t.seriesLabelPos={x:-u.width/2,y:o==a.BOTTOM?c+20:-c-20-u.height}}if(t.valueLabelContent){var g=t.yAxis,f=g.componentOption,p=g.scale.domain(),m=d3.scale.linear().domain(p).range([i.toRadian(-150),i.toRadian(150)]),v=i.getTextHeight(f.labelStyle),y=.16*c+v/2,_=.85*c,b=_*Math.cos(Math.PI/6)-2*v;this._dealValueLabelContent(t,c,m,y,b)}t.centerX=s,t.centerY=h,t.radius=c},_getPointerTickBoundsManager:function(t,e,a,i){var r=new o,n=.84*e,s=t.getTickData(),l=.5*i,h=this;s.forEach(function(t){var e=h._getPointerTickCenter(t,n,a);r.addBounds({x:e.x-t.tickDim.width/2-l,y:e.y-t.tickDim.height/2-l,width:t.tickDim.width+l,height:t.tickDim.height+l})});var c=t.getMinorTickData(),d=.85*e,u=.1*e;return c.forEach(function(t){var e,i,n=a(t),o=h._getArcPoint(d,n);n<Math.PI?(e=o[0],i=o[1]):(e=o[0]-u,i=o[1]),r.addBounds({x:e,y:i,width:u,height:u})}),r},_getPointerTickCenter:function(t,e,a){var i,r,n=a(t.tickValue),o=this._getArcPoint(e,n),s=o[0],l=o[1],h=t.tickDim,c=Math.atan(h.width/h.height);if(Math.abs(n)<c){var d=h.height/2;i=s+d*s/l,r=l+d}else if(n>=c&&n<=Math.PI-c){var d=h.width/2;i=s-d,r=l-d*l/s}else if(n>=c-Math.PI&&-c>=n){var d=h.width/2;i=s+d,r=l+d*l/s}else{var d=h.height/2;i=s-d*s/l,r=l-d}return{x:i,y:r}},_fixPointerSemiCenter:function(t){var e=t.bounds,r=20+t.seriesLabelDim.height,n=t.seriesLabel.align,o=e.height-r,s=Math.min(e.width/2,o/1.14)-l,h=e.x+e.width/2,c=e.y+e.height/2+s/2;if(n==a.BOTTOM){if(c+.14*s+r>e.y+e.height){var d=e.height-(1.14*s+r);d>=0&&(c=e.y+s+d/2)}}else if(c-s-r<e.y){var d=e.height-(1.14*s+r);d>=0&&(c=e.y+s+r+d/2)}if(t.seriesLabelContent){var u=t.seriesLabelDim;t.seriesLabelPos={x:-u.width/2,y:n==a.BOTTOM?.14*s+20:-s-20-u.height}}if(t.valueLabelContent){var g=t.yAxis,f=g.componentOption,p=g.scale.domain(),m=d3.scale.linear().domain(p).range([i.toRadian(-90),i.toRadian(90)]),v=i.getTextHeight(f.labelStyle),y=.85*s,_=-(y-2*v),b=-(.11*s+v/2);this._dealValueLabelContent(t,s,m,_,b)}t.centerX=h,t.centerY=c,t.radius=s},_dealValueLabelContent:function(t,e,a,r,n){var o=t.yAxis,s=o.componentOption,l=i.getTextHeight(s.labelStyle),h=t.valueLabel.style,c=t.valueLabel.useHtml,d=i.getTextHeight(h),u=this._getPointerTickBoundsManager(o,e,a,l),g=t.valueLabelContent.length,p=n-r;g=Math.min(Math.floor((p-d/2)/(3*d/2)),g),g=Math.max(0,g),t.valueLabelContent.length=g;var p=d*g+(g-1)*d/2;r=(n-r-p)/2+r;for(var m=r-d/2,v=Number.MAX_VALUE,y=0;g>y;y++){for(var _=t.valueLabelContent[y],b=-_.labelDim.width/2,x=Math.min(b-d/4,v),L={x:x,y:m,width:2*Math.abs(x),height:r+d*(1+f)-m},C=_.labelContent,T=!1;u.isOverlapped(L)&&C.length;){C=C.substr(0,Math.floor(.9*C.length));var A=i.getTextDimension(C+"...",h,c);b=-A.width/2,x=Math.min(b-d/4,v),L={x:x,y:m,width:2*Math.abs(x),height:r+d*(1+f)-m},T=!0}T&&(_.labelContent=C+"...",_.labelDim=i.getTextDimension(_.labelContent,h,c),b=-_.labelDim.width/2,x=Math.min(b-d/4,v)),_.labelPos={x:b,y:r},r+=d*(1+f),v=x}t.valueLabelBackground={x:v,y:m,width:2*Math.abs(v),height:p+d}},_fixSlotCenter:function(t){var e=t.bounds,a=Math.min(e.width/2,e.height/2);a=a/1.08-l;var r=e.x+e.width/2,n=e.y+e.height/2;if(t.percentageLabelContent&&t.valueLabelContent){t.percentageLabelPos={x:-t.percentageLabelDim.width/2,y:-t.percentageLabelDim.height*(1+f)};for(var o=0,s=0,h=t.valueLabelContent.length;h>s;s++){var c=t.valueLabelContent[s];c.labelPos={x:-c.labelDim.width/2,y:o},o+=c.labelDim.height*(1+f)}}else if(t.percentageLabelContent)t.percentageLabelPos={x:-t.percentageLabelDim.width/2,y:-t.percentageLabelDim.height/2};else if(t.valueLabelContent)for(var d=i.getTextHeight(t.valueLabel.style),u=t.valueLabelContent.length,g=d*u+d*(u-1)/2,o=-g/2,s=0;u>s;s++){var c=t.valueLabelContent[s];c.labelPos={x:-c.labelDim.width/2,y:o},o+=d*(1+f)}t.centerX=r,t.centerY=n,t.radius=a},_fixThermometerCenter:function(t){var e=t.thermometerLayout==a.HORIZONTAL_LAYOUT?this._fixHorizontalThermometerCenter(t):this._fixVerticalThermometerCenter(t),i=e.centerX,r=e.centerY,n=e.radius,o=t.valueLabelContent?t.valueLabelContent[0]:null;if(t.percentageLabelContent&&(t.percentageLabelPos.x-=i,t.percentageLabelPos.y-=r,t.percentageLabelPos.y=Math.min(t.percentageLabelPos.y,n-t.percentageLabelDim.height)),o){o.labelPos.x-=i,o.labelPos.y-=r;var s=n-o.labelDim.height-o.labelPos.y;0>s&&(o.labelPos.y+=s,t.percentageLabelContent&&(t.percentageLabelPos.y+=s))}t.centerX=i,t.centerY=r,t.radius=n},_fixHorizontalThermometerCenter:function(t){var e,i,r,n=t.bounds,o=t.percentageLabel,s=t.valueLabel,g=t.yAxis,p=t.valueLabelContent?t.valueLabelContent[0]:null,m=this._getThermometerSize(t);e=n.x+n.width/2,r=n.width/2-g.getMaxTickWidth()-l;var v=n.y+(n.height-m)/2;return(t.percentageLabelContent||p)&&(t.percentageLabelContent&&p&&o.align==a.TOP&&s.align==a.TOP?(t.percentageLabelPos={x:-t.percentageLabelDim.width/2+e,y:v},v+=t.percentageLabelDim.height*(1+f),p.labelPos={x:-p.labelDim.width/2+e,y:v},v+=p.labelDim.height*(1+u)):(t.percentageLabelContent&&o.align==a.TOP&&(t.percentageLabelPos={x:-t.percentageLabelDim.width/2+e,y:v},v+=t.percentageLabelDim.height*(1+u)),p&&s.align==a.TOP&&(p.labelPos={x:-p.labelDim.width/2+e,y:v},v+=p.labelDim.height*(1+u)))),v+=g.getTickHeight()+c+h+c+2*d,i=v-5,(t.percentageLabelContent||p)&&(t.percentageLabelContent&&p&&o.align==a.BOTTOM&&s.align==a.BOTTOM?(v+=t.percentageLabelDim.height*u,t.percentageLabelPos={x:-t.percentageLabelDim.width/2+e,y:v},v+=t.percentageLabelDim.height*(1+f),p.labelPos={x:-p.labelDim.width/2+e,y:v}):(t.percentageLabelContent&&o.align==a.BOTTOM&&(v+=t.percentageLabelDim.height*u,t.percentageLabelPos={x:-t.percentageLabelDim.width/2+e,y:v}),p&&s.align==a.BOTTOM&&(v+=p.labelDim.height*u,p.labelPos={x:-p.labelDim.width/2+e,y:v}))),{centerX:e,centerY:i,radius:r}},_fixVerticalThermometerCenter:function(t){var e,i,r,n=t.bounds,o=t.percentageLabel,s=t.valueLabel,u=t.yAxis,g=t.points[0],p=u.scale.domain(),m=t.valueLabelContent?t.valueLabelContent[0]:null,v=this._getThermometerSize(t),y=n.x+(n.width-v)/2;i=n.y+n.height/2,r=n.height/2-u.getTickHeight()-l;var _=d3.scale.linear().domain(p).range([r,-r]),b=i+_(g.valueInDomain);return(t.percentageLabelContent||m)&&(t.percentageLabelContent&&m&&o.align==a.LEFT&&s.align==a.LEFT?(y+=Math.max(t.percentageLabelDim.width,m.labelDim.width),t.percentageLabelPos={x:y-t.percentageLabelDim.width,y:b},m.labelPos={x:y-m.labelDim.width,y:b+t.percentageLabelDim.height*(1+f)},y+=f*Math.max(t.percentageLabelDim.height,m.labelDim.height)):(t.percentageLabelContent&&o.align==a.LEFT&&(t.percentageLabelPos={x:y,y:b},y+=t.percentageLabelDim.width+f*t.percentageLabelDim.height),m&&s.align==a.LEFT&&(m.labelPos={x:y,y:b},y+=m.labelDim.width+f*m.labelDim.height))),e=y+d,y+=2*d+c+h+c+u.getMaxTickWidth(),(t.percentageLabelContent||m)&&(t.percentageLabelContent&&m&&o.align==a.RIGHT&&s.align==a.RIGHT?(y+=f*Math.max(t.percentageLabelDim.height,m.labelDim.height),t.percentageLabelPos={x:y,y:b},m.labelPos={x:y,y:b+t.percentageLabelDim.height*(1+f)}):(t.percentageLabelContent&&o.align==a.RIGHT&&(t.percentageLabelPos={x:y+f*t.percentageLabelDim.height,y:b}),m&&s.align==a.RIGHT&&(m.labelPos={x:y+f*m.labelDim.height,y:b}))),{centerX:e,centerY:i,radius:r}},_fixRingCenter:function(t){var e=t.bounds,a=Math.min(e.width/2,e.height/2)-l,i=e.x+e.width/2,r=e.y+e.height/2,n=0,o=t.valueLabelContent?t.valueLabelContent[0]:null;t.percentageLabelContent&&o?n=t.percentageLabelDim.height*(1+f)+o.labelDim.height:t.percentageLabelContent?n=t.percentageLabelDim.height:o&&(n=o.labelDim.height);var s=-n/2;t.percentageLabelContent&&(t.percentageLabelPos={x:-t.percentageLabelDim.width/2,y:s},s+=t.percentageLabelDim.height*(1+f)),o&&(o.labelPos={x:-o.labelDim.width/2,y:s}),t.centerX=i,t.centerY=r,t.radius=a},_dealHorizontalLayout:function(){var t=!0,e=0,i=0;if(this.gaugeData.forEach(function(r){r.center||(r.style!=a.GAUGE_THERMOMETER||r.thermometerLayout==a.HORIZONTAL_LAYOUT)&&(r.radius?(e+=2*r.radius,i++):t=!1)}),!t){var r=this;this.gaugeData.forEach(function(t){t.center||t.style!=a.GAUGE_THERMOMETER||t.thermometerLayout!=a.VERTICAL_LAYOUT||(e+=r._getThermometerSize(t),i++)})}var n=this.vanchart.getPlotBounds(),o=n.width/Math.max(1,this.gaugeData.length-i);o/=2;for(var s={x:0,y:0,width:n.width,height:n.height},l=0,h=this.gaugeData.length;h>l;l++){var c=this.gaugeData[l];if(!c.center){var d=0;if(c.style==a.GAUGE_THERMOMETER)if(c.thermometerLayout==a.HORIZONTAL_LAYOUT)d=2*(c.radius||o),c.bounds={x:s.x,y:s.y,width:d,height:s.height},s.x+=d,s.width-=d;else{d=t?2*o:this._getThermometerSize(c);var u=c.radius?2*c.radius:s.height;u=Math.min(u,s.height),c.bounds={x:s.x,y:s.y,width:d,height:u},s.x+=d,s.width-=d}else d=2*(c.radius||o),c.bounds={x:s.x,y:s.y,width:d,height:s.height},s.x+=d,s.width-=d}}},_dealVerticalLayout:function(){var t=!0,e=0,i=0;if(this.gaugeData.forEach(function(r){r.center||(r.style!=a.GAUGE_THERMOMETER||r.thermometerLayout==a.VERTICAL_LAYOUT)&&(r.radius?(e+=2*r.radius,i++):t=!1)}),!t){var r=this;this.gaugeData.forEach(function(t){t.center||t.style!=a.GAUGE_THERMOMETER||t.thermometerLayout!=a.HORIZONTAL_LAYOUT||(e+=r._getThermometerSize(t),i++)})}var n=this.vanchart.getPlotBounds(),o=n.height/Math.max(1,this.gaugeData.length-i);o/=2;for(var s={x:0,y:0,width:n.width,height:n.height},l=0,h=this.gaugeData.length;h>l;l++){var c=this.gaugeData[l];if(!c.center){var d=0;if(c.style==a.GAUGE_THERMOMETER)if(c.thermometerLayout==a.VERTICAL_LAYOUT)d=2*(c.radius||o),c.bounds={x:s.x,y:s.y,width:s.width,height:d},s.y+=d,s.height-=d;else{d=t?2*o:this._getThermometerSize(c);var u=c.radius?2*c.radius:s.width;u=Math.min(u,s.width),c.bounds={x:s.x,y:s.y,width:u,height:d},s.y+=d,s.height-=d}else d=2*(c.radius||o),c.bounds={x:s.x,y:s.y,width:s.width,height:d},s.y+=d,s.height-=d}}},_getThermometerSize:function(t){var e=t.valueLabelContent?t.valueLabelContent[0]:null,i=t.percentageLabel,r=t.valueLabel,n=t.yAxis;if(t.thermometerLayout==a.HORIZONTAL_LAYOUT){var o=0;return t.percentageLabelContent&&e?i.align==r.align&&(o+=t.percentageLabelDim.height+e.labelDim.height,o+=f*t.percentageLabelDim.height,o+=u*(r.align==a.TOP?e.labelDim.height:t.percentageLabelDim.height)):t.percentageLabelContent?o+=(1+u)*t.percentageLabelDim.height:e&&(o+=(1+u)*e.labelDim.height),o+=2*d+c+h+c+n.getTickHeight()}var s=0;return t.percentageLabelContent&&e?i.align==r.align?(s+=Math.max(t.percentageLabelDim.width,e.labelDim.width),s+=g*Math.max(t.percentageLabelDim.height,e.labelDim.height)):(s+=t.percentageLabelDim.width+e.labelDim.width,s+=g*(t.percentageLabelDim.height+e.labelDim.height)):t.percentageLabelContent?s+=t.percentageLabelDim.width+g*t.percentageLabelDim.height:e&&(s+=e.labelDim.width+g*e.labelDim.height),s+=n.getMaxTickWidth(),s+=2*d+c+h+c},_getFixedPos:function(t,e){var i=t.gauge||t,r=i.style,n=i.thermometerLayout,o=this.getPlotBounds();switch(r){case a.GAUGE_POINTER:case a.GAUGE_SLOT:case a.GAUGE_RING:var s=o.x+i.centerX+i.radius+10,l=o.y+i.centerY-e.height/2;return[s,l];case a.GAUGE_POINTER_SEMI:var s=o.x+i.centerX-e.width/2,l=o.y+i.centerY+.14*i.radius+10;return[s,l];case a.GAUGE_THERMOMETER:var s,l;if(n==a.HORIZONTAL_LAYOUT){s=o.x+i.centerX-e.width/2;var u=o.y+i.centerY;if(l=u+d+10,i.percentageLabelContent&&i.percentageLabel.align==a.BOTTOM&&(l=u+i.percentageLabelPos.y+i.percentageLabelDim.height+10),i.valueLabelContent&&i.valueLabel.align==a.BOTTOM){var g=i.valueLabelContent[0];l=u+g.labelPos.y+g.labelDim.height+10}}else{l=o.y+i.centerY-e.height/2;var f=i.yAxis.getMaxTickWidth(),p=o.x+i.centerX;if(s=p+d+c+h+c+f+10,i.percentageLabelContent&&i.percentageLabel.align==a.RIGHT&&(s=p+i.percentageLabelPos.x+i.percentageLabelDim.width+10),i.valueLabelContent&&i.valueLabel.align==a.RIGHT){var g=i.valueLabelContent[0];s=Math.max(s,p+g.labelPos.x+g.labelDim.width+10)}}return[s,l]}},getGaugeData:function(){return this.gaugeData}},i.inherit(e,r),t("../ChartLibrary").register(a.GAUGE_CHART,e),e}),a("render/RadarSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/LabelDivManager","../utils/ColorUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.divManager=new r(t.getParentDom()),this.radar=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../utils/LabelDivManager"),n=(t("../utils/ColorUtils"),t("../Constants")),o="category-axis-tick-text",s="value-axis-tick-text",l="axis-grid-line",h="plot-bands",c="plot-lines",d="value-axis-line",u="category-axis-line",g="radar-series",f="series-stroke",p="series-fill",m="radar-column",v=500,y="back-out",_=500,b="exp-out",x=2;e.prototype={constructor:e,render:function(){var t=this.radar.getVanchartRender().getRenderRoot();this._bodyG||(this._bodyG=t.append("g"),this._axisG=this._bodyG.append("g"),this._bodyG.append("defs").append("clipPath").attr("id",this._getRadarClipID()).append("path")),this._updateTransform(),this._drawRadarSeries(),this._drawRadarAxis(this._axisG),this.updateEventHandler(v)},_updateTransform:function(){var t=this.radar.getRadarCenter(),e=this.radar.valueScale.domain()[1];this._bodyG.select("defs").select("clipPath").select("path").attr("d",this.radar._getGridPath(e)),this._bodyG.attr("transform",i.makeTranslate(t))},_drawRadarSeries:function(){var t=this.radar.getRadarData(),e=this._bodyG.selectAll("."+g).data(t,function(t){return t.seriesID});this._deleteRadarSeries(e),this._updateRadarSeries(e),this._createRadarSeries(e),this._drawLabel(this.radar.isSupportAnimation()?v:0)},_deleteRadarSeries:function(t){var e=t.exit();this.radar.isColumnType()?this._deleteColumnTypeSeries(e):this._deletePolygonTypeSeries(e)},_deleteColumnTypeSeries:function(t){var e=this.radar.isSupportAnimation()?_:0,a=this;t.each(function(t){var i=d3.select(this);i.selectAll("path."+m).transition().duration(e).ease(b).attrTween("d",function(t){var e=d3.interpolate(t.y,t.y0);return function(i){return a.radar._getRadarColumnPath(t.y0,e(i),t.radian)}}).each("end",function(){d3.select(this).remove()})})},_deletePolygonTypeSeries:function(t){var e=this,a=this._getMarkerClass(),r=this.radar.isSupportAnimation()?_:0;t.each(function(){var t=d3.select(this);t.select("path."+f).transition().duration(r).ease(b).attrTween("d",function(t){var a=e.radar._getInitPathSegment(t.pathSegment),i=d3.interpolateArray(t.pathSegment,a);return function(a){return e.radar._getRadarSeriesStrokePath(i(a),t.connectNulls)}}).each("end",function(){d3.select(this).remove()}),t.select("path."+p).transition().duration(r).ease(b).attrTween("d",function(t){var a=e.radar._getInitPathSegment(t.pathSegment),i=d3.interpolateArray(t.pathSegment,a);return function(a){return e.radar._getRadarSeriesFillPath(i(a),t.connectNulls)}}).each("end",function(){d3.select(this).remove()}),t.selectAll("g."+a).transition().duration(r).ease(b).attr("transform",function(){return i.makeTranslate([0,0])+"scale(0)"}).each("end",function(){d3.select(this).remove()})})},_updateRadarSeries:function(t){this.radar.isColumnType()?this._updateColumnTypeSeries(t):this._updatePolygonTypeSeries(t)},_updateColumnTypeSeries:function(t){var e=this;t.each(function(t){var a=d3.select(this).selectAll("path."+m).data(t.points);a.exit().remove(),a.call(e._createColumn.bind(e)),a.each(function(t){d3.select(this).transition().duration(_).ease(b).attrTween("d",function(t){var a=i.pick(this._innerRadius_,t.y0),r=i.pick(this._outerRadius_,t.y),n=d3.interpolate(a,t.y0),o=d3.interpolate(r,t.y);return this._innerRadius_=t.y0,this._outerRadius_=t.y,function(a){var i=n(a),r=o(a);return e.radar._getRadarColumnPath(i,r,t.radian)}})})})},_updatePolygonTypeSeries:function(t){var e=this,a=this._getMarkerClass(),r=this.radar.isSupportAnimation()?v:0;t.each(function(t){var n=d3.select(this);n.select("path."+f).empty()?e._createPolygonStroke(n,t):n.select("path."+f).transition().duration(r).ease(y).attrTween("d",function(t){var a=!!this._pathSegment_;if(a&&this._pathSegment_.length==t.pathSegment.length)for(var i=this._pathSegment_,r=0,n=i.length;n>r&&a;r++)i[r].length!=t.pathSegment[r].length&&(a=!1);var o=a?this._pathSegment_:e.radar._getInitPathSegment(t.pathSegment),s=d3.interpolateArray(o,t.pathSegment);return this._pathSegment_=t.pathSegment,function(a){return e.radar._getRadarSeriesStrokePath(s(a),t.connectNulls)}}),n.select("path."+p).empty()?e._createPolygonFill(n,t):n.select("path."+p).transition().duration(r).ease(y).attrTween("d",function(t){var a=this._pathSegment_?this._pathSegment_:e.radar._getInitPathSegment(t.pathSegment),i=d3.interpolateArray(a,t.pathSegment);return this._pathSegment_=t.pathSegment,function(a){return e.radar._getRadarSeriesFillPath(i(a),t.connectNulls)}});var o=n.selectAll("g."+a).data(function(t){return t.points});o.exit().remove(),o.call(e._createSvgMarker.bind(e)),o.transition().duration(r).ease(y).attr("transform",function(t){return i.makeTranslate(t.pos)})})},_createRadarSeries:function(t){var e=t.enter().append("g").attr("class",function(t){return t.seriesID+" "+g}).attr("clip-path","url(#"+this._getRadarClipID()+")");t.sort(function(t,e){return e.seriesIndex-t.seriesIndex}),this.radar.isColumnType()?this._createColumnTypeSeries(e):this._createPolygonTypeSeries(e)},_createColumnTypeSeries:function(t){var e=this;t.each(function(t){d3.select(this).selectAll("path."+m).data(t.points).call(e._createColumn.bind(e)).transition().duration(e.radar.isSupportAnimation()?v:0).ease(y).attrTween("d",function(t){var a=e.radar.getInitRadius(),i=d3.interpolate(a,t.y);return this._innerRadius_=t.y0,this._outerRadius_=t.y,function(r){return e.radar._getRadarColumnPath(a,i(r),t.radian)}}).each("end",function(t){d3.select(this).attr("d",e.radar._getRadarColumnPath(t.y0,t.y,t.radian))})})},_createPolygonStroke:function(t,e){var a=this,i=this.radar.isSupportAnimation(),r=i?1:0,n=e.delay*r;t.append("path").attr("class",f).style({fill:"none",stroke:e.lineColor,"stroke-width":e.lineWidth}).on("mouseenter",function(t){a._updateChosenSeries(t)}).transition().delay(n).duration(v*r).ease(y).attrTween("d",function(t){var e=a.radar._getInitPathSegment(t.pathSegment),i=d3.interpolateArray(e,t.pathSegment);return this._pathSegment_=t.pathSegment,function(e){return a.radar._getRadarSeriesStrokePath(i(e),t.connectNulls)}})},_createPolygonFill:function(t,e){var a=this,i=this.radar.isSupportAnimation(),r=i?1:0,n=e.delay*r;e.fillColor&&e.fillColorOpacity&&t.append("path").attr("class",p).style({fill:e.fillColor,"fill-opacity":e.fillColor?e.fillColorOpacity:0}).on("mouseenter",function(t){a._updateChosenSeries(t)}).transition().delay(n).duration(v*r).ease(y).attrTween("d",function(t){var e=a.radar._getInitPathSegment(t.pathSegment),i=d3.interpolateArray(e,t.pathSegment);return this._pathSegment_=t.pathSegment,function(e){return a.radar._getRadarSeriesFillPath(i(e),t.connectNulls)}})},_createPolygonTypeSeries:function(t){var e=this,a=this._getMarkerClass(),r=this.radar.isSupportAnimation(),n=r?1:0;t.each(function(t){var r=t.delay*n,o=d3.select(this);e._createPolygonStroke(o,t),e._createPolygonFill(o,t),o.selectAll("g."+a).data(t.points).call(e._createSvgMarker.bind(e)).attr("transform",function(){return i.makeTranslate([0,0])+"scale(0)"}).transition().delay(r).duration(v*n).ease(y).attr("transform",function(t){return i.makeTranslate(t.pos)+"scale(1)"})})},_createColumn:function(t){t.enter().append("path").attr("class",function(t){return m+" "+t.dataID}).style("fill",function(t){return t.color}).style("fill-opacity",function(t){return t.fillColorOpacity}).style("stroke",function(t){return t.borderColor}).style("stroke-width",function(t){return t.borderWidth})},_drawLabel:function(t){var e=this.radar.getRadarData(),a=[];e.forEach(function(t){a=a.concat(t.points)});var i=this.radar.getRadarCenter();this._labelG||(this._labelG=this._bodyG.append("g")),this._drawSvgDataLabels(this._labelG,a,i[0],i[1],t)},_drawRadarAxis:function(t){this.radar.getRadarData().length&&(this._drawPlotBands(t),this._drawPlotLines(t),this._drawGridLine(t),this._drawAxisLine(t),this._drawTickLabel(t))},_drawPlotBands:function(t){var e=this.radar.getRadarPlotBands();t.each(function(){var t=d3.select(this).selectAll("path."+h).data(e);t.exit().remove(),t.enter().append("path").attr("class",h),d3.transition(t).attr("d",function(t){return t.path}).style("fill",function(t){return t.color})})},_drawPlotLines:function(t){var e=this.radar.getRadarPlotLines(),a=this;t.each(function(){var t=d3.select(this).selectAll("."+c).data(e);t.exit().remove();var r=t.enter().append("g").attr("class",c);r.append("path"),r.append("text"),d3.transition(t.select("path")).attr("d",function(t){return a.radar._getGridPath(t.value)}).style("fill","none").style("stroke",function(t){return t.color}).style("stroke-width",function(t){return t.width}).style("stroke-dasharray",function(t){return t.dataArray}),d3.transition(t.select("text")).text(function(t){return t.text}).attr("y",function(t){return t.baseY}).attr("text-anchor",function(t){return t.textAnchor}).each(function(t){d3.select(this).call(i.setTextStyle,t.style)})})},_drawGridLine:function(t){var e=this.radar.getValueAxis(),a=e.componentOption,r=e.getTickData(),n=a.gridLineColor,o=a.gridLineWidth,s=this.radar.valueScale.domain()[1],h=this.radar.valueAxis.getStartPosValue(),c=this;t.each(function(){var t=d3.select(this).selectAll("path."+l).data(r,function(t){return t.tickValue});if(o){var e=d3.transition(t.exit()).style("opacity",0).remove();e.attrTween&&e.attrTween("d",function(t){var e=this._current_;this._current_=c.radar._getGridData(s),e=i.hasDefined(e)?e:this._current_;var a=i.isArray(e)?d3.interpolateArray(e,this._current_):d3.interpolate(e,this._current_);return function(t){return c.radar._getGridPathByData(a(t))}}),t.enter().append("path").attr("class",l),t.style({fill:"none",stroke:n,"stroke-width":o});var a=d3.transition(t);a.attrTween?a.attrTween("d",function(t){var e=this._current_;this._current_=c.radar._getGridData(t.tickValue),e=i.hasDefined(e)?e:c.radar._getGridData(h);var a=i.isArray(e)?d3.interpolateArray(e,this._current_):d3.interpolate(e,this._current_);return function(t){return c.radar._getGridPathByData(a(t))}}):a.attr("d",function(t){return this._current_=c.radar._getGridData(t.tickValue),c.radar._getGridPathByData(this._current_)})}else t.remove()})},_drawAxisLine:function(t){var e=this.radar.getValueAxis(),a=e.componentOption,i=a.lineWidth,r=a.lineColor,n=this.radar.getAxisLineData();t.each(function(){var t=d3.select(this).selectAll("line."+d).data(n);i?(t.exit().remove(),t.enter().append("line").attr("class",d),d3.transition(t).attr("x2",function(t){return t[0]}).attr("y2",function(t){return t[1]}).style({stroke:r,"stroke-width":i})):t.remove()});var o=this.radar.getBaseAxis(),s=o.componentOption.lineWidth,l=o.componentOption.lineColor,h=e.scale.domain()[1],c=this;t.each(function(){var t=d3.select(this).selectAll("path."+u).data([0]);s?(t.enter().append("path").attr("class",u),d3.transition(t).attr("d",function(){return c.radar._getGridPath(h)}).style({fill:"none",stroke:l,"stroke-width":s})):t.remove()})},_drawValueTickLabel:function(t){var e=this.radar.getValueAxis(),a=e.componentOption,r=i.clone(e.getTickData());r.length=Math.max(r.length-1,0);var n=a.labelStyle,o=a.labelRotation,l=a.useHtml,h=this.radar.valueScale;if(l&&!o)for(var c=this.radar.getRadarCenter(),d=0,u=r.length;u>d;d++){var g=r[d],f=-g.tickDim.width-x+c[0],p=-h(g.tickValue)-g.tickDim.height+c[1];this.divManager.addLabel(g.tickContent,{x:f,y:p},n)}else t.each(function(){var t=d3.select(this).selectAll("text."+s).data(r,function(t){return t.tickValue});a.showLabel?(t.exit().remove(),t.enter().append("text").attr("class",s).attr("x",-x).attr("transform",function(t){var e=-h(t.tickValue);return"rotate("+o+" 0,"+e+")"}),t.call(i.setTextStyle,n),d3.transition(t).text(function(t){return t.tickContent}).attr("y",function(t){return-h(t.tickValue)}).style("text-anchor","end")):t.remove()})},_drawCategoryTickLabel:function(t){var e=this.radar.getBaseAxis(),a=e.componentOption,r=a.labelStyle,n=a.labelRotation||0,s=a.useHtml,l=this.radar.categoryLabel,h=i.getTextHeight(r);if(s&&!n)for(var c=this.radar.getRadarCenter(),d=0,u=l.length;u>d;d++){var g=l[d],f=g.tickPos.x+c[0],p=g.tickPos.y+c[1];this.divManager.addLabel(g.tickContent,{x:f,y:p},r)}else t.each(function(){var t=d3.select(this).selectAll("text."+o).data(l,function(t){return t.tickValue});a.showLabel?(t.exit().remove(),t.enter().append("text").attr("class",o).call(i.setTextStyle,r),t.selectAll("tspan").remove(),t.each(function(t){var e=t.tickContent;if(i.isArray(e)){for(var a=t.tickPos.x<0?t.tickDim.width:0,o=t.tickPos.x<0?"end":"start",l=0,c=e.length;c>l;l++)0==l?d3.select(this).append("tspan").text(e[l]).attr("x",a+t.tickPos.x).attr("y",.85*h+t.tickPos.y).attr("text-anchor",o):d3.select(this).append("tspan").text(e[l]).attr("x",a+t.tickPos.x).attr("y",.85*h+1.3*l*h+t.tickPos.y).attr("text-anchor",o);if(n){var d=t.tickPos.x+t.tickDim.width/2,u=t.tickPos.y+t.tickDim.height/2;d3.select(this).attr("transform","rotate("+n+" "+d+","+u+")")}}else{var d=t.tickPos.x+t.tickDim.width/2,u=t.tickPos.y+t.tickDim.height/2,g=i.getTextDimension(e,r,s);d3.select(this).text(e).attr("x",d-g.width/2).attr("y",u-g.height/2).attr("text-anchor","start").attr("dy",".85em").attr("transform","rotate("+n+" "+d+","+u+")")}})):t.remove()})},_drawTickLabel:function(t){this.divManager.clearAllLabels(),this._drawValueTickLabel(t),this._drawCategoryTickLabel(t)},_makeChosenStateWithData:function(t){t&&this._makeMarkerChosenState(this._bodyG.select("g."+t.seriesID),t)},_cancelChosenStateWithData:function(t){t&&this._cancelMarkerChosenState(this._bodyG.select("g."+t.seriesID),t)},_toTop:function(t){var e=this._bodyG.select("g."+t.seriesID);e.empty()||i.toFront(e.node())},makeChosenState:function(t){t.columnType&&t.elWrapper?t.elWrapper.style("stroke",t.highlight).style("fill",t.mouseOverColor?t.mouseOverColor:t.color).style("stroke-width",t.borderWidth).style("stroke-opacity",.35).interrupt().transition().duration(100).ease("ease-out-in").style("stroke-width",6):this._updateChosenSeries(t)},cancelChosenState:function(t){t.columnType&&t.elWrapper&&t.elWrapper.interrupt().transition().style("fill",t.color).style("stroke",t.borderColor).style("stroke-opacity",1).style("stroke-width",t.borderWidth)},monitorRender:function(){this.dataChangeRender()},dataChangeRender:function(){this.removeEventHandler(),this._updateTransform(),this._drawRadarSeries();var t=this.radar.isSupportAnimation()?300:0;this._axisG.transition().ease("linear").duration(t).call(this._drawRadarAxis.bind(this)),this.updateEventHandler(v)},addEventHandler:function(){var t=this;this.radar.isColumnType()&&this._bodyG.selectAll("."+g).each(function(){d3.select(this).selectAll("path."+m).call(t.addShapeEventHandler.bind(t))})},removeEventHandler:function(){var t=this;this.radar.isColumnType()&&this._bodyG.selectAll("."+g).each(function(){d3.select(this).selectAll("path."+m).call(t.removeShapeEventHandler.bind(t))})},_getRadarClipID:function(){return"radarClip"+this.radar.vanchart.getIDPrefix()},refreshInOrder:function(){this.dataChangeRender()},refreshRestore:function(){this.refreshInOrder()}},i.inherit(e,a),t("./RenderLibrary").register(n.RADAR_SVG,e)}),a("render/RadarVmlRender",["require","./BaseRender","../utils/BaseUtils","../utils/ColorUtils","../Constants","./RenderLibrary"],function(t){function e(t){a.call(this,t),this.radar=t}var a=t("./BaseRender"),i=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../Constants"),o=2;
    e.prototype={constructor:e,render:function(){var t=this.radar.getVanchartRender().getRenderRoot(),e=this.radar.getRadarCenter();this._bodySet=t.set(),this._axisSet=t.set(),this._lineSet={},this.markerMap={},this._drawRadarAxis(t,e),this._drawRadarSeries(t,e),this._drawDataLabels(t,e)},_drawDataLabels:function(t,e){var a=this.radar.getRadarData(),i=t.set();this._axisSet.push(i);for(var r=0,n=a.length;n>r;r++){var o=a[r].points;this._drawVmlDataLabels(t,i,o,e[0],e[1])}},_drawRadarSeries:function(t,e){for(var a=this.radar.getRadarData(),r=0,n=a.length;n>r;r++){var o=a[r],s=o.points,l=t.set();if(this._lineSet[o.seriesName]=l,this._bodySet.push(l),this.radar.isColumnType())for(var h=0,c=s.length;c>h;h++){var d=s[h],u=t.path(this.radar._getRadarColumnPath(d.y0,d.y,d.radian)).attr({fill:d.color,"fill-opacity":d.fillColorOpacity,stroke:d.borderColor,"stroke-width":d.borderWidth}).transform(i.makeTranslate(e));this.markerMap[d.dataID]=u,this.addShapeEventHandler(u,d),l.push(u)}else{var g=this,f=t.path(this.radar._getRadarSeriesStrokePath(o.pathSegment,o.connectNulls)).attr({fill:"none",stroke:o.lineColor,"stroke-width":o.lineWidth}).transform(i.makeTranslate(e)).mouseover(function(){g._updateChosenSeries(o)});l.push(f);var p=t.path(this.radar._getRadarSeriesFillPath(o.pathSegment,o.connectNulls)).attr({fill:o.fillColor,"fill-opacity":o.fillColor?o.fillColorOpacity:0,stroke:"none"}).transform(i.makeTranslate(e)).mouseover(function(){g._updateChosenSeries(o)});l.push(p);for(var h=0,c=s.length;c>h;h++){var m=s[h],v=m.pos,y=this._createVmlMarker(t,m,[e[0]+v[0],e[1]+v[1]]);this.markerMap[m.dataID]=y,l.push(y.marker)}}}},_drawRadarAxis:function(t,e){this._drawPlotBands(t,e),this._drawPlotLines(t,e),this._drawGridLine(t,e),this._drawAxisLine(t,e),this._drawTickLabel(t,e)},_drawPlotBands:function(t,e){var a=this.radar.getRadarPlotBands(),r=this._axisSet;a.forEach(function(a){r.push(t.path(a.path).attr({fill:a.color,stroke:"none"}).transform(i.makeTranslate(e)))})},_drawPlotLines:function(t,e){var a=this.radar.getRadarPlotLines(),r=this;a.forEach(function(a){if(r._axisSet.push(t.path(r.radar._getGridPath(a.value)).attr({fill:"none",stroke:a.color,"stroke-width":a.width,"stroke-dasharray":a.dataArray}).transform(i.makeTranslate(e))),a.text){var n=i.cssNormalization(a.style);t.text(0,a.baseY,a.text).attr(n).attr("text-anchor",a.textAnchor).transform(i.makeTranslate(e))}})},_drawGridLine:function(t,e){var a=this.radar.getValueAxis(),r=a.componentOption,n=a.getTickData(),o=r.gridLineColor,s=r.gridLineWidth,l=this;n.forEach(function(a){l._axisSet.push(t.path(l.radar._getGridPath(a.tickValue)).attr({fill:"none",stroke:o,"stroke-width":s}).transform(i.makeTranslate(e)))})},_drawAxisLine:function(t,e){var a=this.radar.getValueAxis(),r=a.componentOption,n=r.lineWidth,o=r.lineColor,s=this,l=this.radar.getAxisLineData();l.forEach(function(a){s._axisSet.push(t.path(s._getLinePath([0,0],a)).attr({fill:"none",stroke:o,"stroke-width":n}).transform(i.makeTranslate(e)))});var h=this.radar.getBaseAxis(),c=h.componentOption.lineWidth,d=h.componentOption.lineColor,u=a.scale.domain()[1];this._axisSet.push(t.path(this.radar._getGridPath(u)).attr({fill:"none",stroke:d,"stroke-width":c}).transform(i.makeTranslate(e)))},_drawTickLabel:function(t,e){this._drawValueTickLabel(t,e),this._drawCategoryTickLabel(t,e)},_drawValueTickLabel:function(t,e){var a=this.radar.getValueAxis(),r=a.componentOption,n=i.clone(a.getTickData());n.length=Math.max(n.length-1,0);var s=r.labelStyle,l=r.labelRotation||0,h=r.useHtml,c=this.radar.valueScale;if(h&&!l)for(var d=0,u=n.length;u>d;d++){var g=n[d],f=-g.tickDim.width-o+e[0],p=-c(g.tickValue)-g.tickDim.height+e[1];this.labelDivManager.addLabel(g.tickContent,{x:f,y:p},s)}else for(var d=0,m=n.length;m>d;d++){var g=n[d],v=i.getTextDimension(g.tickContent,s,h),f=e[0]-o-v.width/2,p=e[1]-c(g.tickValue)-v.height/2;this._axisSet.push(t.text(f,p,g.tickContent).attr(i.cssNormalization(s)).transform("r"+l))}},_drawCategoryTickLabel:function(t,e){var a=this.radar.getBaseAxis(),r=a.componentOption,n=r.labelStyle,o=r.labelRotation||0,s=r.useHtml,l=this.radar.categoryLabel,h=i.getTextHeight(n);if(s&&!o)for(var c=0,d=l.length;d>c;c++){var u=l[c],g=u.tickPos.x+e[0],f=u.tickPos.y+e[1];this.labelDivManager.addLabel(u.tickContent,{x:g,y:f},n)}else for(var c=0,p=l.length;p>c;c++){var u=l[c],m=u.tickContent;if(i.isArray(m))for(var v=e[0]+u.tickPos.x,y=e[0]+u.tickPos.x-u.tickDim.width,_=e[1]+u.tickPos.y+h/2,b=0,d=m.length;d>b;c++){var x=m[c],L=i.getTextDimension(x,n,s),f=_+1.5*c*h;u.tickPos+u.tickDim.width/2<0?this._axisSet.push(t.text(y-L.width/2,f,x).attr(i.cssNormalization(n)).transform("t"+o)):this._axisSet.push(t.text(v+L.width/2,f,x).attr(i.cssNormalization(n)).transform("t"+o))}else{var C=e[0]+u.tickPos.x+u.tickDim.width/2,T=e[1]+u.tickPos.y+u.tickDim.height/2;this._axisSet.push(t.text(C,T,m).attr(i.cssNormalization(n)).transform("r"+o))}}},getElementByData:function(t){return this.markerMap[t.dataID]},cancelChosenState:function(t){if(t.columnType){var e=this.getElementByData(t);e.attr({stroke:t.borderColor,fill:t.color,"stroke-width":t.borderWidth})}},makeChosenState:function(t){if(t.columnType){var e=this.getElementByData(t);e.attr({stroke:r.mixColorWithAlpha(t.highlight,.35),fill:t.mouseOverColor?t.mouseOverColor:t.color,"stroke-width":6})}else this._updateChosenSeries(t)},_makeChosenStateWithData:function(t){t&&this._makeVmlMarkerChosenState(t)},_cancelChosenStateWithData:function(t){t&&this._cancelVmlMarkerChosenState(t)},_removeAll:function(){this._bodySet.remove(),this._axisSet.remove(),this.labelDivManager.clearAllLabels()},refreshInOrder:function(){this.dataChangeRender()},dataChangeRender:function(){this.radar.getRadarData().length?(this._removeAll(),this.render()):this._bodySet.remove()}},i.inherit(e,a),t("./RenderLibrary").register(n.RADAR_VML,e)}),a("chart/Radar",["require","./BaseChart","../utils/BaseUtils","../Constants","../utils/QueryUtils","../utils/BoundsManager","../render/RadarSvgRender","../render/RadarVmlRender","../ChartLibrary"],function(t){function e(t,e,i){a.call(this,t,e,i),this.refresh(e)}var a=t("./BaseChart"),i=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/QueryUtils"),o=(t("../utils/BoundsManager"),200),s=10,l=8,h="class",c="radar-top",d="radar-bottom",u="radar-left",g="radar-right";return t("../render/RadarSvgRender"),t("../render/RadarVmlRender"),e.prototype={constructor:e,_doLayout:function(){this.radarData=[];var t=this._buildLocationMap();for(var e in t)for(var a=t[e],i=a.length-1;i>=0;i--){var r=a[i];r&&a.length&&this._buildRadarSeries(r)}},_buildRadarSeries:function(t){var e=this._getAxisPair(t[0][0]),a=e.baseAxis,r=e.valueAxis;this._fixRadarCenterAndRadius(a,r);var s=this,l=this.option.plotOptions,c=[],d=this.option.series.length>3?0:o,u=i.pick(l.columnType,!1);t.forEach(function(t){for(var e=0,o=t.length;o>e;e++){var g=t[e],f=s.option.series[g],p=[f,l],m=f.name,v=n.queryList(p,"lineWidth"),y=i.pick(n.queryList(p,"connectNulls"),!0),_=n.queryList(p,"fillColor"),b=f.color||s._getDefaultSeriesColor(g);_=_?_===!0?b:_:"";for(var x=i.pick(n.queryList(p,"fillColorOpacity"),u?1:.15),L=[],C=f.data||[],T=0,A=C.length;A>T;T++){var k=s._getMarkerData(T,g,a,r);k.fillColorOpacity=x,k.columnType=u,L.push(k),c[T]=c[T]||[],c[T].push(k)}s.radarData.push({delay:d*g,columnType:u,seriesName:m,seriesID:h+i.removeAllBlank(encodeURI(m)),seriesIndex:g,connectNulls:y,lineWidth:v,lineColor:b,fillColor:_,fillColorOpacity:x,points:L})}}),c.forEach(function(t){if(s._calculatePercentage(t),s._mergeTooltipAttributes(t),u)for(var e=0+r.getStartPosValue(),a=0,i=0,n=t.length;n>i;i++){var o=t[i];o.y>=0?(o.y0=e,e+=o.y):(o.y0=a,a+=o.y)}});for(var g=0,f=this.radarData.length;f>g;g++){var p=this.radarData[g];p.points.forEach(function(t){var e=t.y0;t.y0=s.valueScale(e),t.y=s.valueScale(t.y+e),t.radian=s.cateScale(t.category)*s.piece,t.pos=s._getArcPoint(t.y,t.radian),s._calculateLabelPos(t)})}this.radarData.forEach(function(t){t.pathSegment=s._getPathSegment(t.points,t.connectNulls)})},_calculateLabelPos:function(t){var e=t.dataLabels;e&&e.enabled&&(t.labelContent=this._calculateLabelContent(t),t.labelDim=this._calculateTextDim(t.labelContent),t.columnType?this._calculateColumnTypeLabelPos(t):this._calculatePolygonTypeLabelPos(t))},_calculateColumnTypeLabelPos:function(t){var e=this._getRadarPosition(t.category),a=this._getArcPoint(t.y-l,t.radian),i=t.labelDim;switch(e){case c:t.labelPos={x:-i.width/2,y:a[1]};break;case g:t.labelPos={x:a[0]-i.width,y:a[1]-i.height/2};break;case d:t.labelPos={x:-i.width/2,y:a[1]-i.height};break;case u:t.labelPos={x:a[0],y:a[1]-i.height/2}}},_calculatePolygonTypeLabelPos:function(t){var e=this._getRadarPosition(t.category),a=this._getArcPoint(t.y+l,t.radian),i=t.labelDim;switch(e){case c:t.labelPos={x:-i.width/2,y:a[1]-i.height};break;case g:t.labelPos={x:a[0],y:a[1]-i.height/2};break;case d:t.labelPos={x:-i.width/2,y:a[1]};break;case u:t.labelPos={x:a[0]-i.width,y:a[1]-i.height/2}}},getAxisLineData:function(){var t=[],e=this.cateScale.domain(),a=this;return e.forEach(function(e){var i=a.cateScale(e)*a.piece,r=a.radius;t.push(a._getArcPoint(r,i))}),t},_getGridData:function(t,e){var a=this.option.plotOptions.type||r.POLYGON_RADAR,i=this;if(a==r.POLYGON_RADAR){var n=[],o=this.cateScale.domain();return o.forEach(function(e){var a=i.cateScale(e)*i.piece,r=i.valueScale(t);n.push(i._getArcPoint(r,a))}),e&&n.reverse(),n}return this.valueScale(t)},_getGridPathByData:function(t){if(i.isArray(t)){for(var e="",a=0,r=t.length;r>a;a++){var n=a?"L":"M";e+=n+i.dealFloatPrecision(t[a][0])+","+i.dealFloatPrecision(t[a][1])}return e+="Z"}var o=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0);return o.outerRadius(t)()},_getGridPath:function(t,e){var a=this._getGridData(t,e);return this._getGridPathByData(a)},_getRadarColumnPath:function(t,e,a){var i=.375*this.piece,r=a-i,n=a+i,o=d3.svg.arc().innerRadius(t).outerRadius(e).startAngle(r).endAngle(n);return o()},_getPathSegment:function(t,e){var a=[],i=[];if(e)a.push(i),t.forEach(function(t){t.isNull||i.push(t.pos)});else{for(var r=0,n=t.length,o=n-1;o>0;o--){var s=t[o],l=t[o-1];!s.isNull&&l.isNull&&(r=o)}for(var o=0;n>o;o++){var h=t[(o+r)%n];h.isNull&&i.length?(a.push(i),i=[]):i.push(h.pos)}i.length&&a.push(i)}return a},_getRadarSeriesFillPath:function(t,e){return this._getRadarSeriesPath(t,e,!0)},_getRadarSeriesStrokePath:function(t,e){return this._getRadarSeriesPath(t,e,!1)},_getRadarSeriesPath:function(t,e,a){var r="",n=[];if(1==t.length){n=t[0];var o=n.length==this.baseAxis.getCategoryCount()||e;a=!o&&a,r=a?"M0,0":"";for(var s=0,l=n.length;l>s;s++){var h=s||a?"L":"M";r+=h+i.dealFloatPrecision(n[s][0])+","+i.dealFloatPrecision(n[s][1])}r+=o||a?"Z":""}else t.forEach(function(t){r+=a?"M0,0":"",t.forEach(function(t){r+="L"+i.dealFloatPrecision(t[0])+","+i.dealFloatPrecision(t[1])}),r+=a?"Z":""});return r},_getRadarPlotBandsPath:function(t,e){var a=this.option.plotOptions.type||r.POLYGON_RADAR;if(a==r.POLYGON_RADAR)return this._getGridPath(Math.min(t,e))+this._getGridPath(Math.max(t,e),!0);var i=d3.svg.arc().startAngle(0).endAngle(2*Math.PI);return i.innerRadius(this.valueScale(Math.min(t,e))).outerRadius(this.valueScale(Math.max(t,e)))()},_fixRadarCenterAndRadius:function(t,e){this.baseAxis=t,this.valueAxis=e;var a=t.categories;this.cateScale=d3.scale.ordinal().domain(a).rangePoints([0,a.length-1]),this.piece=2*Math.PI/Math.max(a.length,1);var r,n=this.getPlotBounds();this.categoryLabel=i.clone(t.tickData),t.componentOption.showLabel?(r=2*Math.min(n.width,n.height)/6,this._testUseMinRadius(r)||(r=this._findNiceRadius(),this._testUseMinRadius(r))):(this.categoryLabel=[],r=Math.min(n.width/2,n.height/2)-s),this.radius=r,this.center=[n.width/2+n.x,n.height/2+n.y],this.valueScale=e.scale.copy().rangeRound([0,this.radius])},_testUseMinRadius:function(t){for(var e=this.getPlotBounds(),a={x:-e.width/2,y:-e.height/2,width:e.width,height:e.height},r=!1,n=this.baseAxis.componentOption.labelStyle,o=this.baseAxis.componentOption.useHtml,l=i.getTextHeight(n),h=0,u=this.categoryLabel.length;u>h;h++){var g=this.categoryLabel[h],f=this._getCateLabelBounds(t,g);if(!i.containsRect(a,f)){if(!o){var p,m,v=g.tickValue,y=this.cateScale(v),_=this._getArcPoint(t+s,y*this.piece),b=this._getRadarPosition(v);b==c||b==d?(p=e.height/2-t-s,m=p-2*s):(p=e.width/2-Math.abs(_[0]),m=p);var x=i.splitText(g.tickContent,n,p);g.tickContent=x,g.tickDim={width:m,height:x.length*l+(x.length-1)*l*.3},this._getCateLabelBounds(t,g)}r=!0}}return r},_getRadarPosition:function(t){var e=this.cateScale(t),a=this.cateScale.domain(),i=a.length/2;return 0==e?c:e>0&&i>e?g:e==i?d:e>i?u:void 0},_getCateLabelBounds:function(t,e){var a,r=e.tickValue,n=e.tickDim,o=this.cateScale(r),l=this._getArcPoint(t+s,o*this.piece),h=this._getRadarPosition(r);switch(h){case c:a={x:-n.width/2,y:-t-.65*n.height-s};break;case g:a={x:l[0],y:l[1]-n.height/2};break;case d:a={x:-n.width/2,y:t+s};break;case u:a={x:l[0]-n.width,y:l[1]-n.height/2}}return e.tickPos=a,i.makeBounds(a,n)},_findNiceRadius:function(){var t=this.getPlotBounds(),e=t.width/2,a=t.height/2,i=Math.min(e,a),r=this.cateScale.domain(),n=this;return this.categoryLabel.forEach(function(t){if(t.tickContent){var o=t.tickValue,s=t.tickDim,l=r.length/2,h=n.cateScale(o),c=(e-s.width)/Math.abs(Math.sin(h*n.piece)),d=0==h||h==l?a-s.height:c;i=Math.min(i,d)}}),i-s},getRadarCenter:function(){return this.center},getBaseAxis:function(){return this.baseAxis},getValueAxis:function(){return this.valueAxis},getRadarData:function(){return this.radarData},getRadarPlotBands:function(){var t=this.valueAxis._getPlotBands(),e=[],a=this;return t.forEach(function(t){e.push({path:a._getRadarPlotBandsPath(t.from,t.to),color:t.color})}),e},getRadarPlotLines:function(){var t=this.valueAxis.componentOption.plotLines||[],e=this,a=[];return t.forEach(function(t){var i,n,o;t.label&&t.label.text&&t.label.style&&(i=t.label.text,n=t.label.style,o=t.label.align),a.push({color:t.color,value:t.value,width:t.width,dataArray:r.DASH_TYPE[t.dashStyle],text:i,baseY:-e.valueScale(t.value),textAnchor:o==r.LEFT?"end":"start",style:n})}),a},isColumnType:function(){var t=this.option.plotOptions;return i.pick(t.columnType,!1)},getInitRadius:function(){return this.valueScale(this.valueAxis.getStartPosValue())},_getInitPathSegment:function(t){var e=[];return t.forEach(function(t){var a=[];e.push(a),t.forEach(function(){a.push([0,0])})}),e},_getFixedPos:function(t,e){var a,i;if(t.columnType){var r=t.y,n=t.radian;a=r*Math.sin(n)+this.center[0],i=r*Math.cos(n+Math.PI)+this.center[1],n<Math.PI/2?i-=e.height:n>=Math.PI&&n<3*Math.PI/2?a-=e.width:n>=3*Math.PI/2&&n<2*Math.PI&&(i-=e.height,a-=e.width)}else{var r=t.marker.radius||this.getDefaultMarkerRadius();a=this.center[0]+t.pos[0]+r,i=this.center[1]+t.pos[1]+r}return[a,i]},getSelectedRadarData:function(){if(this.radarData.length){for(var t=this.selectedIndex,e=0,a=this.radarData.length;a>e;e++)if(this.radarData[e].seriesIndex==t)return this.radarData[e];return this.selectedIndex=this.radarData[0].seriesIndex,this.radarData[0]}},getClosestPoint:function(t){var e,a=Number.MAX_VALUE,i=this.getSelectedRadarData(),r=this.center;return i&&i.points.forEach(function(i){var n=i.pos,o=n[0]+r[0]-t[0],s=n[1]+r[1]-t[1],l=Math.sqrt(o*o+s*s);a>l&&!i.isNull&&(e=i,a=l)}),e},onContainerMouseMove:function(t){this.isColumnType()||this._onLineSeriesContainerMove(t)},onContainerMouseLeave:function(){this.isColumnType()||this._onLineSeriesContainerLeave()},onContainerClick:function(t){this.isColumnType()||this._onCommonContainerClick(t)},orderDataIncrease:function(){this._orderDataInOrder(!0),this._doLayout()},orderDataDecrease:function(){this._orderDataInOrder(!1),this._doLayout()}},i.inherit(e,a),t("../ChartLibrary").register(r.RADAR_CHART,e),e});var i=e("VanCharts");return e("chart/Pie"),e("chart/Bar"),e("chart/Line"),e("chart/Area"),e("chart/Gauge"),e("chart/Radar"),i});